import{ig as i,ih as e,kY as s,B as t,bt as r,mt as a,F as h,G as p,H as n,eR as d}from"./vendor.7103ff48.js";import{p as u}from"./Graphics3DFrustumVisibility.283af435.js";import{E as l}from"./Graphics3DGraphicLikeLayerView.f8e9955d.js";import{t as c}from"./projectExtentUtils.e211dec5.js";import"./Graphics3DScaleVisibility.1e789161.js";import"./optimizedFeatureQueryEngineAdapter.7a815640.js";import"./centroid.f07ef5b9.js";import"./PooledRBush.78e40fd7.js";import"./Graphics3DObjectStates.87f704de.js";let o=class extends(i(e)){constructor(){super(...arguments),this.type="graphics-3d",this.frustumVisibility=new u,this.slicePlaneEnabled=!1,this.drapeSourceType=1,this.suspendResumeExtent=null,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("graphics3d",new l({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.updatingHandles.add(this,"fullOpacity",(()=>this.graphics3d.graphicsCore.opacityChange())),this.handles.add(this.layer.on("graphic-update",(i=>this.graphics3d.graphicsCore.graphicUpdateHandler(i)))),this.addResolvingPromise(c(this).then((i=>this.fullExtentInLocalViewSpatialReference=i))),this.layer.internal?this.notifyChange("updating"):this.handles.add(s(this.view,"basemapTerrain.ready",(()=>this.notifyChange("updating"))))}destroy(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set("frustumVisibility",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set("graphics3d",null))}get legendEnabled(){return this.canResume()&&!this.frustumVisibility.suspended}get suspendInfo(){var i;const e={};return t(this.graphics3d.scaleVisibility)&&this.graphics3d.scaleVisibility.suspended&&(e.outsideScaleRange=!0),e.outsideOfView=!(null==(i=this.frustumVisibility)||!i.suspended),e}async fetchPopupFeatures(i,e){return t(e)?e.clientGraphics:null}notifyGraphicGeometryChanged(i){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(i)}get graphics3DGraphics(){return this.graphics3d.graphicsCore.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}getGraphicFromGraphicUid(i){return this.graphics3d.getGraphicFromGraphicUid(i)}whenGraphicBounds(i,e){return this.graphics3d.whenGraphicBounds(i,e)}computeAttachmentOrigin(i,e){return this.graphics3d?this.graphics3d.graphicsCore.computeAttachmentOrigin(i,e):null}getSymbolLayerSize(i,e){return this.graphics3d.getSymbolLayerSize(i,e)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(i){return this.graphics3d.maskOccludee(i)}highlight(i){return this.graphics3d.highlight(i)}get updatePolicy(){var i;return(null==(i=this.graphics3d)?void 0:i.graphicsCore.effectiveUpdatePolicy)||1}canResume(){var i;return super.canResume()&&!(null!=(i=this.graphics3d)&&i.suspended)}isUpdating(){var i,e;return!(!(this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&(this.layer.internal||null!=(i=this.view)&&null!=(e=i.basemapTerrain)&&e.ready))}setupSuspendResumeExtent(){const i=()=>{this.suspendResumeExtent=d(this.graphics3d.graphicsCore.computedExtent,this.suspendResumeExtent,1.2,this.graphics3d.graphicsCore.extentPadding),this.frustumVisibility.setExtent(this.suspendResumeExtent)};r(this.graphics3d.graphicsCore,"computedExtent",(()=>i()),!0),a(this.graphics3d.graphicsCore,"extentPadding",(()=>i()),!0)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}}};h([p({aliasOf:"layer.graphics"})],o.prototype,"loadedGraphics",void 0),h([p({readOnly:!0})],o.prototype,"suspended",void 0),h([p({readOnly:!0})],o.prototype,"legendEnabled",null),h([p({readOnly:!0})],o.prototype,"updating",void 0),h([p()],o.prototype,"layer",void 0),h([p({readOnly:!0})],o.prototype,"frustumVisibility",void 0),h([p({readOnly:!0})],o.prototype,"graphics3d",void 0),h([p({type:Boolean})],o.prototype,"slicePlaneEnabled",void 0),h([p({readOnly:!0})],o.prototype,"suspendInfo",null),o=h([n("esri.views.3d.layers.GraphicsLayerView3D")],o);var g=o;export{g as default};
//# sourceMappingURL=GraphicsLayerView3D.1dfc06b1.js.map
