{"version":3,"file":"WMSLayerView.3410e49f.js","sources":["../../node_modules/@arcgis/core/views/layers/WMSLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export{a as WMSLayerView,a as default};\n"],"names":["a","i","a2","initialize","exportImageParameters","p","layer","this","destroy","e2","commitProperty","_get","fetchPopupFeatures","t","Promise","reject","r","popupEnabled","o","s","createFetchPopupFeaturesQuery","resolve","extent","width","a3","height","i2","x","m","y","n2","u","fetchFeatureInfo","e","prototype","readOnly"],"mappings":"iIAImhB,MAACA,UAAUC,EAAE,cAAcC,EAAEC,kBAAkBC,sBAAsB,IAAIC,EAAE,CAACC,MAAMC,KAAKD,QAAQE,eAAeJ,sBAAsBI,UAAUD,KAAKH,sBAAsB,kCAAkCK,SAAS,SAASF,KAAKH,wBAAwBK,EAAEC,eAAe,WAAWH,KAAKG,eAAe,oBAAoBC,KAAK,uBAAuB,GAAG,EAAEC,mBAAmBH,SAASH,MAAMO,GAAGN,SAASE,SAASK,QAAQC,OAAO,IAAIC,EAAE,kCAAkC,gCAAgC,CAACV,MAAMO,WAAWI,aAAaC,GAAGL,MAAMK,SAASJ,QAAQC,OAAO,IAAIC,EAAE,kCAAkC,8BAA8B,CAACC,aAAaC,WAAWC,EAAEZ,KAAKa,8BAA8BX,OAAOU,SAASL,QAAQO,QAAQ,UAAUC,OAAOjB,EAAEkB,MAAMC,EAAEC,OAAOC,EAAEC,EAAEC,EAAEC,EAAEC,GAAGX,UAAUK,GAAGE,SAAS,IAAIV,EAAE,kCAAkC,+CAA+C,CAACM,OAAOjB,EAAEkB,MAAMC,EAAEC,OAAOC,UAAUK,EAAElB,EAAEmB,iBAAiB3B,EAAEmB,EAAEE,EAAEE,EAAEE,UAAUhB,QAAQO,QAAQU,EAAE,CAACA,GAAG,aAAaE,EAAE,CAACpB,KAAKZ,EAAEiC,UAAU,6BAAwB,GAAQD,EAAE,CAACpB,EAAE,CAACsB,UAAS,KAAMlC,EAAEiC,UAAU,qBAAqB,MAAMD,EAAE,CAACpB,KAAKZ,EAAEiC,UAAU,aAAQ,GAAQD,EAAE,CAACpB,EAAEM,IAAIlB,EAAEiC,UAAU,kBAAa,GAAQjC,EAAEgC,EAAE,CAACf,EAAE,oCAAoCjB,GAAGA"}