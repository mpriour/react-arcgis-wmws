{"version":3,"file":"layersCreator.4e3e0dbf.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../PortalItem.js\";import{hasTypeKeyword as t}from\"./portalItemUtils.js\";function r(e,t){return n(e,t,\"notes\",\"Map Notes\")}function o(e,t){return n(e,t,\"route\",\"Route Layer\")}async function n(r,o,n,i){if(!r.layerType||\"ArcGISFeatureLayer\"!==r.layerType)return!1;if(r.url)return!1;if(r.featureCollectionType&&r.featureCollectionType===n)return!0;if(r.itemId){const n=new e({id:r.itemId,portal:o});return await n.load(),\"Feature Collection\"===n.type&&t(n,i)}return!1}export{r as isMapNotesLayer,o as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{eachAlways as r}from\"../../core/promiseUtils.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import y from\"../../portal/PortalItem.js\";import{isMapNotesLayer as t,isRouteLayer as i}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as L}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function n(e,a,y){if(!a)return;const t=[];for(const r of a){const e=I(r,y);\"GroupLayer\"===r.layerType?t.push(M(e,r,y)):t.push(e)}const i=await r(t);for(const r of i)!r.value||y.filter&&!y.filter(r.value)||e.add(r.value)}const l={ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",PointCloudLayer:\"PointCloudLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",GroupLayer:\"GroupLayer\",WebTiledLayer:\"WebTileLayer\",CSV:\"CSVLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\",KML:\"KMLLayer\",RasterDataLayer:\"UnsupportedLayer\",Voxel:\"VoxelLayer\"},c={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},s={ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",WebTiledLayer:\"WebTileLayer\",VectorTileLayer:\"VectorTileLayer\",ArcGISImageServiceLayer:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",DefaultTileLayer:\"TileLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",SubtypeGroupLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},S={ArcGISFeatureLayer:\"FeatureLayer\"},u={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WebTiledLayer:\"WebTileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\"};async function I(e,r){return d(await T(e,r),e,r)}async function d(e,r,a){const y=new e;return y.read(r,a.context),\"group\"===y.type&&m(r)&&await G(y,r,a.context),await o(y,a.context),y}async function T(e,r){const o=r.context,n=g(o);let l=e.layerType||e.type;!l&&r&&r.defaultLayerType&&(l=r.defaultLayerType);const c=n[l];let s=c?a[c]:a.UnknownLayer;const p=o&&o.portal;if(f(e)){if(e.itemId){const r=new y({id:e.itemId,portal:p});await r.load();const t=(await L(r)).className||\"UnknownLayer\";s=a[t]}}else\"ArcGISFeatureLayer\"===l?await t(e,p)?s=a.MapNotesLayer:await i(e,p)?s=a.RouteLayer:m(e)&&(s=a.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?s=a.WMTSLayer:\"WFS\"===l&&\"2.0.0\"!==e.wfsInfo.version&&(s=a.UnsupportedLayer);return s()}function m(e){if(\"ArcGISFeatureLayer\"!==e.layerType||f(e))return!1;const r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function f(e){return\"Feature Collection\"===e.type}function g(e){let r;if(\"web-scene\"===e.origin)switch(e.layerContainerType){case\"basemap\":r=s;break;case\"ground\":r=c;break;default:r=l}else switch(e.layerContainerType){case\"basemap\":r=u;break;case\"tables\":r=S;break;default:r=p}return r}async function M(r,a,y){const t=new e,i=n(t,Array.isArray(a.layers)?a.layers:[],y),L=await r;if(await i,\"group\"===L.type)return L.layers.addMany(t),L}async function G(e,r,y){const t=a.FeatureLayer,i=await t(),L=r.featureCollection,o=L.showLegend,n=L.layers.map((e=>{const r=new i;return r.read(e,y),null!=o&&r.read({showLegend:o},y),r}));e.layers.addMany(n)}export{n as populateOperationalLayers};\n"],"names":["async","r2","o2","n2","i","layerType","url","featureCollectionType","itemId","n3","e","id","portal","load","type","t","a2","y","t2","e2","I","push","M","r","value","filter","add","l","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","PointCloudLayer","ArcGISSceneServiceLayer","IntegratedMeshLayer","OGCFeatureLayer","BuildingSceneLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","GroupLayer","WebTiledLayer","CSV","VectorTileLayer","WFS","WMS","DefaultTileLayer","KML","RasterDataLayer","Voxel","c","RasterDataElevationLayer","s","OpenStreetMap","p","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsRoad","BingMapsHybrid","GeoRSS","SubtypeGroupLayer","S","u","read","context","m","a","FeatureLayer","L2","featureCollection","showLegend","layers","map","r3","addMany","G","o","d","origin","layerContainerType","g","l2","defaultLayerType","c2","s2","UnknownLayer","p2","f","L","className","n","MapNotesLayer","RouteLayer","wmtsInfo","layerIdentifier","WMTSLayer","wfsInfo","version","UnsupportedLayer","T","length","Array","isArray","L$1"],"mappings":"kQAI4LA,iBAAiBC,EAAEC,EAAEC,EAAEC,OAAOH,EAAEI,WAAW,uBAAuBJ,EAAEI,iBAAgB,KAAMJ,EAAEK,WAAU,KAAML,EAAEM,uBAAuBN,EAAEM,wBAAwBJ,SAAQ,KAAMF,EAAEO,OAAO,OAAOC,EAAE,IAAIC,EAAE,CAACC,GAAGV,EAAEO,OAAOI,OAAOV,iBAAiBO,EAAEI,OAAO,uBAAuBJ,EAAEK,MAAMC,EAAEN,EAAEL,UAAS,ECARJ,iBAAiBU,EAAEM,EAAEC,OAAOD,eAAeE,EAAE,aAAajB,KAAKe,EAAE,OAAOG,EAAEC,EAAEnB,EAAEgB,GAAG,eAAehB,EAAEI,UAAUa,EAAEG,KAAKC,EAAEH,EAAElB,EAAEgB,IAAIC,EAAEG,KAAKF,SAASf,QAAQmB,EAAEL,aAAajB,KAAKG,GAAGH,EAAEuB,OAAOP,EAAEQ,SAASR,EAAEQ,OAAOxB,EAAEuB,QAAQd,EAAEgB,IAAIzB,EAAEuB,OAAO,MAAMG,EAAE,CAACC,mBAAmB,eAAeC,wBAAwB,eAAeC,sBAAsB,gBAAgBC,gBAAgB,kBAAkBC,wBAAwB,aAAaC,oBAAoB,sBAAsBC,gBAAgB,kBAAkBC,mBAAmB,qBAAqBC,iCAAiC,iBAAiBC,6BAA6B,mBAAmBC,2BAA2B,YAAYC,WAAW,aAAaC,cAAc,eAAeC,IAAI,WAAWC,gBAAgB,kBAAkBC,IAAI,WAAWC,IAAI,WAAWC,iBAAiB,YAAYC,IAAI,WAAWC,gBAAgB,mBAAmBC,MAAM,cAAcC,EAAE,CAACb,iCAAiC,iBAAiBS,iBAAiB,iBAAiBK,yBAAyB,oBAAoBC,EAAE,CAACb,2BAA2B,YAAYD,6BAA6B,mBAAmBe,cAAc,qBAAqBZ,cAAc,eAAeE,gBAAgB,kBAAkBb,wBAAwB,mBAAmBe,IAAI,mBAAmBd,sBAAsB,mBAAmBe,iBAAiB,aAAaQ,EAAE,CAACzB,mBAAmB,eAAeC,wBAAwB,eAAeyB,8BAA8B,eAAexB,sBAAsB,gBAAgByB,kBAAkB,cAAclB,6BAA6B,mBAAmBC,2BAA2B,YAAYkB,eAAe,gBAAgBC,aAAa,gBAAgBC,eAAe,gBAAgBjB,IAAI,WAAWI,iBAAiB,YAAYc,OAAO,cAAcpB,WAAW,aAAaO,IAAI,WAAWZ,gBAAgB,kBAAkB0B,kBAAkB,mBAAmBlB,gBAAgB,kBAAkBC,IAAI,WAAWC,IAAI,WAAWJ,cAAc,gBAAgBqB,EAAE,CAACjC,mBAAmB,gBAAgBkC,EAAE,CAACjC,wBAAwB,eAAeyB,8BAA8B,eAAexB,sBAAsB,gBAAgBO,6BAA6B,mBAAmBC,2BAA2B,YAAYc,cAAc,qBAAqBV,gBAAgB,kBAAkBF,cAAc,eAAegB,eAAe,gBAAgBC,aAAa,gBAAgBC,eAAe,gBAAgBd,IAAI,WAAWC,iBAAiB,aAAa7C,iBAAiBU,EAAET,UAA8BD,eAAiBU,EAAET,EAAEe,SAASC,EAAE,IAAIP,SAASO,EAAE8C,KAAK9D,EAAEe,EAAEgD,SAAS,UAAA/C,EAAYH,MAAMmD,EAAEhE,UAAsqCD,eAAiBU,EAAET,EAAEgB,SAASC,EAAEgD,EAAEC,aAAa/D,QAAQc,IAAIkD,EAAEnE,EAAEoE,kBAAkBnE,EAAEkE,EAAEE,WAAWnE,EAAEiE,EAAEG,OAAOC,eAAeC,EAAE,IAAIrE,SAASqE,EAAEV,KAAK5C,EAAEF,GAAG,MAAAf,GAASuE,EAAEV,KAAK,CAACO,WAAWpE,GAAGe,GAAGwD,OAAOF,OAAOG,QAAQvE,GAAz2CwE,CAAE1D,EAAEhB,EAAEe,EAAEgD,eAAeY,EAAE3D,EAAED,EAAEgD,SAAS/C,EAAzJ4D,OAA2J7E,eAAiBU,EAAEa,SAASqD,EAAErD,EAAEyC,QAAQ7D,EAA0sB,SAAWO,OAAOT,KAAK,cAAcS,EAAEoE,cAAcpE,EAAEqE,wBAAwB,YAAY5B,YAAY,WAAWF,kBAAkBtB,cAAcjB,EAAEqE,wBAAwB,YAAYjB,YAAY,WAAWD,kBAAkBR,SAASpD,EAAl7B+E,CAAEJ,OAAOK,EAAEvE,EAAEL,WAAWK,EAAEI,MAAMmE,GAAG1D,GAAGA,EAAE2D,qBAAqB3D,EAAE2D,wBAAwBC,EAAEhF,EAAE8E,OAAOG,EAAED,EAAEjB,EAAEiB,GAAGjB,EAAEmB,mBAAmBC,EAAEV,GAAGA,EAAEhE,UAAU2E,EAAE7E,OAAOA,EAAEF,OAAO,OAAOP,EAAE,IAAIgB,EAAE,CAACN,GAAGD,EAAEF,OAAOI,OAAO0E,UAAUrF,EAAEY,aAAaK,SAASsE,EAAEvF,IAAIwF,WAAW,iBAAiBvB,EAAEhD,QAAQ,uBAAuB+D,QDA1zG,SAAWvE,EAAEQ,UAAUwE,EAAEhF,EAAEQ,EAAE,QAAQ,aCA6xGH,CAAEL,EAAE4E,GAAGF,EAAElB,EAAEyB,oBDA3xG,SAAWjF,EAAEQ,UAAUwE,EAAEhF,EAAEQ,EAAE,QAAQ,eCA0wGd,CAAEM,EAAE4E,GAAGF,EAAElB,EAAE0B,WAAW3B,EAAEvD,OAAOwD,EAAE3B,YAAY7B,EAAEmF,UAAUnF,EAAEmF,SAASvF,KAAKI,EAAEmF,SAASC,gBAAgBV,EAAElB,EAAE6B,UAAU,QAAAd,GAAW,UAAAvE,EAAYsF,QAAQC,YAAY/B,EAAEgC,yBAAyBd,IAAvsBe,CAAEzF,EAAET,GAAGS,EAAET,GAAksB,WAAWS,MAAM,uBAAAA,EAAyBL,WAAWkF,EAAE7E,UAAS,QAAST,EAAES,EAAE2D,8BAA8BpE,EAAEsE,QAAQtE,EAAEsE,OAAO6B,OAAO,GAAG,WAAW1F,SAAS,uBAAuBA,EAAEI,KAAiPd,iBAAiBC,EAAEe,EAAEC,SAASC,EAAE,IAAIR,EAAEN,EAAEsF,EAAExE,EAAEmF,MAAMC,QAAQtF,EAAEuD,QAAQvD,EAAEuD,OAAO,GAAGtD,GAAGuE,QAAQvF,WAAWG,EAAE,UAAAmG,EAAYzF,YAAY0E,EAAEjB,OAAOG,QAAQxD,GAAGsE"}