{"version":3,"file":"WMSLayerView3D.9a1f92ac.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/WMSLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../geometry/Extent.js\";import o from\"./DynamicLayerView3D.js\";import{WMSLayerView as a}from\"../../layers/WMSLayerView.js\";let p=class extends(a(o)){constructor(){super(...arguments),this.type=\"wms-3d\"}initialize(){this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))),this.updatingHandles.add(this.exportImageParameters,\"version\",(()=>{this.updatingHandles.addPromise(this.refreshDebounced())}))}createFetchPopupFeaturesQuery(e){const t=this.findExtentInfoAt(e),r=t.extent,s=new i(r[0],r[1],r[2],r[3],this._spatialReference),o=t.imageSize,a=o.width,p=o.height,n=s.width/a;return{extent:s,width:a,height:p,x:Math.round((e.x-s.xmin)/n),y:Math.round((s.ymax-e.y)/n)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};e([r()],p.prototype,\"suspended\",void 0),p=e([s(\"esri.views.3d.layers.WMSLayerView3D\")],p);var n=p;export{n as default};\n"],"names":["p","a","o","constructor","arguments","this","type","initialize","layer","supportsSpatialReference","view","spatialReference","addResolvingPromise","Promise","reject","t","updatingHandles","add","exportImageParameters","addPromise","refreshDebounced","createFetchPopupFeaturesQuery","e2","findExtentInfoAt","r","extent","s2","i","_spatialReference","imageSize","a2","width","p2","height","n2","x","Math","round","xmin","y","ymax","getFetchOptions","timeExtent","e","prototype","s","n"],"mappings":"yVAIsf,IAAIA,EAAE,cAAcC,EAAEC,IAAIC,uBAAuBC,WAAWC,KAAKC,KAAK,SAASC,kBAAkBC,MAAMC,yBAAyBJ,KAAKK,KAAKC,mBAAmBN,KAAKO,oBAAoBC,QAAQC,OAAO,IAAIC,EAAE,2CAA2C,gHAAgHV,KAAKW,gBAAgBC,IAAIZ,KAAKa,sBAAsB,WAAW,UAAUF,gBAAgBG,WAAWd,KAAKe,uBAAuBC,8BAA8BC,SAASP,EAAEV,KAAKkB,iBAAiBD,GAAGE,EAAET,EAAEU,OAAOC,EAAE,IAAIC,EAAEH,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGnB,KAAKuB,mBAAmB1B,EAAEa,EAAEc,UAAUC,EAAE5B,EAAE6B,MAAMC,EAAE9B,EAAE+B,OAAOC,EAAER,EAAEK,MAAMD,QAAQ,CAACL,OAAOC,EAAEK,MAAMD,EAAEG,OAAOD,EAAEG,EAAEC,KAAKC,SAASF,EAAET,EAAEY,MAAMJ,GAAGK,EAAEH,KAAKC,SAASG,KAAKlB,EAAEiB,GAAGL,IAAIO,wBAAwB,CAACC,WAAWrC,KAAKqC,cAAcC,EAAE,CAACnB,KAAKxB,EAAE4C,UAAU,iBAAY,GAAQ5C,EAAE2C,EAAE,CAACE,EAAE,wCAAwC7C,GAAM,IAAC8C,EAAE9C"}