{"version":3,"file":"MaterialKey.8df623c8.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"above-along\":case\"below-along\":case\"center-along\":case\"esriServerLinePlacementAboveAlong\":case\"esriServerLinePlacementBelowAlong\":case\"esriServerLinePlacementCenterAlong\":return!0;default:return!1}}export{e as isMapAligned};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{WGLVVFlag as e,WGLVVTarget as i,WGLGeometryType as s}from\"../enums.js\";import{isMapAligned as r}from\"../mesh/templates/meshUtils.js\";function a(t,s=!1){const r=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,a=(t&(i.FIELD_TARGETS_OUTLINE|i.MINMAX_TARGETS_OUTLINE|i.SCALE_TARGETS_OUTLINE|i.UNIT_TARGETS_OUTLINE))>>>4;return s?r&a:r&~a}function n(t){const i=a(t,!1);return t&(e.COLOR|e.OPACITY|e.ROTATION|i)}function o(t){return t&(e.COLOR|e.OPACITY)}function v(t,i){if(i){return t&a(t,!0)}const s=a(t,!1);return t&(e.COLOR|e.OPACITY|s)}function h(t){return n(t)}function u(t){return t&a(t,!1)}const S=0,l=8,c=7,d=8,V=11,p=11,g=12,z=13,T=14,y=15,E=15,m=16,L=17,O=18,I=19,M=20;function A(t,e,i,r,a){switch(t){case s.FILL:return C.from(e,r);case s.LINE:return b.from(e,i);case s.MARKER:return w.from(e);case s.TEXT:return F.from(e);case s.LABEL:return N.from(e,a);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function f(t){switch(_.load(t).geometryType){case s.MARKER:return new w(t);case s.FILL:return new C(t);case s.LINE:return new b(t);case s.TEXT:return new F(t);case s.LABEL:return new N(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(d,V)}set geometryType(t){this.setBits(t,d,V)}get mapAligned(){return!!this.bit(M)}set mapAligned(t){this.setBit(M,t)}get sdf(){return!!this.bit(p)}set sdf(t){this.setBit(p,t)}get pattern(){return!!this.bit(g)}set pattern(t){this.setBit(g,t)}get textureBinding(){return this.bits(S,l)}set textureBinding(t){this.setBits(t,S,l)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return\"fill\";case s.MARKER:return\"marker\";case s.LINE:return\"line\";case s.TEXT:return\"text\";case s.LABEL:return\"label\";default:throw new t(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,r=0;s<i;s++,r++)this.setBit(s,0!=(t&1<<r))}bits(t,e){let i=0;for(let s=t,r=0;s<e;s++,r++)i|=this.bit(s)<<r;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(c&this.textureBinding)}}_.shared=new _(0);const x=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(m)}set vvSizeMinMaxValue(t){this.setBit(m,t)}get vvSizeScaleStops(){return 0!==this.bit(L)}set vvSizeScaleStops(t){this.setBit(L,t)}get vvSizeFieldStops(){return 0!==this.bit(O)}set vvSizeFieldStops(t){this.setBit(O,t)}get vvSizeUnitValue(){return 0!==this.bit(I)}set vvSizeUnitValue(t){this.setBit(I,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=a(t,i)&t;this.vvSizeMinMaxValue=!!(s&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&e.SIZE_SCALE_STOPS)}},R=t=>class extends t{get vvRotation(){return 0!==this.bit(y)}set vvRotation(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i&&!!(t&e.ROTATION)}},U=t=>class extends t{get vvColor(){return 0!==this.bit(z)}set vvColor(t){this.setBit(z,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i&&!!(t&e.COLOR)}},B=t=>class extends t{get vvOpacity(){return 0!==this.bit(T)}set vvOpacity(t){this.setBit(T,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i&&!!(t&e.OPACITY)}};class C extends(U(B(_))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.FILL,e?i.dotDensity=!0:i.setVV(t,!1),i.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(E)}set dotDensity(t){this.setBit(E,t)}}C.shared=new C(0);class w extends(U(B(R(x(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}w.shared=new w(0);class b extends(U(B(x(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.LINE,i.setVV(t,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);class F extends(U(B(R(x(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=s.TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0);class N extends(x(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.LABEL,i.setVV(t,!1),i.mapAligned=r(e),i.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}N.shared=new N(0);export{C as FillMaterialKey,N as LabelMaterialKey,b as LineMaterialKey,w as MarkerMaterialKey,_ as MaterialKeyBase,F as TextMaterialKey,A as createMaterialKey,o as getFillVVFlags,u as getLabelVVFlags,v as getLineVVFlags,n as getMarkerVVFlags,a as getSizeFlagsMask,h as getTextVVFlags,f as hydrateMaterialKey};\n"],"names":["e2","t","i","r","a2","s","FILL","C","from","LINE","b","MARKER","w","TEXT","F","LABEL","N","Error","_","load","geometryType","constructor","_data","this","shared","data","bits","setBits","bit","setBit","s2","hasVV","setVV","getVariation","mapAligned","pattern","sdf","getVariationHash","textureBinding","x","t2","super","vvSizeMinMaxValue","vvSizeScaleStops","vvSizeFieldStops","vvSizeUnitValue","e","SIZE_FIELD_STOPS","SIZE_MINMAX_VALUE","SIZE_SCALE_STOPS","SIZE_UNIT_VALUE","FIELD_TARGETS_OUTLINE","MINMAX_TARGETS_OUTLINE","SCALE_TARGETS_OUTLINE","UNIT_TARGETS_OUTLINE","a","R","vvRotation","ROTATION","U","vvColor","COLOR","B","vvOpacity","OPACITY","dotDensity","__spreadProps"],"mappings":"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"}