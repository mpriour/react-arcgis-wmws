import{F as e,H as t,z as s,B as r,j6 as a,j7 as p}from"./vendor.7103ff48.js";import{d as o,t as i}from"./popupUtils.99eeb504.js";const n=n=>{let c=class extends n{_validateFetchPopupFeatures(e){const{layer:t}=this,{popupEnabled:r}=t;return r?o(t,e)?void 0:new s("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new s("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:t})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,t){const s=this._validateFetchPopupFeatures(t);if(s)return Promise.reject(s);const n=r(t)?t.clientGraphics:null;if(!n||0===n.length)return Promise.resolve([]);const c=[],u=[],l="scene"===this.layer.type&&r(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,h=a(this.layer.fieldsIndex,await i(l,o(this.layer,t)));await this.prepareFetchPopupFeatures(h);const y=new Set;for(const r of n)p(h,r,y)?u.push(r):c.push(r);return 0===u.length?Promise.resolve(c):this.whenGraphicAttributes(u,[...y]).catch((()=>u)).then((e=>c.concat(e)))}};return c=e([t("esri.views.3d.layers.support.PopupSceneLayerView")],c),c};export{n as c};
//# sourceMappingURL=PopupSceneLayerView.abc65404.js.map
