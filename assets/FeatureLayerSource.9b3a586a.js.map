{"version":3,"file":"FeatureLayerSource.9b3a586a.js","sources":["../../node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../request.js\";import s from\"../../../TimeExtent.js\";import a from\"../../../core/Error.js\";import i from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import n from\"../../../core/Loadable.js\";import{isSome as u,isNone as l}from\"../../../core/maybe.js\";import{setDeepValue as d}from\"../../../core/object.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{dataComponents as h}from\"../../../core/urlUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../geometry/Extent.js\";import{fromJSON as f}from\"../../../geometry/support/jsonUtils.js\";import{createDrawingInfo as g}from\"./support/clientSideDefaults.js\";import{processAttachmentQueryResult as R}from\"../../../rest/query/operations/queryAttachments.js\";import{unapplyEditsZUnitScaling as F}from\"../../../rest/query/operations/zscale.js\";import b from\"../../../tasks/QueryTask.js\";import q from\"../../../geometry/SpatialReference.js\";const I=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"});async function _(e){if(\"string\"==typeof e){const t=h(e);return t||{data:e}}return new Promise(((t,r)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(h(s.result)),s.onerror=e=>r(e)}))}const O=new Set([\"Feature Layer\",\"Table\"]);let S=class extends n{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{var e,t;await this.load();const r=null==(e=this.sourceJSON.editingInfo)?void 0:e.lastEditDate;if(null==r)return{hasUpdates:!0,updates:{}};try{await this._fetchService(null)}catch{return{hasUpdates:!0,updates:{}}}const s=r!==(null==(t=this.sourceJSON.editingInfo)?void 0:t.lastEditDate);return{hasUpdates:s,updates:s?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}))}load(e){const t=u(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:t,dynamicDataSource:r,infoFor3D:s,gdbVersion:a,spatialReference:o,fieldsIndex:n}=this.layer,u=i(\"featurelayer-pbf\")&&e&&l(s)?\"pbf\":\"json\";return new b({url:t.path,format:u,fieldsIndex:n,infoFor3D:s,dynamicDataSource:r,gdbVersion:a,sourceSpatialReference:o})}async addAttachment(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/addAttachment\",i=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,i.query);try{const e=await r(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(s,n)}}async updateAttachment(e,t,s){await this.load();const a=e.attributes[this.layer.objectIdField],i=this.layer.parsedUrl.path+\"/\"+a+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(s,o.query);try{const e=await r(i,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async applyEdits(e,t){await this.load();const s=e.addFeatures.map(this._serializeFeature,this),a=e.updateFeatures.map(this._serializeFeature,this),i=this._getFeatureIds(e.deleteFeatures,null==t?void 0:t.globalIdUsed);F(s,a,this.layer.spatialReference);const o=[],n=[],u=[...e.deleteAttachments];for(const r of e.addAttachments)o.push(await this._serializeAttachment(r));for(const r of e.updateAttachments)n.push(await this._serializeAttachment(r));const l=o.length||n.length||u.length?{adds:o,updates:n,deletes:u}:null,d={gdbVersion:(null==t?void 0:t.gdbVersion)||this.layer.gdbVersion,rollbackOnFailure:null==t?void 0:t.rollbackOnFailureEnabled,useGlobalIds:null==t?void 0:t.globalIdUsed,returnEditMoment:null==t?void 0:t.returnEditMoment,usePreviousEditMoment:null==t?void 0:t.usePreviousEditMoment,sessionId:null==t?void 0:t.sessionId};null!=t&&t.returnServiceEditsOption?(d.edits=JSON.stringify([{id:this.layer.layerId,adds:s,updates:a,deletes:i,attachments:l}]),d.returnServiceEditsOption=I.toJSON(null==t?void 0:t.returnServiceEditsOption),d.returnServiceEditsInSourceSR=null==t?void 0:t.returnServiceEditsInSourceSR):(d.adds=s.length?JSON.stringify(s):null,d.updates=a.length?JSON.stringify(a):null,d.deletes=i.length?null!=t&&t.globalIdUsed?JSON.stringify(i):i.join(\",\"):null,d.attachments=l&&JSON.stringify(l));const c=this._getLayerRequestOptions({method:\"post\",query:d}),h=null!=t&&t.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,p=await r(h+\"/applyEdits\",c);return this._createEditsResult(p)}async deleteAttachments(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/deleteAttachments\";try{return(await r(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(i){throw this._createAttachmentErrorResult(s,i)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await r(`${i}/${a}`,t),{id:n,extent:u,fullExtent:l,timeExtent:d}=o,c=u||l;return{id:n,fullExtent:c&&m.fromJSON(c),timeExtent:d&&s.fromJSON({start:d[0],end:d[1]})}}))}async queryAttachments(e,t={}){const{parsedUrl:s}=this.layer,a=s.path;await this.load();const i=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,s=[];for(const e of t){const t=a+\"/\"+e+\"/attachments\";s.push(r(t,i))}return Promise.all(s).then((e=>t.map(((t,r)=>({parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}))))).then((e=>R(e,a)))}return this.queryTask.executeAttachmentQuery(e,i)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...null==e?void 0:e.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:s}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:i(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:t}));e=s}this.sourceJSON=this._patchServiceJSON(e);const s=e.type;if(!O.has(s))throw new a(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}_patchServiceJSON(e){var t;if(\"Table\"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){const t=g(e.geometryType).renderer;d(\"drawingInfo.renderer\",t,e)}return\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),e}_serializeFeature(e){const{geometry:t,attributes:r}=e;return l(t)?{attributes:r}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:r}}async _serializeAttachment(e){const{feature:t,attachment:r}=e,{globalId:s,name:a,contentType:i,data:o,uploadId:n}=r,u={globalId:s,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(o){const e=await _(o);u.contentType=e.mediaType,u.data=e.data,o instanceof File&&(u.name=o.name)}return a&&(u.name=a),i&&(u.contentType=i),u}_getFeatureIds(e,t){const r=e[0];return r?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):\"objectId\"in r?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map((e=>e.attributes&&e.attributes[t]))}_canUseGlobalIds(e,t){return e&&\"globalId\"in t[0]}_getObjectIdsFromFeatureIdentifier(e){return e.map((e=>e.objectId))}_getGlobalIdsFromFeatureIdentifier(e){return e.map((e=>e.globalId))}_createEditsResult(e){var t;const r=e.data,{layerId:s}=this.layer,a=[];let i=null;if(Array.isArray(r))for(const u of r)a.push({id:u.id,editedFeatures:u.editedFeatures}),u.id===s&&(i={addResults:u.addResults,updateResults:u.updateResults,deleteResults:u.deleteResults,attachments:u.attachments,editMoment:u.editMoment});else i=r;const o=null==(t=i)?void 0:t.attachments,n={addFeatureResults:i.addResults?i.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:i.updateResults?i.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:i.deleteResults?i.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:o&&o.addResults?o.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:o&&o.updateResults?o.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:o&&o.deleteResults?o.deleteResults.map(this._createFeatureEditResult,this):[]};if(i.editMoment&&(n.editMoment=i.editMoment),a.length>0){n.editedFeatureResults=[];for(const e of a){const{adds:t,updates:r,deletes:s,spatialReference:a}=e.editedFeatures,i=a?new q(a):null;n.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:(null==t?void 0:t.map((e=>this._createEditedFeature(e,i))))||[],updates:(null==r?void 0:r.map((e=>({original:this._createEditedFeature(e[0],i),current:this._createEditedFeature(e[1],i)}))))||[],deletes:(null==s?void 0:s.map((e=>this._createEditedFeature(e,i))))||[],spatialReference:i}})}}return n}_createEditedFeature(e,r){return new t({attributes:e.attributes,geometry:f({...e.geometry,spatialReference:r})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new a(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const r=t.details.messages&&t.details.messages[0]||t.message,s=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new a(\"feature-layer-source:attachment-failure\",r,{code:s})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const s in t){const e=t[s];null!=e&&(r.set?r.set(s,e):r.append(s,e))}return r}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:r,dynamicDataSource:s}=this.layer;return{...e,query:{gdbVersion:r,layer:s?JSON.stringify({source:s}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}};e([p()],S.prototype,\"type\",void 0),e([p({constructOnly:!0})],S.prototype,\"layer\",void 0),e([p({readOnly:!0})],S.prototype,\"queryTask\",null),S=e([y(\"esri.layers.graphics.sources.FeatureLayerSource\")],S);var E=S;export{E as default};\n"],"names":["I","o","originalAndCurrentFeatures","none","O","Set","S","n","constructor","arguments","this","type","refresh","c","async","e2","t2","load","r2","sourceJSON","editingInfo","lastEditDate","hasUpdates","updates","_fetchService","s2","extent","u","signal","addResolvingPromise","layer","Promise","resolve","capabilities","query","supportsFormatPBF","parsedUrl","t","dynamicDataSource","infoFor3D","s","gdbVersion","a2","spatialReference","o2","fieldsIndex","n2","u2","i","l","b","url","path","format","sourceSpatialReference","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","e3","r","body","_createFeatureEditResult","data","addAttachmentResult","_createAttachmentErrorResult","attachmentId","updateAttachmentResult","addFeatures","map","_serializeFeature","updateFeatures","_getFeatureIds","deleteFeatures","globalIdUsed","deleteAttachments","addAttachments","push","_serializeAttachment","updateAttachments","length","adds","deletes","d2","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","attachments","toJSON","returnServiceEditsInSourceSR","join","method","h2","p","_createEditsResult","attachmentIds","deleteAttachmentResults","fetchRecomputedExtents","then","t3","__spreadProps","returnUpdates","fullExtent","l2","timeExtent","m","fromJSON","start","end","a","get","objectIds","s3","t4","all","parentObjectId","attachmentInfos","R","queryTask","executeAttachmentQuery","execute","_createRequestQueryOptions","executeJSON","executeForIds","executeForCount","executeForExtent","executeRelationshipQuery","executeRelationshipQueryForCount","executeTopFeaturesQuery","executeForTopIds","executeForTopExtents","executeForTopCount","__spreadValues","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","_patchServiceJSON","has","geometryType","drawingInfo","renderer","defaultSymbol","g","geometry","t$1","feature","attachment","globalId","name","contentType","uploadId","parentGlobalId","globalIdField","h","FileReader","readAsDataURL","onload","result","onerror","_","mediaType","File","_canUseGlobalIds","_getGlobalIdsFromFeatureIdentifier","_getObjectIdsFromFeatureIdentifier","_getIdsFromFeatures","objectId","Array","isArray","editedFeatures","addResults","updateResults","deleteResults","editMoment","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","r3","a3","i2","q","_createEditedFeature","e4","original","current","f","success","error","code","description","details","messages","message","httpStatus","messageCode","FormData","elements","set","append","source","responseType","e","prototype","constructOnly","readOnly","y","E"],"mappings":"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"}