{"version":3,"file":"statsWorker.649f0a3a.js","sources":["../../node_modules/@arcgis/core/smartMapping/statistics/support/statsWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isFinite as e}from\"../../../core/mathUtils.js\";import a from\"../../../geometry/SpatialReference.js\";import{isNullCountSupported as i,calculateStringStatistics as t,calculateStatistics as n,processStatsResult as o,getNormalizedValue as l}from\"./utils.js\";import{loadArcade as r}from\"../../../support/arcadeOnDemand.js\";let s=null;async function u(e){const{attribute:a,featuresJSON:l}=e,{normalizationType:r,normalizationField:s,minValue:u,maxValue:c,fieldType:p}=a,f=await m({field:a.field,valueExpression:a.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams},l),d=i({normalizationType:r,normalizationField:s,minValue:u,maxValue:c}),v=\"string\"===p?t({values:f,supportsNullCount:d}):n({values:f,minValue:u,maxValue:c,useSampleStdDev:!r,supportsNullCount:d});return o(v,\"date\"===p)}async function m(i,t){if(!t)return[];const n=i.field,o=i.valueExpression,u=i.normalizationType,m=i.normalizationField,c=i.normalizationTotal,p=[],f=i.viewInfoParams;let d=null,v=null;if(o){if(!s){const{arcadeUtils:e}=await r();s=e}d=s.createFunction(o),v=f&&s.getViewInfo({viewingMode:f.viewingMode,scale:f.scale,spatialReference:new a(f.spatialReference)})}return t.forEach((a=>{const i=a.attributes;let t;if(o){const e=s.createExecContext(a,v);t=s.executeFunction(d,e)}else i&&(t=i[n]);if(u&&e(t)){const e=i&&parseFloat(i[m]);t=l(t,u,e,c)}p.push(t)})),p}export{m as getDataValues,u as summaryStatistics};\n"],"names":["s","async","e2","attribute","a2","featuresJSON","l","normalizationType","r","normalizationField","s2","minValue","u2","maxValue","c","fieldType","p","f","m","field","valueExpression","normalizationTotal","viewInfoParams","d","i","v","t","values","supportsNullCount","n","useSampleStdDev","o","i2","o2","m2","arcadeUtils","createFunction","getViewInfo","viewingMode","scale","spatialReference","a","forEach","i3","attributes","t2","createExecContext","executeFunction","e","parseFloat","push"],"mappings":"wHAIqU,IAAIA,EAAE,KAAKC,iBAAiBC,SAASC,UAAUC,EAAEC,aAAaC,GAAGJ,GAAGK,kBAAkBC,EAAEC,mBAAmBC,EAAEC,SAASC,EAAEC,SAASC,EAAEC,UAAUC,GAAGZ,EAAEa,QAAQC,EAAE,CAACC,MAAMf,EAAEe,MAAMC,gBAAgBhB,EAAEgB,gBAAgBb,kBAAkBC,EAAEC,mBAAmBC,EAAEW,mBAAmBjB,EAAEiB,mBAAmBC,eAAelB,EAAEkB,gBAAgBhB,GAAGiB,EAAEC,EAAE,CAACjB,kBAAkBC,EAAEC,mBAAmBC,EAAEC,SAASC,EAAEC,SAASC,IAAIW,EAAE,WAAAT,EAAaU,EAAE,CAACC,OAAOV,EAAEW,kBAAkBL,IAAIM,EAAE,CAACF,OAAOV,EAAEN,SAASC,EAAEC,SAASC,EAAEgB,iBAAiBtB,EAAEoB,kBAAkBL,WAAWQ,EAAEN,EAAE,SAAST,GAAGf,iBAAiB+B,EAAEN,OAAOA,QAAQ,SAASG,EAAEG,EAAEb,MAAMc,EAAED,EAAEZ,gBAAgBR,EAAEoB,EAAEzB,kBAAkB2B,EAAEF,EAAEvB,mBAAmBK,EAAEkB,EAAEX,mBAAmBL,EAAE,GAAGC,EAAEe,EAAEV,mBAAmBC,EAAE,KAAKE,EAAE,QAAQQ,EAAE,KAAKjC,EAAE,OAAOmC,YAAYjC,SAASM,MAAMN,IAAIF,EAAEoC,eAAeH,GAAGR,EAAER,GAAGjB,EAAEqC,YAAY,CAACC,YAAYrB,EAAEqB,YAAYC,MAAMtB,EAAEsB,MAAMC,iBAAiB,IAAIC,EAAExB,EAAEuB,2BAA2Bd,EAAEgB,mBAAmBC,EAAEvC,EAAEwC,eAAeC,KAAKZ,EAAE,OAAO/B,EAAEF,EAAE8C,kBAAkB1C,EAAEqB,KAAKzB,EAAE+C,gBAAgBxB,EAAErB,cAAcyC,EAAEd,OAAOjB,GAAGoC,EAAEH,GAAG,OAAO3C,EAAEyC,GAAGM,WAAWN,EAAET,MAAM5B,EAAEuC,EAAEjC,EAAEV,EAAEY,KAAKoC,KAAKL,MAAM7B"}