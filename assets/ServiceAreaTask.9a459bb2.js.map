{"version":3,"file":"ServiceAreaTask.9a459bb2.js","sources":["../../node_modules/@arcgis/core/rest/support/ServiceAreaSolveResult.js","../../node_modules/@arcgis/core/rest/serviceArea.js","../../node_modules/@arcgis/core/tasks/ServiceAreaTask.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import e from\"../../Graphic.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{filterNones as t,isSome as s,unwrap as i}from\"../../core/maybe.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as a}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"../../geometry/SpatialReference.js\";import y from\"./NAMessage.js\";import c from\"../../geometry/Point.js\";import m from\"../../geometry/Polyline.js\";import u from\"../../geometry/Polygon.js\";import{fromJSON as f}from\"../../geometry/support/jsonUtils.js\";function g(r){return r.features.map((o=>{const t=n.fromJSON(r.spatialReference),s=e.fromJSON(o);return i(s.geometry).spatialReference=t,s}))}function d(r){return t(r.features.map((e=>(s(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),f(e.geometry)))))}let P=class extends o{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return d(r)}readPointBarriers(r,e){return d(e.barriers)}readPolylineBarriers(r){return d(r)}readPolygonBarriers(r){return d(r)}readIncidents(r,e){return g(e.saPolylines)}readServiceAreaPolygons(r,e){return g(e.saPolygons)}};r([p({type:[c]})],P.prototype,\"facilities\",void 0),r([a(\"facilities\")],P.prototype,\"readFacilities\",null),r([p({type:[y]})],P.prototype,\"messages\",void 0),r([p({type:[c]})],P.prototype,\"pointBarriers\",void 0),r([a(\"pointBarriers\",[\"barriers\"])],P.prototype,\"readPointBarriers\",null),r([p({type:[m]})],P.prototype,\"polylineBarriers\",void 0),r([a(\"polylineBarriers\")],P.prototype,\"readPolylineBarriers\",null),r([p({type:[u]})],P.prototype,\"polygonBarriers\",void 0),r([a(\"polygonBarriers\")],P.prototype,\"readPolygonBarriers\",null),r([p({type:[e]})],P.prototype,\"serviceAreaPolylines\",void 0),r([a(\"serviceAreaPolylines\",[\"saPolylines\"])],P.prototype,\"readIncidents\",null),r([p({type:[e]})],P.prototype,\"serviceAreaPolygons\",void 0),r([a(\"serviceAreaPolygons\",[\"saPolygons\"])],P.prototype,\"readServiceAreaPolygons\",null),P=r([l(\"esri.rest.support.ServiceAreaSolveResult\")],P);var j=P;export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport r from\"../request.js\";import{createQueryParamsHelper as e}from\"../core/queryUtils.js\";import{normalizeCentralMeridian as t}from\"../geometry/support/normalizeUtils.js\";import{collectGeometries as i,isInputGeometryZAware as a,fetchServiceDescription as s,dropZValuesOffInputGeometry as o}from\"./networkService.js\";import{parseUrl as n}from\"./utils.js\";import u from\"./support/ServiceAreaSolveResult.js\";const l=e({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:\"outSR\",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},travelMode:!0});async function f(e,f,p){const c=[],m=[],y={},B={},g=n(e),{path:S}=g;f.facilities&&f.facilities.features&&i(f.facilities.features,m,\"facilities.features\",y),f.pointBarriers&&f.pointBarriers.features&&i(f.pointBarriers.features,m,\"pointBarriers.features\",y),f.polylineBarriers&&f.polylineBarriers.features&&i(f.polylineBarriers.features,m,\"polylineBarriers.features\",y),f.polygonBarriers&&f.polygonBarriers.features&&i(f.polygonBarriers.features,m,\"polygonBarriers.features\",y);const j=await t(m);for(const r in y){const e=y[r];c.push(r),B[r]=j.slice(e[0],e[1])}if(a(B,c)){let r=null;try{r=await s(S,f.apiKey,p)}catch{}r&&!r.hasZ&&o(B,c)}for(const r in B)B[r].forEach(((e,t)=>{f.get(r)[t].geometry=e}));const b={...p,query:{...g.query,...l.toQueryParams(f),f:\"json\"}},{data:v}=await r(`${S}/solveServiceArea`,b);return u.fromJSON(v)}export{f as solve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import{solve as e}from\"../rest/serviceArea.js\";import t from\"./Task.js\";let p=class extends t{constructor(r){super(r),this.url=null}solve(r,s){return e(this.url,r,s)}};r([s()],p.prototype,\"url\",void 0),p=r([o(\"esri.tasks.ServiceAreaTask\")],p);var c=p;export{c as default};\n"],"names":["r2","features","map","t","n","fromJSON","spatialReference","s","e","o2","i","geometry","r","e2","f","P","o","constructor","this","facilities","messages","pointBarriers","polylineBarriers","polygonBarriers","serviceAreaPolylines","serviceAreaPolygons","readFacilities","d","readPointBarriers","barriers","readPolylineBarriers","readPolygonBarriers","readIncidents","g","saPolylines","readServiceAreaPolygons","saPolygons","p","type","c","prototype","a","y","m","u","l","j","accumulateAttributes","name","attributeParameterValues","defaultBreaks","outSpatialReference","getter","wkid","restrictionAttributes","returnPointBarriers","travelMode","url","solve","async","f2","p2","c2","m2","y2","B","g2","path","S","e3","push","slice","apiKey","hasZ","forEach","get","b2","__spreadProps","query","toQueryParams","data","v"],"mappings":"0rBAI8zB,WAAWA,UAAUA,EAAEC,SAASC,eAAeC,EAAEC,EAAEC,SAASL,EAAEM,kBAAkBC,EAAEC,EAAEH,SAASI,UAAUC,EAAEH,EAAEI,UAAUL,iBAAiBH,EAAEI,KAAK,WAAWK,UAAUT,EAAES,EAAEX,SAASC,WAAWW,EAAEF,cAAcA,SAASL,iBAAiBM,EAAEN,kBAAkBQ,EAAED,EAAEF,cAAc,IAAII,EAAE,cAAcC,EAAEC,YAAYjB,SAASA,GAAGkB,KAAKC,WAAW,KAAKD,KAAKE,SAAS,KAAKF,KAAKG,cAAc,KAAKH,KAAKI,iBAAiB,KAAKJ,KAAKK,gBAAgB,KAAKL,KAAKM,qBAAqB,KAAKN,KAAKO,oBAAoB,KAAKC,eAAe1B,UAAU2B,EAAE3B,GAAG4B,kBAAkB5B,EAAEa,UAAUc,EAAEd,EAAEgB,UAAUC,qBAAqB9B,UAAU2B,EAAE3B,GAAG+B,oBAAoB/B,UAAU2B,EAAE3B,GAAGgC,cAAchC,EAAEa,UAAUoB,EAAEpB,EAAEqB,aAAaC,wBAAwBnC,EAAEa,UAAUoB,EAAEpB,EAAEuB,cAAcxB,EAAE,CAACyB,EAAE,CAACC,KAAK,CAACC,MAAMxB,EAAEyB,UAAU,kBAAa,GAAQ5B,EAAE,CAAC6B,EAAE,eAAe1B,EAAEyB,UAAU,iBAAiB,MAAM5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAACI,MAAM3B,EAAEyB,UAAU,gBAAW,GAAQ5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAACC,MAAMxB,EAAEyB,UAAU,qBAAgB,GAAQ5B,EAAE,CAAC6B,EAAE,gBAAgB,CAAC,cAAc1B,EAAEyB,UAAU,oBAAoB,MAAM5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAACK,MAAM5B,EAAEyB,UAAU,wBAAmB,GAAQ5B,EAAE,CAAC6B,EAAE,qBAAqB1B,EAAEyB,UAAU,uBAAuB,MAAM5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAACM,MAAM7B,EAAEyB,UAAU,uBAAkB,GAAQ5B,EAAE,CAAC6B,EAAE,oBAAoB1B,EAAEyB,UAAU,sBAAsB,MAAM5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAAC9B,MAAMO,EAAEyB,UAAU,4BAAuB,GAAQ5B,EAAE,CAAC6B,EAAE,uBAAuB,CAAC,iBAAiB1B,EAAEyB,UAAU,gBAAgB,MAAM5B,EAAE,CAACyB,EAAE,CAACC,KAAK,CAAC9B,MAAMO,EAAEyB,UAAU,2BAAsB,GAAQ5B,EAAE,CAAC6B,EAAE,sBAAsB,CAAC,gBAAgB1B,EAAEyB,UAAU,0BAA0B,MAAMzB,EAAEH,EAAE,CAACiC,EAAE,6CAA6C9B,GAAG,IAAI+B,EAAE/B,ECAh/D,MAAM8B,EAAErC,EAAE,CAACuC,qBAAqB,CAACC,KAAK,4BAA4BC,0BAAyB,EAAGC,eAAc,EAAG/B,YAAW,EAAGgC,oBAAoB,CAACH,KAAK,QAAQI,UAAUpD,EAAEmD,oBAAoBE,MAAMhC,cAAc,CAAC2B,KAAK,YAAY1B,kBAAiB,EAAGC,iBAAgB,EAAG+B,sBAAsB,CAACN,KAAK,6BAA6BO,oBAAoB,CAACP,KAAK,kBAAkBQ,YAAW,ICA9a,IAAInB,EAAE,cAAclC,EAAEc,YAAYjB,SAASA,GAAGkB,KAAKuC,IAAI,KAAKC,MAAM1D,EAAEO,UDA+WoD,eAAiB9C,EAAE+C,EAAEC,SAASC,EAAE,GAAGC,EAAE,GAAGC,EAAE,GAAGC,EAAE,GAAGC,EAAE9D,EAAES,IAAIsD,KAAKC,GAAGF,IAAI/C,YAAYyC,EAAEzC,WAAWlB,UAAUS,EAAEkD,EAAEzC,WAAWlB,SAAS8D,EAAE,sBAAsBC,GAAGJ,EAAEvC,eAAeuC,EAAEvC,cAAcpB,UAAUS,EAAEkD,EAAEvC,cAAcpB,SAAS8D,EAAE,yBAAyBC,GAAGJ,EAAEtC,kBAAkBsC,EAAEtC,iBAAiBrB,UAAUS,EAAEkD,EAAEtC,iBAAiBrB,SAAS8D,EAAE,4BAA4BC,GAAGJ,EAAErC,iBAAiBqC,EAAErC,gBAAgBtB,UAAUS,EAAEkD,EAAErC,gBAAgBtB,SAAS8D,EAAE,2BAA2BC,SAASlB,QAAQ3C,EAAE4D,aAAa/D,KAAKgE,EAAE,OAAOK,EAAEL,EAAEhE,KAAKsE,KAAKtE,GAAGiE,EAAEjE,GAAG8C,EAAEyB,MAAMF,EAAE,GAAGA,EAAE,OAAO5B,EAAEwB,EAAEH,GAAG,KAAK9D,EAAE,iBAAiBO,EAAE6D,EAAER,EAAEY,OAAOX,cAAc7D,EAAEyE,MAAMzD,EAAEiD,EAAEH,aAAa9D,KAAKiE,IAAIjE,GAAG0E,SAAS,CAACL,EAAElE,OAAOwE,IAAI3E,GAAGG,GAAGQ,SAAS0D,WAAWO,EAAEC,OAAIhB,GAAJ,CAAMiB,MAAMD,SAAIX,EAAEY,OAASjC,EAAEkC,cAAcnB,IAA/B,CAAkC9C,EAAE,YAAUkE,KAAKC,SAASrE,EAAE,GAAGwD,qBAAqBQ,UAAUhC,EAAEvC,SAAS4E,GCAjqCzE,CAAEU,KAAKuC,IAAIzD,EAAEO,KAAKK,EAAE,CAACL,KAAK8B,EAAEG,UAAU,WAAM,GAAQH,EAAEzB,EAAE,CAACI,EAAE,+BAA+BqB,GAAM,IAACE,EAAEF"}