{"version":3,"file":"LineOfSightLayerView3D.0c6d31cd.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightAnalysis.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightRayIntersector.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightResult.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightController.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightConfiguration.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightLayerViewData.js","../../node_modules/@arcgis/core/views/3d/layers/analysis/LineOfSight/LineOfSightView.js","../../node_modules/@arcgis/core/views/3d/layers/LineOfSightLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import o from\"../../../../../core/Accessor.js\";import{property as e}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as r}from\"../../../../../chunks/vec3f64.js\";let i=class extends o{constructor(t){super(t),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:r(),observerSurfaceNormal:null,target:r(),targetSurfaceNormal:null,observerAdjusted:r(),targetAdjusted:r()},this.computationResult={start:r(),end:r(),intersection:r(),isValid:!1,isTargetVisible:!1},this.result=null}updateComputationResults(){this.notifyChange(\"computationResult\")}updateInputPoints(){this.notifyChange(\"inputPoints\")}onElevationChange(){this.notifyChange(\"elevationAlignedTargetLocation\")}};t([e()],i.prototype,\"target\",void 0),t([e()],i.prototype,\"elevationAlignedTargetLocation\",void 0),t([e()],i.prototype,\"inputPoints\",void 0),t([e()],i.prototype,\"computationResult\",void 0),t([e()],i.prototype,\"result\",void 0),i=t([s(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightAnalysis\")],i);export{i as LineOfSightAnalysis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{isNone as r,isSome as s}from\"../../../../../core/maybe.js\";import{screenPointObjectToArray as o}from\"../../../../../core/screenUtils.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{g as a,d as c,a as p,n as m,b as l}from\"../../../../../chunks/vec3.js\";import{c as d}from\"../../../../../chunks/vec3f64.js\";import{create as u,copy as h,fromPoints as y}from\"../../../../../geometry/support/ray.js\";import{sv2d as f}from\"../../../../../geometry/support/vectorStacks.js\";import{getObjectId as g}from\"../../../../../layers/graphics/dehydratedFeatures.js\";import{fromScreen as v}from\"../../../support/geometryUtils/ray.js\";import{tilesAreRelated as j}from\"../../../terrain/tileUtils.js\";import{Intersector as w}from\"../../../webgl-engine/lib/Intersector.js\";import{toGraphic as I}from\"../../../webgl-engine/lib/intersectorUtilsConversions.js\";let b=class extends t{constructor(e){super(e)}initialize(){this.intersector=new w(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=0}getScreenPointIntersection(e){const t=o(e,f.get()),r=v(this.view.state.camera,t,C);return this._getRayIntersection(r)}_getRayIntersection(e){if(r(e))return null;this.view.sceneIntersectionHelper.intersectToolIntersectorRay(e,this.intersector);const t=this.intersector.results.min,o=R;if(!t||!t.getIntersectionPoint(o))return null;const i=this.view.renderCoordsHelper.fromRenderCoords(o,this.view.spatialReference),n=d();a(n,t.normal);const m=c(n,e.direction)>0?-1:1;p(n,n,m);const l=I(t,this.view);if(s(l)){const r=l.layer,s=l.sourceLayer;let o;if(s)switch(s.type){case\"scene\":o=g(l,s.objectIdField);break;case\"integrated-mesh\":{const e=t.target;o=`${e.metadata.nodeIndex}/${e.metadata.componentIndex}`;break}default:o=l.uid}else o=l.uid;return{type:\"Graphic\",id:`${r.uid}/${o}`,ray:h(e),normal:n,point:i}}if(\"TerrainRenderer\"===t.intersector){return{type:\"Terrain\",id:t.target.metadata.tile.lij.slice(),ray:h(e),normal:n,point:i}}return null}_canUpdateFromIntersectionResult(e,t){if(r(e)||!t||e.type!==t.type)return!1;switch(e.type){case\"Terrain\":{const r=e.id,s=t.id;return r[0]===s[0]&&r[1]===s[1]&&r[2]===s[2]||j(r,s)}case\"Graphic\":case\"I3S\":return e.id===t.id}}updateFromIntersectionResult(e){let t;if(\"Terrain\"===e.type&&s(e.point)){const r=R,s=S,o=T;this.view.renderCoordsHelper.toRenderCoords(e.point,s),this.view.renderCoordsHelper.worldUpAtPosition(s,o);const i=this.view.basemapTerrain.elevationBounds,n=this.view.renderCoordsHelper.getAltitude(s),a=i?Math.abs(i.max-i.min)/Math.abs(n):100,c=n>0?1:-1;m(o,o),p(o,o,c*a),l(r,s,o),y(r,s,C),t=this._getRayIntersection(C)}else t=this._getRayIntersection(e.ray);return this._canUpdateFromIntersectionResult(t,e)?t.point:null}};e([i()],b.prototype,\"view\",void 0),e([i()],b.prototype,\"intersector\",void 0),b=e([n(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightRayIntersector\")],b);const R=d(),S=d(),T=d(),C=u();export{b as LineOfSightRayIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends e{constructor(o){super(o),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null}};o([t()],s.prototype,\"target\",void 0),o([t()],s.prototype,\"intersectedGraphic\",void 0),o([t()],s.prototype,\"intersectedLocation\",void 0),o([t()],s.prototype,\"elevationAlignedTargetLocation\",void 0),o([t()],s.prototype,\"visible\",void 0),s=o([r(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightResult\")],s);export{s as LineOfSightResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../geometry.js\";import t from\"../../../../../core/Accessor.js\";import s from\"../../../../../core/Evented.js\";import r from\"../../../../../core/Handles.js\";import{handlesGroup as n,makeHandle as i}from\"../../../../../core/handleUtils.js\";import{isSome as o,isNone as a,unwrapOr as l,abortMaybe as c,removeMaybe as h,none as p}from\"../../../../../core/maybe.js\";import{createTask as g,ignoreAbortErrors as u}from\"../../../../../core/promiseUtils.js\";import{property as d}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as y}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as m,reaction as _}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{g as v,f,n as A,a as b,b as T,j as C,w as O}from\"../../../../../chunks/vec3.js\";import{a as E,c as w}from\"../../../../../chunks/vec3f64.js\";import{projectBoundingRect as j}from\"../../../../../geometry/projection.js\";import{containsPointObject as I,empty as S}from\"../../../../../geometry/support/aaBoundingRect.js\";import{fromPoints as L,create as P}from\"../../../../../geometry/support/ray.js\";import{LineOfSightAnalysis as R}from\"./LineOfSightAnalysis.js\";import{LineOfSightRayIntersector as V}from\"./LineOfSightRayIntersector.js\";import{LineOfSightResult as D}from\"./LineOfSightResult.js\";import{getElevationAtPoint as H}from\"../../../support/ElevationProvider.js\";import{toGraphic as x}from\"../../../webgl-engine/lib/intersectorUtilsConversions.js\";import{ImmediateTask as N,TaskPriority as k}from\"../../../../support/Scheduler.js\";import F from\"../../../../../geometry/Point.js\";let z=class extends(s.EventedMixin(t)){constructor(e){super(e),this._tasks=N,this._handles=new r,this._analysisHandles=new r}initialize(){var e;const t=null==(e=this.view.resourceController)?void 0:e.scheduler;t&&(this._tasks=t.registerTask(k.LINE_OF_SIGHT_TOOL));this._handles.add([this._connectObserver(),this._connectAnalyses(),this._connectTargets()]),this._intersector=new V({view:this.view})}destroy(){this._handles.destroy(),this._analysisHandles.destroy(),this._analyses.removeAll()}get updating(){return this._tasks.updating}get priority(){return this._tasks.priority}set priority(e){this._tasks.priority=e}get _analyses(){return this.layerViewData.analyses}get _observerEngineLocation(){return this.layerViewData.observerEngineLocation}set _observerEngineLocation(e){this.layerViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._observerEngineLocation)}getLineOfSightComputationDependencies(e){const{inputPoints:t}=e;return{inputPoints:t}}computeAnalysis(e){const{analysis:t}=e,{inputPoints:s,computationResult:r}=t,{observerAdjusted:n,targetAdjusted:i}=s,{start:o,end:a}=r;v(o,n),v(a,i);this._canComputeAnalysis(t)?this._computeAnalysisIntersection(e):this._interpolateAnalysisIntersection(e),t.updateComputationResults(),this.emit(\"result-changed\",{target:e.analysis.target,result:t.result})}_adjustStartEndPositions(e){const t=this._screenPixelSize,s=this.view,{inputPoints:r}=e,{observer:n,observerSurfaceNormal:i,target:a,targetSurfaceNormal:l,observerAdjusted:c,targetAdjusted:h}=r,p=U;o(i)?v(p,i):f(p,a,n);const g=t;A(p,p),b(p,p,Math.min(g,1)),T(c,n,p),o(l)?v(p,l):f(p,n,a);const u=s.state.camera.computeScreenPixelSizeAt(a);A(p,p),b(p,p,Math.min(u,1)),T(h,a,p)}_computeAnalysisIntersection({analysis:e,interpolationInfo:t}){const{view:s}=this,{sceneIntersectionHelper:r,renderCoordsHelper:n}=s;if(a(r))return;const i=this._intersector.intersector,{computationResult:l,inputPoints:c}=e,{observer:h,target:p}=c,{start:g,end:u}=l,d=L(g,u,B);r.intersectToolIntersectorRay(d,i);const y=l.intersection,m=U,_=!!i.results.min&&i.results.min.getIntersectionPoint(y);let f=!0;if(_){v(t.originalIntersection,y),v(t.originalObserver,g),v(t.originalTarget,u),n.fromRenderCoords(y,m,s.spatialReference);const e=1-C(u,p)/C(g,p);f=C(h,y)>=e*C(h,p)}const A=new F(m,s.spatialReference);{const{result:t,target:r}=e;o(t)?(t.target=r,t.intersectedGraphic=f?null:x(i.results.min,s),t.intersectedLocation=f?null:A,t.visible=!!_&&f):e.result=new D({target:r,elevationAlignedTargetLocation:e.elevationAlignedTargetLocation,intersectedGraphic:f?null:x(i.results.min,s),intersectedLocation:f?null:A,visible:!!_&&f})}l.isValid=c.isValid=!0,l.isTargetVisible=f}_interpolateAnalysisIntersection({analysis:e,interpolationInfo:t}){const{computationResult:s,inputPoints:r}=e,{start:n,end:i,intersection:o}=s,{originalIntersection:a,originalObserver:l,originalTarget:c}=t;if(v(o,a),r.isValid){const e=U,t=C(l,a)/C(l,c);O(e,n,l),b(e,e,1-t),T(o,o,e),O(e,i,c),b(e,e,t),T(o,o,e),s.isValid=!0}else e.result=new D,s.isValid=!1,s.isTargetVisible=!1}_canComputeAnalysis(e){const t=this.layerViewData.elevationAlignedObserver,s=this.view.frustum;if(a(t)||a(e.target)||a(s))return!1;const{observerAdjusted:r,targetAdjusted:n}=e.inputPoints,i=s.intersectsPoint(r),o=s.intersectsPoint(n);return i&&o}_onObserverChange(e){if(a(e))return this.layer.targets.removeAll(),void(this.layerViewData.elevationAlignedObserver=null);this.layerViewData.elevationAlignedObserver=this._applyElevationAlignment(e,this.layer.intersection);const t=w();this.view.renderCoordsHelper.toRenderCoords(this.layerViewData.elevationAlignedObserver,t),this._observerEngineLocation=t,this.priority=k.LINE_OF_SIGHT_TOOL_INTERACTIVE}_applyElevationAlignment(e,t){if(e.hasZ&&(a(t)||\"Graphic\"===t.type))return e;const s=e.clone();return s.z=l(H(this.view.elevationProvider,s),0),s}_onObserverChangeForAnalysis(e){e.inputPoints.isValid=!1}_onObserverEngineForAnalysis(e,t,s){const{inputPoints:r}=e;if(v(r.observer,t),o(s)){const e=this._intersector.updateFromIntersectionResult(s);o(e)&&this.view.renderCoordsHelper.toRenderCoords(e,r.observer),r.observerSurfaceNormal=E(s.normal)}else r.observerSurfaceNormal=null;this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=k.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetLocationChange(e,t,s){const{inputPoints:r}=e;if(r.isValid=!1,o(t)){if(e.elevationAlignedTargetLocation=this._applyElevationAlignment(t,s),this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,r.target),o(s)){const e=this._intersector.updateFromIntersectionResult(s);o(e)&&this.view.renderCoordsHelper.toRenderCoords(e,r.target),r.targetSurfaceNormal=E(s.normal)}else r.targetSurfaceNormal=null;this._adjustStartEndPositions(e),e.updateInputPoints()}this.priority=k.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectAnalysisToTarget(e){return m((()=>({analysis:e,targetLocation:e.target.location,targetIntersection:e.target.intersection})),(({analysis:e,targetLocation:t,targetIntersection:s})=>{o(t)&&this._onTargetLocationChange(e,t,s)}))}_connectAnalysisToObserver(e){return m((()=>({analysis:e,observer:this.layerViewData.elevationAlignedObserver})),(({analysis:e})=>{this._onObserverChangeForAnalysis(e)}))}_connectAnalysisToObserverEngine(e){return m((()=>({analysis:e,observer:this._observerEngineLocation,observerIntersection:this.layer.intersection})),(({analysis:e,observer:t,observerIntersection:s})=>{this._onObserverEngineForAnalysis(e,t,s)}))}_connectAnalysisToCamera(e){return _((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:t})=>{e.inputPoints.isValid&&!t||e.updateInputPoints()}))}_connectAnalysisToElevation(e){return this.view.elevationProvider.on(\"elevation-change\",(t=>{if(!this._canComputeAnalysis(e))return;const s=this.layer.observer;G(t.extent,t.spatialReference,s)&&this._onObserverChange(s);const r=e.target;o(r)&&G(t.extent,t.spatialReference,r.location)&&e.onElevationChange()}))}_connectAnalysisForCompute(e){let t=p;const s={analysis:e,interpolationInfo:{originalIntersection:w(),originalObserver:w(),originalTarget:w()}};return n([m((()=>this.getLineOfSightComputationDependencies(e)),(()=>{t=c(t),t=g((async e=>{await u(this._tasks.schedule((()=>this.computeAnalysis(s)),e))}))})),i((()=>t=c(t)))])}_connectAnalysis(e){const t=this._analysisHandles;t.has(e)||t.add([this._connectAnalysisToTarget(e),this._connectAnalysisToObserver(e),this._connectAnalysisToObserverEngine(e),this._connectAnalysisToCamera(e),this._connectAnalysisToElevation(e),this._connectAnalysisForCompute(e)])}_disconnectAnalysis(e){this._analysisHandles.remove(e)}_onAnalysesCollectionChange(e){e.added.forEach((e=>this._connectAnalysis(e))),e.removed.forEach((e=>this._disconnectAnalysis(e)))}_onTargetsChange(e){return this._analyses.removeAll(),e.items.length>0&&e.forEach((e=>this._addTarget(e))),e.on(\"change\",(e=>this._onTargetCollectionChange(e)))}_onTargetCollectionChange(e){e.added.forEach((e=>this._addTarget(e))),e.removed.forEach((e=>this._removeTarget(e)))}_onCursorTargetChange(e,t){o(t)&&this._removeTarget(t),o(e)&&this._addTarget(e)}_addTarget(e){const t=this._analyses;t.some((t=>t.target===e))||t.add(new R({target:e}))}_removeTarget(e){const t=this._analyses,s=t.find((t=>t.target===e));t.remove(s)}_connectObserver(){return n([m((()=>this.layer.observer),(e=>this._onObserverChange(e)))])}_connectAnalyses(){let e=null;return n([m((()=>this._analyses),(t=>{e=h(e),e=t.on(\"change\",(e=>this._onAnalysesCollectionChange(e))),t.forEach((e=>this._connectAnalysis(e)))})),i((()=>e=h(e)))])}_connectTargets(){let e=null;return n([m((()=>this.layer.targets),(t=>{e=h(e),e=this._onTargetsChange(t)})),m((()=>this.layerViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)})),i((()=>{e=h(e)}))])}get _isCameraDirty(){const e=this.layerViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:s}=t;if(a(e)||a(s))return!1;const r=U;s.toRenderCoords(e,r);const n=t.state.camera.computeScreenPixelSizeAt(r);return Math.abs((n-this._screenPixelSize)/this._screenPixelSize)>M}};function G(e,t,s){return!a(s)&&(j(e,t,Z,s.spatialReference),I(Z,s))}e([d({constructOnly:!0})],z.prototype,\"layer\",void 0),e([d({constructOnly:!0})],z.prototype,\"layerViewData\",void 0),e([d({constructOnly:!0})],z.prototype,\"view\",void 0),e([d()],z.prototype,\"updating\",null),e([d()],z.prototype,\"priority\",null),e([d()],z.prototype,\"_analyses\",null),e([d()],z.prototype,\"_observerEngineLocation\",null),e([d()],z.prototype,\"_screenPixelSize\",null),e([d()],z.prototype,\"_tasks\",void 0),e([d()],z.prototype,\"_isCameraDirty\",null),z=e([y(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightController\")],z);const M=.1,U=w(),B=P(),Z=S();export{z as LineOfSightController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../Color.js\";import r from\"../../../../../core/Accessor.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as i}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new e([3,252,111,1]),this.visibleOuterColor=new e([3,252,111,.15]),this.occludedInnerColor=new e([252,3,69,1]),this.occludedOuterColor=new e([252,3,69,.1]),this.undefinedInnerColor=new e([255,255,255,1]),this.undefinedOuterColor=new e([127,127,127,.2])}};o([t({type:Number})],s.prototype,\"innerWidth\",void 0),o([t({type:Number})],s.prototype,\"outerWidth\",void 0),o([t({type:e})],s.prototype,\"visibleInnerColor\",void 0),o([t({type:e})],s.prototype,\"visibleOuterColor\",void 0),o([t({type:e})],s.prototype,\"occludedInnerColor\",void 0),o([t({type:e})],s.prototype,\"occludedOuterColor\",void 0),o([t({type:e})],s.prototype,\"undefinedInnerColor\",void 0),o([t({type:e})],s.prototype,\"undefinedOuterColor\",void 0),s=o([i(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightConfiguration\")],s);export{s as LineOfSightConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Accessor.js\";import e from\"../../../../../core/Collection.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as i}from\"../../../../../chunks/vec3f64.js\";import{LineOfSightConfiguration as c}from\"./LineOfSightConfiguration.js\";let n=class extends r{constructor(){super(...arguments),this.analyses=new e,this.elevationAlignedObserver=null,this.configuration=new c,this.observerEngineLocation=i(),this.cursorTarget=null}};o([s()],n.prototype,\"analyses\",void 0),o([s()],n.prototype,\"elevationAlignedObserver\",void 0),o([s({type:c})],n.prototype,\"configuration\",void 0),o([s()],n.prototype,\"observerEngineLocation\",void 0),o([s()],n.prototype,\"cursorTarget\",void 0),n=o([t(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightLayerViewData\")],n);export{n as LineOfSightLayerViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import i from\"../../../../../Color.js\";import t from\"../../../../../core/Accessor.js\";import o from\"../../../../../core/Handles.js\";import{makeHandle as n,handlesGroup as s}from\"../../../../../core/handleUtils.js\";import{applyOpacity as l}from\"../../../../../core/mathUtils.js\";import{removeMaybe as r,destroyMaybe as a}from\"../../../../../core/maybe.js\";import{property as c}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as u}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as d,reaction as m}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{c as h}from\"../../../../../chunks/mat4f64.js\";import{f as p}from\"../../../../../chunks/vec3.js\";import{d as y,c as f}from\"../../../../../chunks/vec3f64.js\";import{LineVisualElement as v}from\"../../../interactive/visualElements/LineVisualElement.js\";let V=class extends t{constructor(e){super(e),this._handle=null,this._analysisHandles=new o}initialize(){this._handle=this._connectAnalyses()}destroy(){this._handle=r(this._handle),this._analysisHandles=a(this._analysisHandles)}get visible(){return this.layerView.visible&&!this.layerView.suspended}get _analyses(){return this.layerView.layerViewData.analyses}get _configuration(){return this.layerView.layerViewData.configuration}get _opacity(){return this.layerView.fullOpacity}createLineOfSightVisualization(){const e=this._configuration,t=this._opacity,o={view:this.view,attached:!0,width:e.outerWidth,innerWidth:e.innerWidth},n=i.toUnitRGBA(e.visibleOuterColor);l(n,n,t);const s=i.toUnitRGBA(e.visibleInnerColor);l(s,s,t);const r=i.toUnitRGBA(e.occludedOuterColor);l(r,r,t);const a=i.toUnitRGBA(e.occludedInnerColor);l(a,a,t);const c=i.toUnitRGBA(e.undefinedOuterColor);l(c,c,t);const u=i.toUnitRGBA(e.undefinedInnerColor);l(u,u,t);return{visibleLineVisualElement:new v({...o,color:n,innerColor:s}),occludedLineVisualElement:new v({...o,color:r,innerColor:a}),undefinedLineVisualElement:new v({...o,color:c,innerColor:u})}}destroyLineOfSightVisualization(e){e.visibleLineVisualElement=a(e.visibleLineVisualElement),e.occludedLineVisualElement=a(e.occludedLineVisualElement),e.undefinedLineVisualElement=a(e.undefinedLineVisualElement)}updateLineOfSightVisualization(e,t){const o=this.visible,n=this._configuration,{computationResult:s,inputPoints:r}=e,{start:a,end:c,intersection:u,isValid:d,isTargetVisible:m}=s,{observer:h}=r,f=C;f[12]=h[0],f[13]=h[1],f[14]=h[2];const v=p(g,a,h),V=p(_,c,h),L=p(b,u,h),{visibleLineVisualElement:O,occludedLineVisualElement:A,undefinedLineVisualElement:E}=t;if(!o)return O.visible=!1,A.visible=!1,void(E.visible=!1);if(O.visible=!0,A.visible=!0,E.visible=!0,O.geometry=null,A.geometry=null,E.geometry=null,d)if(m){O.geometry=[[y(v),y(V)]],O.transform=f;const e=i.toUnitRGBA(n.visibleOuterColor);O.color=l(e,e,this._opacity)}else{O.geometry=[[y(v),y(L)]],O.transform=f;const e=i.toUnitRGBA(n.occludedOuterColor);O.color=l(e,e,this._opacity),A.geometry=[[y(L),y(V)]],A.transform=f}else E.geometry=[[y(v),y(V)]],E.transform=f}updateVisualizationOpacity(e,t){const o=this._configuration,n=this._opacity,s=i.toUnitRGBA(o.visibleOuterColor);l(s,s,n);const r=i.toUnitRGBA(o.visibleInnerColor);l(r,r,n);const a=i.toUnitRGBA(o.occludedOuterColor);l(a,a,n);const c=i.toUnitRGBA(o.occludedInnerColor);l(c,c,n);const u=i.toUnitRGBA(o.undefinedOuterColor);l(u,u,n);const d=i.toUnitRGBA(o.undefinedInnerColor);l(d,d,n),t.visibleLineVisualElement.color=e.computationResult.isTargetVisible?s:a,t.visibleLineVisualElement.innerColor=r,t.occludedLineVisualElement.color=a,t.occludedLineVisualElement.innerColor=c,t.undefinedLineVisualElement.color=u,t.undefinedLineVisualElement.innerColor=d}getLineOfSightVisualizationDependencies(e){const{computationResult:i}=e,{occludedOuterColor:t,visibleOuterColor:o}=this._configuration;return{computationResult:i,occludedOuterColor:t,visibleOuterColor:o,visible:this.visible}}_connectAnalysis(e){const i=this._analysisHandles;if(i.has(e))return;const t=this.createLineOfSightVisualization();i.add([d((()=>this.getLineOfSightVisualizationDependencies(e)),(()=>this.updateLineOfSightVisualization(e,t))),m((()=>this._opacity),(()=>this.updateVisualizationOpacity(e,t))),n((()=>this.destroyLineOfSightVisualization(t)))],e)}_disconnectAnalysis(e){this._analysisHandles.remove(e)}_connectAnalyses(){let e=null;return s([d((()=>this._analyses),(i=>{e=r(e),e=i.on(\"change\",(e=>this._onAnalysesCollectionChange(e))),this._onAnalysesCollectionChange({target:i,added:i.items,removed:[],moved:[]})})),n((()=>e=r(e)))])}_onAnalysesCollectionChange(e){e.added.forEach((e=>this._connectAnalysis(e))),e.removed.forEach((e=>this._disconnectAnalysis(e)))}};e([c({constructOnly:!0})],V.prototype,\"layer\",void 0),e([c({constructOnly:!0})],V.prototype,\"layerView\",void 0),e([c({constructOnly:!0})],V.prototype,\"view\",void 0),e([c({readOnly:!0})],V.prototype,\"visible\",null),e([c()],V.prototype,\"_analyses\",null),e([c()],V.prototype,\"_configuration\",null),e([c()],V.prototype,\"_opacity\",null),V=e([u(\"esri.views.3d.layers.analysis.LineOfSight.LineOfSightView\")],V);const g=f(),_=f(),b=f(),C=h();export{V as LineOfSightView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{destroyMaybe as e,applySome as t,unwrapOr as s,mapOr as i}from\"../../../core/maybe.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{LineOfSightController as n}from\"./analysis/LineOfSight/LineOfSightController.js\";import{LineOfSightLayerViewData as y}from\"./analysis/LineOfSight/LineOfSightLayerViewData.js\";import{LineOfSightView as p}from\"./analysis/LineOfSight/LineOfSightView.js\";import h from\"../../layers/LayerView.js\";let u=class extends(l(h)){constructor(){super(...arguments),this.type=\"line-of-sight-3d\",this.layerViewData=new y}initialize(){const r=this.view,e=this.layer;this._analysisController=new n({layer:e,layerViewData:this.layerViewData,view:r}),this._analysisView=new p({layer:e,layerView:this,view:r}),this.handles.add([this._analysisController.on(\"result-changed\",(r=>{r.target!==this.layerViewData.cursorTarget&&this.emit(\"result-changed\",r)}))])}destroy(){this._analysisController=e(this._analysisController),this._analysisView=e(this._analysisView)}get results(){return this.layerViewData.analyses.map((r=>r.result))}get priority(){return this._analysisController.priority}set priority(r){this._analysisController.priority=r}getResultForTarget(r){const e=this.layerViewData.analyses.find((e=>e.target===r)),i=t(e,(r=>r.result));return s(i,null)}isUpdating(){return i(this._analysisController,!1,(r=>r.updating))}get testData(){return{view:this._analysisView,controller:this._analysisController}}};r([a({readOnly:!0})],u.prototype,\"type\",void 0),r([a()],u.prototype,\"layer\",void 0),r([a({readOnly:!0})],u.prototype,\"results\",null),r([a()],u.prototype,\"priority\",null),r([a()],u.prototype,\"layerViewData\",void 0),r([a()],u.prototype,\"_analysisController\",void 0),r([a()],u.prototype,\"_analysisView\",void 0),u=r([o(\"esri.views.3d.layers.LineOfSightLayerView3D\")],u);var w=u;export{u as LineOfSightLayerView3D,w as default};\n"],"names":["i","o","constructor","t2","this","elevationAlignedTargetLocation","inputPoints","isValid","observer","r","observerSurfaceNormal","target","targetSurfaceNormal","observerAdjusted","targetAdjusted","computationResult","start","end","intersection","isTargetVisible","result","updateComputationResults","notifyChange","updateInputPoints","onElevationChange","t","e","prototype","s","b","e2","initialize","intersector","w","view","state","viewingMode","options","hud","store","getScreenPointIntersection","f","get","r2","v","camera","C","_getRayIntersection","sceneIntersectionHelper","intersectToolIntersectorRay","results","min","o2","R","getIntersectionPoint","i2","renderCoordsHelper","fromRenderCoords","spatialReference","n2","d","normal","m","c","direction","l2","I","layer","s2","sourceLayer","o3","type","g","objectIdField","e3","metadata","nodeIndex","componentIndex","uid","id","ray","h","point","tile","lij","slice","_canUpdateFromIntersectionResult","j","updateFromIntersectionResult","S","T","toRenderCoords","worldUpAtPosition","basemapTerrain","elevationBounds","getAltitude","a2","Math","abs","max","c2","p","l","y","n","u","intersectedGraphic","intersectedLocation","z","EventedMixin","_tasks","N","_handles","_analysisHandles","resourceController","scheduler","registerTask","k","LINE_OF_SIGHT_TOOL","add","_connectObserver","_connectAnalyses","_connectTargets","_intersector","V","destroy","_analyses","removeAll","updating","priority","layerViewData","analyses","observerEngineLocation","computeScreenPixelSizeAt","_observerEngineLocation","getLineOfSightComputationDependencies","computeAnalysis","analysis","_canComputeAnalysis","_computeAnalysisIntersection","_interpolateAnalysisIntersection","emit","_adjustStartEndPositions","_screenPixelSize","p2","U","g2","u2","interpolationInfo","a","d2","L","B","y2","m2","_2","originalIntersection","originalObserver","originalTarget","A2","F","t3","x","visible","D","O","elevationAlignedObserver","frustum","intersectsPoint","_onObserverChange","targets","_applyElevationAlignment","LINE_OF_SIGHT_TOOL_INTERACTIVE","hasZ","clone","H","elevationProvider","_onObserverChangeForAnalysis","_onObserverEngineForAnalysis","E","_onTargetLocationChange","_connectAnalysisToTarget","targetLocation","location","targetIntersection","_connectAnalysisToObserver","_connectAnalysisToObserverEngine","observerIntersection","_connectAnalysisToCamera","_","isDirty","_isCameraDirty","_connectAnalysisToElevation","on","extent","G","_connectAnalysisForCompute","async","schedule","_connectAnalysis","has","_disconnectAnalysis","remove","_onAnalysesCollectionChange","added","forEach","removed","_onTargetsChange","items","length","_addTarget","_onTargetCollectionChange","_removeTarget","_onCursorTargetChange","some","find","cursorTarget","M","Z","constructOnly","P","innerWidth","outerWidth","visibleInnerColor","visibleOuterColor","occludedInnerColor","occludedOuterColor","undefinedInnerColor","undefinedOuterColor","Number","arguments","configuration","_handle","layerView","suspended","fullOpacity","createLineOfSightVisualization","_configuration","_opacity","attached","width","toUnitRGBA","visibleLineVisualElement","__spreadProps","color","innerColor","occludedLineVisualElement","undefinedLineVisualElement","destroyLineOfSightVisualization","updateLineOfSightVisualization","v2","V2","L2","O2","geometry","transform","updateVisualizationOpacity","getLineOfSightVisualizationDependencies","moved","readOnly","_analysisController","_analysisView","handles","r3","map","getResultForTarget","isUpdating","controller"],"mappings":"g7BAI0c,IAAIA,GAAE,cAAcC,EAAEC,YAAYC,SAASA,GAAGC,KAAKC,+BAA+B,KAAKD,KAAKE,YAAY,CAACC,SAAQ,EAAGC,SAASC,IAAIC,sBAAsB,KAAKC,OAAOF,IAAIG,oBAAoB,KAAKC,iBAAiBJ,IAAIK,eAAeL,KAAKL,KAAKW,kBAAkB,CAACC,MAAMP,IAAIQ,IAAIR,IAAIS,aAAaT,IAAIF,SAAQ,EAAGY,iBAAgB,GAAIf,KAAKgB,OAAO,KAAKC,gCAAgCC,aAAa,qBAAqBC,yBAAyBD,aAAa,eAAeE,yBAAyBF,aAAa,oCAAoCG,EAAE,CAACC,KAAK1B,GAAE2B,UAAU,cAAS,GAAQF,EAAE,CAACC,KAAK1B,GAAE2B,UAAU,sCAAiC,GAAQF,EAAE,CAACC,KAAK1B,GAAE2B,UAAU,mBAAc,GAAQF,EAAE,CAACC,KAAK1B,GAAE2B,UAAU,yBAAoB,GAAQF,EAAE,CAACC,KAAK1B,GAAE2B,UAAU,cAAS,GAAQ3B,GAAEyB,EAAE,CAACG,EAAE,kEAAkE5B,ICA9E,IAAI6B,GAAE,cAAcJ,EAAEvB,YAAY4B,SAASA,GAAGC,kBAAkBC,YAAY,IAAIC,EAAE7B,KAAK8B,KAAKC,MAAMC,aAAahC,KAAK4B,YAAYK,QAAQC,KAAI,EAAGlC,KAAK4B,YAAYK,QAAQE,MAAM,EAAEC,2BAA2BV,SAASL,EAAExB,EAAE6B,EAAEW,EAAEC,OAAOC,EAAEC,EAAExC,KAAK8B,KAAKC,MAAMU,OAAOpB,EAAEqB,WAAU1C,KAAK2C,oBAAoBJ,GAAGI,oBAAoBjB,MAAMrB,EAAEqB,UAAU,UAAUI,KAAKc,wBAAwBC,4BAA4BnB,EAAE1B,KAAK4B,mBAAmB7B,EAAEC,KAAK4B,YAAYkB,QAAQC,IAAIC,EAAEC,OAAMlD,IAAIA,EAAEmD,qBAAqBF,UAAU,WAAWG,EAAEnD,KAAK8B,KAAKsB,mBAAmBC,iBAAiBL,EAAEhD,KAAK8B,KAAKwB,kBAAkBC,EAAEC,MAAMD,EAAExD,EAAE0D,cAAcC,EAAEC,EAAEJ,EAAE7B,EAAEkC,WAAW,KAAK,IAAIL,EAAEA,EAAEG,SAASG,EAAEC,EAAE/D,EAAEC,KAAK8B,SAASN,EAAEqC,GAAG,OAAOtB,EAAEsB,EAAEE,MAAMC,EAAEH,EAAEI,gBAAgBC,KAAKF,SAASA,EAAEG,UAAU,UAAUC,EAAEP,EAAEG,EAAEK,yBAAyB,kBAAkB,OAAOC,EAAEvE,EAAEQ,SAAS,GAAG+D,EAAEC,SAASC,aAAaF,EAAEC,SAASE,iCAAiCZ,EAAEa,WAAWb,EAAEa,UAAU,CAACP,KAAK,UAAUQ,GAAG,GAAGpC,EAAEmC,OAAOR,IAAIU,IAAIC,EAAEnD,GAAG+B,OAAOF,EAAEuB,MAAM3B,SAAM,oBAAoBpD,EAAE6B,YAAmB,CAACuC,KAAK,UAAUQ,GAAG5E,EAAEQ,OAAOgE,SAASQ,KAAKC,IAAIC,QAAQL,IAAIC,EAAEnD,GAAG+B,OAAOF,EAAEuB,MAAM3B,GAAU,KAAK+B,iCAAiCxD,EAAE3B,MAAMM,EAAEqB,KAAK3B,GAAG2B,EAAEyC,OAAOpE,EAAEoE,YAAW,SAAUzC,EAAEyC,UAAU,UAAU,OAAO5B,EAAEb,EAAEiD,GAAGX,EAAEjE,EAAE4E,UAAUpC,EAAE,KAAKyB,EAAE,IAAIzB,EAAE,KAAKyB,EAAE,IAAIzB,EAAE,KAAKyB,EAAE,IAAImB,EAAE5C,EAAEyB,OAAO,cAAc,aAAatC,EAAEiD,KAAK5E,EAAE4E,IAAIS,6BAA6B1D,OAAO3B,KAAK,YAAA2B,EAAcyC,MAAM3C,EAAEE,EAAEoD,OAAO,OAAOvC,EAAEU,GAAEe,EAAEqB,GAAErC,EAAEsC,QAAOxD,KAAKsB,mBAAmBmC,eAAe7D,EAAEoD,MAAMd,GAAGhE,KAAK8B,KAAKsB,mBAAmBoC,kBAAkBxB,EAAEhB,SAASG,EAAEnD,KAAK8B,KAAK2D,eAAeC,gBAAgBnC,EAAEvD,KAAK8B,KAAKsB,mBAAmBuC,YAAY3B,GAAG4B,EAAEzC,EAAE0C,KAAKC,IAAI3C,EAAE4C,IAAI5C,EAAEJ,KAAK8C,KAAKC,IAAIvC,GAAG,IAAIyC,EAAEzC,EAAE,EAAE,OAAOP,EAAEA,GAAGiD,EAAEjD,EAAEA,EAAEgD,EAAEJ,GAAGM,EAAE3D,EAAEyB,EAAEhB,GAAGmD,EAAE5D,EAAEyB,EAAEtB,IAAG3C,EAAEC,KAAK2C,oBAAoBD,WAAU1C,KAAK2C,oBAAoBjB,EAAEkD,YAAY5E,KAAKkF,iCAAiCnF,EAAE2B,GAAG3B,EAAE+E,MAAM,OAAOxD,EAAE,CAAC1B,KAAK6B,GAAEF,UAAU,YAAO,GAAQD,EAAE,CAAC1B,KAAK6B,GAAEF,UAAU,mBAAc,GAAQE,GAAEH,EAAE,CAAC8E,EAAE,kFAAkF3E,IAAG,MAAMwB,GAAEO,IAAI6B,GAAE7B,IAAI8B,GAAE9B,IAAId,GAAE2D,ICA3yF,IAAI7E,GAAE,cAAcF,EAAExB,YAAYkD,SAASA,GAAGhD,KAAKO,OAAO,KAAKP,KAAKsG,mBAAmB,KAAKtG,KAAKuG,oBAAoB,KAAKvG,KAAKC,+BAA+B,OAAOJ,EAAE,CAACwB,KAAKG,GAAED,UAAU,cAAS,GAAQ1B,EAAE,CAACwB,KAAKG,GAAED,UAAU,0BAAqB,GAAQ1B,EAAE,CAACwB,KAAKG,GAAED,UAAU,2BAAsB,GAAQ1B,EAAE,CAACwB,KAAKG,GAAED,UAAU,sCAAiC,GAAQ1B,EAAE,CAACwB,KAAKG,GAAED,UAAU,eAAU,GAAQC,GAAE3B,EAAE,CAACQ,EAAE,gEAAgEmB,ICA06B,IAAIgF,GAAE,cAAchF,EAAEiF,aAAapF,IAAIvB,YAAY4B,SAASA,GAAG1B,KAAK0G,OAAOC,EAAE3G,KAAK4G,SAAS,IAAIvG,EAAEL,KAAK6G,iBAAiB,IAAIxG,EAAEsB,iBAAiBD,QAAQ3B,EAAE,SAASC,KAAK8B,KAAKgF,yBAAoB,EAAOpF,EAAEqF,mBAAmBL,OAAO3G,EAAEiH,aAAaC,EAAEC,0BAA0BN,SAASO,IAAI,CAACnH,KAAKoH,mBAAmBpH,KAAKqH,mBAAmBrH,KAAKsH,oBAAoBtH,KAAKuH,aAAa,IAAIC,GAAE,CAAC1F,KAAK9B,KAAK8B,OAAO2F,eAAeb,SAASa,UAAUzH,KAAK6G,iBAAiBY,UAAUzH,KAAK0H,UAAUC,kCAAkC3H,KAAK0G,OAAOkB,+BAA+B5H,KAAK0G,OAAOmB,sBAAsBnG,QAAQgF,OAAOmB,SAASnG,yBAAyB1B,KAAK8H,cAAcC,8CAA8C/H,KAAK8H,cAAcE,mDAAmDtG,QAAQoG,cAAcE,uBAAuBtG,gCAAgC1B,KAAK8B,KAAKC,MAAMU,OAAOwF,yBAAyBjI,KAAKkI,yBAAyBC,sCAAsCzG,SAASxB,YAAYH,GAAG2B,QAAQ,CAACxB,YAAYH,GAAGqI,gBAAgB1G,SAAS2G,SAAStI,GAAG2B,GAAGxB,YAAY8D,EAAErD,kBAAkBN,GAAGN,GAAGU,iBAAiB8C,EAAE7C,eAAeyC,GAAGa,GAAGpD,MAAMoC,EAAEnC,IAAI+E,GAAGvF,IAAI2C,EAAEO,GAAGf,EAAEoD,EAAEzC,QAAQmF,oBAAoBvI,GAAGC,KAAKuI,6BAA6B7G,GAAG1B,KAAKwI,iCAAiC9G,GAAG3B,EAAEkB,2BAA2BjB,KAAKyI,KAAK,iBAAiB,CAAClI,OAAOmB,EAAE2G,SAAS9H,OAAOS,OAAOjB,EAAEiB,SAAS0H,yBAAyBhH,SAAS3B,EAAEC,KAAK2I,iBAAiB3E,EAAEhE,KAAK8B,MAAM5B,YAAYG,GAAGqB,GAAGtB,SAASmD,EAAEjD,sBAAsB6C,EAAE5C,OAAOqF,EAAEpF,oBAAoBqD,EAAEpD,iBAAiBkD,EAAEjD,eAAemE,GAAGxE,EAAEuI,EAAEC,KAAI1F,GAAGX,EAAEoG,EAAEzF,GAAGd,EAAEuG,EAAEhD,EAAErC,SAASuF,EAAE/I,IAAI6I,EAAEA,GAAGnH,EAAEmH,EAAEA,EAAE/C,KAAK9C,IAAI+F,EAAE,IAAIxD,EAAE3B,EAAEJ,EAAEqF,GAAG/I,EAAEgE,GAAGrB,EAAEoG,EAAE/E,GAAGxB,EAAEuG,EAAErF,EAAEqC,SAASmD,EAAE/E,EAAEjC,MAAMU,OAAOwF,yBAAyBrC,KAAKgD,EAAEA,GAAGnH,EAAEmH,EAAEA,EAAE/C,KAAK9C,IAAIgG,EAAE,IAAIzD,EAAET,EAAEe,EAAEgD,GAAGL,8BAA8BF,SAAS3G,EAAEsH,kBAAkBjJ,UAAU+B,KAAKkC,GAAGhE,MAAM4C,wBAAwBvC,EAAE+C,mBAAmBG,GAAGS,KAAKiF,EAAE5I,gBAAgB8C,EAAEnD,KAAKuH,aAAa3F,aAAajB,kBAAkBkD,EAAE3D,YAAY8F,GAAGtE,GAAGtB,SAASyE,EAAEtE,OAAOqI,GAAG5C,GAAGpF,MAAMkI,EAAEjI,IAAIkI,GAAGlF,EAAEqF,EAAEC,EAAEL,EAAEC,EAAEK,MAAKvG,4BAA4BqG,EAAE/F,SAASkG,EAAExF,EAAE/C,aAAawI,EAAET,GAAEU,IAAIpG,EAAEL,QAAQC,KAAKI,EAAEL,QAAQC,IAAIG,qBAAqBmG,OAAOhH,GAAE,KAAMkH,EAAE,GAAGxJ,EAAEyJ,qBAAqBH,GAAG7G,EAAEzC,EAAE0J,iBAAiBX,GAAGtG,EAAEzC,EAAE2J,eAAeX,GAAGxF,EAAEF,iBAAiBgG,EAAEC,EAAEtF,EAAEV,wBAAwBgB,EAAE,EAAE5B,EAAEqG,EAAEH,GAAGlG,EAAEoG,EAAEF,KAAKlG,EAAEmC,EAAEwE,IAAI/E,EAAE5B,EAAEmC,EAAE+D,SAASe,EAAE,IAAIC,EAAEN,EAAEtF,EAAEV,yBAAyBtC,OAAO6I,EAAEtJ,OAAOgC,GAAGb,IAAImI,MAAMtJ,OAAOgC,EAAEsH,EAAEvD,mBAAmBjE,EAAE,KAAKyH,EAAE3G,EAAEL,QAAQC,IAAIiB,GAAG6F,EAAEtD,oBAAoBlE,EAAE,KAAKsH,EAAEE,EAAEE,UAAUR,GAAGlH,GAAGX,EAAEV,OAAO,IAAIgJ,GAAE,CAACzJ,OAAOgC,EAAEtC,+BAA+ByB,EAAEzB,+BAA+BqG,mBAAmBjE,EAAE,KAAKyH,EAAE3G,EAAEL,QAAQC,IAAIiB,GAAGuC,oBAAoBlE,EAAE,KAAKsH,EAAEI,UAAUR,GAAGlH,MAAMlC,QAAQ6F,EAAE7F,SAAQ,EAAG0D,EAAE9C,gBAAgBsB,EAAEmG,kCAAkCH,SAAS3G,EAAEsH,kBAAkBjJ,UAAUY,kBAAkBqD,EAAE9D,YAAYG,GAAGqB,GAAGd,MAAM2C,EAAE1C,IAAIsC,EAAErC,aAAakC,GAAGgB,GAAGwF,qBAAqB5D,EAAE6D,iBAAiB5F,EAAE6F,eAAe1D,GAAGjG,KAAKyC,EAAEQ,EAAE4C,GAAGvF,EAAEF,QAAQ,OAAOmE,EAAEuE,GAAEgB,EAAEnH,EAAEmB,EAAE+B,GAAGlD,EAAEmB,EAAEmC,KAAK1B,EAAEf,EAAEM,GAAGpC,EAAE6C,EAAEA,EAAE,EAAEuF,GAAGvE,EAAEtC,EAAEA,EAAEsB,GAAG2F,EAAE3F,EAAEnB,EAAE6C,GAAGvE,EAAE6C,EAAEA,EAAEuF,GAAGvE,EAAEtC,EAAEA,EAAEsB,GAAGN,EAAE7D,SAAQ,SAAUa,OAAO,IAAIgJ,GAAEhG,EAAE7D,SAAQ,EAAG6D,EAAEjD,iBAAgB,EAAGuH,oBAAoB5G,SAAS3B,EAAEC,KAAK8H,cAAcoC,yBAAyBlG,EAAEhE,KAAK8B,KAAKqI,WAAWlB,EAAElJ,IAAIkJ,EAAEvH,EAAEnB,SAAS0I,EAAEjF,UAAS,QAASvD,iBAAiB8B,EAAE7B,eAAe6C,GAAG7B,EAAExB,YAAYiD,EAAEa,EAAEoG,gBAAgB7H,GAAGS,EAAEgB,EAAEoG,gBAAgB7G,UAAUJ,GAAGH,EAAEqH,kBAAkB3I,MAAMuH,EAAEvH,UAAU1B,KAAK+D,MAAMuG,QAAQ3C,sBAAsBG,cAAcoC,yBAAyB,WAAWpC,cAAcoC,yBAAyBlK,KAAKuK,yBAAyB7I,EAAE1B,KAAK+D,MAAMjD,oBAAoBf,EAAE8B,SAASC,KAAKsB,mBAAmBmC,eAAevF,KAAK8H,cAAcoC,yBAAyBnK,GAAGC,KAAKkI,wBAAwBnI,EAAEC,KAAK6H,SAASZ,EAAEuD,+BAA+BD,yBAAyB7I,EAAE3B,MAAM2B,EAAE+I,SAAS1K,IAAI,YAAYA,EAAEoE,aAAazC,QAAQsC,EAAEtC,EAAEgJ,eAAe1G,EAAEwC,EAAEN,EAAEyE,EAAE3K,KAAK8B,KAAK8I,kBAAkB5G,GAAG,GAAGA,EAAE6G,6BAA6BnJ,KAAKxB,YAAYC,SAAQ,EAAG2K,6BAA6BpJ,EAAE3B,EAAEiE,SAAS9D,YAAYG,GAAGqB,KAAKc,EAAEnC,EAAED,SAASL,GAAGF,EAAEmE,GAAG,OAAOM,EAAEtE,KAAKuH,aAAanC,6BAA6BpB,KAAKM,IAAItE,KAAK8B,KAAKsB,mBAAmBmC,eAAejB,EAAEjE,EAAED,UAAUC,EAAEC,sBAAsByK,EAAE/G,EAAEP,eAAenD,sBAAsB,UAAUoI,yBAAyBhH,GAAGA,EAAEP,oBAAoBnB,KAAK6H,SAASZ,EAAEuD,+BAA+BQ,wBAAwBtJ,EAAE3B,EAAEiE,SAAS9D,YAAYqC,GAAGb,KAAKa,EAAEpC,SAAQ,EAAGN,EAAEE,GAAG,IAAI2B,EAAEzB,+BAA+BD,KAAKuK,yBAAyBxK,EAAEiE,GAAGhE,KAAK8B,KAAKsB,mBAAmBmC,eAAe7D,EAAEzB,+BAA+BsC,EAAEhC,QAAQV,EAAEmE,GAAG,OAAOM,EAAEtE,KAAKuH,aAAanC,6BAA6BpB,KAAKM,IAAItE,KAAK8B,KAAKsB,mBAAmBmC,eAAejB,EAAE/B,EAAEhC,QAAQgC,EAAE/B,oBAAoBuK,EAAE/G,EAAEP,eAAejD,oBAAoB,UAAUkI,yBAAyBhH,GAAGA,EAAEP,yBAAyB0G,SAASZ,EAAEuD,+BAA+BS,yBAAyBvJ,UAAUgC,GAAG,KAAK,CAAC2E,SAAS3G,EAAEwJ,eAAexJ,EAAEnB,OAAO4K,SAASC,mBAAmB1J,EAAEnB,OAAOO,iBAAiB,EAAEuH,SAAS/D,EAAE4G,eAAenL,EAAEqL,mBAAmBpH,QAAQjE,IAAIC,KAAKgL,wBAAwB1G,EAAEvE,EAAEiE,MAAMqH,2BAA2B3J,UAAUgC,GAAG,KAAK,CAAC2E,SAAS3G,EAAEtB,SAASJ,KAAK8H,cAAcoC,6BAA6B,EAAE7B,SAAS/D,WAAWuG,6BAA6BvG,MAAMgH,iCAAiC5J,UAAUgC,GAAG,KAAK,CAAC2E,SAAS3G,EAAEtB,SAASJ,KAAKkI,wBAAwBqD,qBAAqBvL,KAAK+D,MAAMjD,iBAAiB,EAAEuH,SAAS/D,EAAElE,SAASL,EAAEwL,qBAAqBvH,WAAW8G,6BAA6BxG,EAAEvE,EAAEiE,MAAMwH,yBAAyB9J,UAAU+J,GAAG,KAAK,CAAChJ,OAAOzC,KAAK8B,KAAKC,MAAMU,OAAOiJ,QAAQ1L,KAAK2L,mBAAmB,EAAED,QAAQ3L,QAAQG,YAAYC,UAAUJ,GAAG2B,EAAEP,uBAAuByK,4BAA4BlK,UAAU1B,KAAK8B,KAAK8I,kBAAkBiB,GAAG,4BAA4B7L,KAAKsI,oBAAoB5G,gBAAgBsC,EAAEhE,KAAK+D,MAAM3D,YAAWL,EAAE+L,OAAO/L,EAAEuD,iBAAiBU,IAAIhE,KAAKqK,kBAAkBrG,SAASzB,EAAEb,EAAEnB,SAASgC,IAAIwJ,GAAEhM,EAAE+L,OAAO/L,EAAEuD,iBAAiBf,EAAE4I,WAAWzJ,EAAEN,uBAAuB4K,2BAA2BtK,OAAO3B,EAAEkG,QAAQjC,EAAE,CAACqE,SAAS3G,EAAEsH,kBAAkB,CAACQ,qBAAqB3H,IAAI4H,iBAAiB5H,IAAI6H,eAAe7H,aAAauE,EAAE,CAAC1C,GAAG,IAAI1D,KAAKmI,sCAAsCzG,KAAK,OAAOiC,EAAE5D,GAAGA,EAAEqE,GAAG6H,MAAM3H,UAAU+B,EAAErG,KAAK0G,OAAOwF,UAAU,IAAIlM,KAAKoI,gBAAgBpE,IAAIM,UAAU1E,GAAG,IAAIG,EAAE4D,EAAE5D,OAAOoM,iBAAiBzK,SAAS3B,EAAEC,KAAK6G,mBAAmBuF,IAAI1K,IAAI3B,EAAEoH,IAAI,CAACnH,KAAKiL,yBAAyBvJ,GAAG1B,KAAKqL,2BAA2B3J,GAAG1B,KAAKsL,iCAAiC5J,GAAG1B,KAAKwL,yBAAyB9J,GAAG1B,KAAK4L,4BAA4BlK,GAAG1B,KAAKgM,2BAA2BtK,KAAK2K,oBAAoB3K,QAAQmF,iBAAiByF,OAAO5K,GAAG6K,4BAA4B7K,KAAK8K,MAAMC,YAAYzM,KAAKmM,iBAAiB7H,KAAK5C,EAAEgL,QAAQD,YAAYzM,KAAKqM,oBAAoB/H,KAAKqI,iBAAiBjL,UAAU1B,KAAK0H,UAAUC,YAAYjG,EAAEkL,MAAMC,OAAO,GAAGnL,EAAE+K,YAAYzM,KAAK8M,WAAWxI,KAAK5C,EAAEmK,GAAG,aAAa7L,KAAK+M,0BAA0BzI,KAAKyI,0BAA0BrL,KAAK8K,MAAMC,YAAYzM,KAAK8M,WAAWxI,KAAK5C,EAAEgL,QAAQD,YAAYzM,KAAKgN,cAAc1I,KAAK2I,sBAAsBvL,EAAE3B,KAAKA,IAAIC,KAAKgN,cAAcjN,GAAGF,EAAE6B,IAAI1B,KAAK8M,WAAWpL,GAAGoL,WAAWpL,SAAS3B,EAAEC,KAAK0H,YAAYwF,SAASrD,EAAEtJ,SAASmB,KAAK3B,EAAEoH,IAAI,IAAIlE,GAAE,CAAC1C,OAAOmB,KAAKsL,cAActL,SAAS3B,EAAEC,KAAK0H,UAAU1D,EAAEjE,EAAEoN,SAAStD,EAAEtJ,SAASmB,MAAM4K,OAAOtI,GAAGoD,0BAA0BhB,EAAE,CAAC1C,GAAG,IAAI1D,KAAK+D,MAAM3D,cAAcJ,KAAKqK,kBAAkB3I,OAAO2F,uBAAuB3F,EAAE,YAAY0E,EAAE,CAAC1C,GAAG,IAAI1D,KAAK0H,kBAAkB7C,EAAEnD,GAAGA,EAAE3B,EAAE8L,GAAG,aAAa7L,KAAKuM,4BAA4BjI,KAAKvE,EAAE0M,YAAYzM,KAAKmM,iBAAiB7H,QAAQ1E,GAAG,IAAI8B,EAAEmD,EAAEnD,OAAO4F,sBAAsB5F,EAAE,YAAY0E,EAAE,CAAC1C,GAAG,IAAI1D,KAAK+D,MAAMuG,gBAAgBzF,EAAEnD,GAAGA,EAAE1B,KAAK2M,iBAAiB5M,MAAM2D,GAAG,IAAI1D,KAAK8H,cAAcsF,eAAe,CAAC9I,EAAEvE,UAAUkN,sBAAsB3I,EAAEvE,MAAMH,GAAG,OAAOiF,EAAEnD,mCAAmCA,EAAE1B,KAAK8H,cAAcoC,0BAA0BpI,KAAK/B,GAAGC,MAAMoD,mBAAmBY,GAAGjE,KAAKkJ,EAAEvH,IAAIuH,EAAEjF,UAAS,QAASzB,EAAEsG,KAAItD,eAAe7D,EAAEa,SAASgB,EAAExD,EAAEgC,MAAMU,OAAOwF,yBAAyB1F,UAAUsD,KAAKC,OAAO9F,KAAK2I,kBAAkB3I,KAAK2I,kBAAkB0E,KAAI,YAAW3L,EAAE3B,EAAEiE,UAAUiF,EAAEjF,OAAOtC,EAAE3B,EAAEuN,GAAEtJ,EAAEV,kBAAkBQ,EAAEwJ,GAAEtJ,IAAI1C,EAAE,CAACkC,EAAE,CAAC+J,eAAc,KAAM/G,GAAEjF,UAAU,aAAQ,GAAQD,EAAE,CAACkC,EAAE,CAAC+J,eAAc,KAAM/G,GAAEjF,UAAU,qBAAgB,GAAQD,EAAE,CAACkC,EAAE,CAAC+J,eAAc,KAAM/G,GAAEjF,UAAU,YAAO,GAAQD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,WAAW,MAAMD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,WAAW,MAAMD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,YAAY,MAAMD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,0BAA0B,MAAMD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,mBAAmB,MAAMD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,cAAS,GAAQD,EAAE,CAACkC,KAAKgD,GAAEjF,UAAU,iBAAiB,MAAMiF,GAAElF,EAAE,CAAC6E,EAAE,oEAAoEK,IAAG,MAAM6G,GAAE,GAAGxE,GAAEhH,IAAIuH,GAAEoE,IAAIF,GAAEjI,ICAr2T,IAAI7D,GAAE,cAAcnB,EAAEP,YAAYD,SAASA,GAAGG,KAAKyN,WAAW,EAAEzN,KAAK0N,WAAW,EAAE1N,KAAK2N,kBAAkB,IAAIrM,GAAE,CAAC,EAAE,IAAI,IAAI,IAAItB,KAAK4N,kBAAkB,IAAItM,GAAE,CAAC,EAAE,IAAI,IAAI,MAAMtB,KAAK6N,mBAAmB,IAAIvM,GAAE,CAAC,IAAI,EAAE,GAAG,IAAItB,KAAK8N,mBAAmB,IAAIxM,GAAE,CAAC,IAAI,EAAE,GAAG,KAAKtB,KAAK+N,oBAAoB,IAAIzM,GAAE,CAAC,IAAI,IAAI,IAAI,IAAItB,KAAKgO,oBAAoB,IAAI1M,GAAE,CAAC,IAAI,IAAI,IAAI,OAAOzB,EAAE,CAACwB,EAAE,CAAC8C,KAAK8J,UAAUzM,GAAED,UAAU,kBAAa,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK8J,UAAUzM,GAAED,UAAU,kBAAa,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,yBAAoB,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,yBAAoB,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,0BAAqB,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,0BAAqB,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,2BAAsB,GAAQ1B,EAAE,CAACwB,EAAE,CAAC8C,KAAK7C,MAAKE,GAAED,UAAU,2BAAsB,GAAQC,GAAE3B,EAAE,CAACD,EAAE,uEAAuE4B,ICAhvB,IAAI4E,GAAE,cAAc/F,EAAEP,uBAAuBoO,WAAWlO,KAAK+H,SAAS,IAAIzG,GAAEtB,KAAKkK,yBAAyB,KAAKlK,KAAKmO,cAAc,IAAIxK,GAAE3D,KAAKgI,uBAAuBpI,IAAII,KAAKoN,aAAa,OAAOvN,EAAE,CAAC2B,KAAK4E,GAAE7E,UAAU,gBAAW,GAAQ1B,EAAE,CAAC2B,KAAK4E,GAAE7E,UAAU,gCAA2B,GAAQ1B,EAAE,CAAC2B,EAAE,CAAC2C,KAAKR,MAAKyC,GAAE7E,UAAU,qBAAgB,GAAQ1B,EAAE,CAAC2B,KAAK4E,GAAE7E,UAAU,8BAAyB,GAAQ1B,EAAE,CAAC2B,KAAK4E,GAAE7E,UAAU,oBAAe,GAAQ6E,GAAEvG,EAAE,CAACwB,EAAE,uEAAuE+E,ICA1B,IAAIoB,GAAE,cAAcnG,EAAEvB,YAAY4B,SAASA,GAAG1B,KAAKoO,QAAQ,KAAKpO,KAAK6G,iBAAiB,IAAIhH,EAAE8B,kBAAkByM,QAAQpO,KAAKqH,mBAAmBI,eAAe2G,QAAQ/N,EAAEL,KAAKoO,SAASpO,KAAK6G,iBAAiBoC,GAAEjJ,KAAK6G,uCAAuC7G,KAAKqO,UAAUtE,UAAU/J,KAAKqO,UAAUC,iCAAiCtO,KAAKqO,UAAUvG,cAAcC,qCAAqC/H,KAAKqO,UAAUvG,cAAcqG,oCAAoCnO,KAAKqO,UAAUE,YAAYC,uCAAuC9M,EAAE1B,KAAKyO,eAAe1O,EAAEC,KAAK0O,SAAS7O,EAAE,CAACiC,KAAK9B,KAAK8B,KAAK6M,UAAS,EAAGC,MAAMlN,EAAEgM,WAAWD,WAAW/L,EAAE+L,YAAYlK,EAAE3D,GAAEiP,WAAWnN,EAAEkM,sBAAqBrK,EAAEA,EAAExD,SAASiE,EAAEpE,GAAEiP,WAAWnN,EAAEiM,sBAAqB3J,EAAEA,EAAEjE,SAASwC,EAAE3C,GAAEiP,WAAWnN,EAAEoM,uBAAsBvL,EAAEA,EAAExC,SAAS6F,EAAEhG,GAAEiP,WAAWnN,EAAEmM,uBAAsBjI,EAAEA,EAAE7F,SAASiG,EAAEpG,GAAEiP,WAAWnN,EAAEsM,wBAAuBhI,EAAEA,EAAEjG,SAASgJ,EAAEnJ,GAAEiP,WAAWnN,EAAEqM,+BAAuBhF,EAAEA,EAAEhJ,GAAS,CAAC+O,yBAAyB,IAAItM,GAAEuM,OAAIlP,GAAJ,CAAMmP,MAAMzL,EAAE0L,WAAWjL,KAAIkL,0BAA0B,IAAI1M,GAAEuM,OAAIlP,GAAJ,CAAMmP,MAAMzM,EAAE0M,WAAWrJ,KAAIuJ,2BAA2B,IAAI3M,GAAEuM,OAAIlP,GAAJ,CAAMmP,MAAMhJ,EAAEiJ,WAAWlG,MAAKqG,gCAAgC1N,KAAKoN,yBAAyB7F,GAAEvH,EAAEoN,0BAA0BpN,EAAEwN,0BAA0BjG,GAAEvH,EAAEwN,2BAA2BxN,EAAEyN,2BAA2BlG,GAAEvH,EAAEyN,4BAA4BE,+BAA+B3N,EAAE3B,SAASF,EAAEG,KAAK+J,QAAQxG,EAAEvD,KAAKyO,gBAAgB9N,kBAAkBqD,EAAE9D,YAAYqC,GAAGb,GAAGd,MAAMgF,EAAE/E,IAAI8C,EAAE7C,aAAaiI,EAAE5I,QAAQ+I,EAAEnI,gBAAgBuI,GAAGtF,GAAG5D,SAASyE,GAAGtC,EAAEF,EAAEK,KAAI,IAAImC,EAAE,GAAGxC,EAAE,IAAIwC,EAAE,GAAGxC,EAAE,IAAIwC,EAAE,SAASyK,EAAErJ,EAAE7B,GAAEwB,EAAEf,GAAG0K,EAAEtJ,EAAEwF,GAAE9H,EAAEkB,GAAG2K,EAAEvJ,EAAExE,GAAEsH,EAAElE,IAAIiK,yBAAyBW,EAAEP,0BAA0BvF,EAAEwF,2BAA2BpE,GAAGhL,MAAMF,SAAS4P,EAAE1F,SAAQ,EAAGJ,EAAEI,SAAQ,SAAUA,SAAQ,MAAO0F,EAAE1F,SAAQ,EAAGJ,EAAEI,SAAQ,EAAGgB,EAAEhB,SAAQ,EAAG0F,EAAEC,SAAS,KAAK/F,EAAE+F,SAAS,KAAK3E,EAAE2E,SAAS,KAAKxG,KAAKI,EAAE,GAAGoG,SAAS,CAAC,CAACvJ,GAAEmJ,GAAGnJ,GAAEoJ,KAAKE,EAAEE,UAAUtN,QAAQiC,EAAE1E,GAAEiP,WAAWtL,EAAEqK,qBAAqBoB,MAAM9I,GAAE5B,EAAEA,EAAEtE,KAAK0O,cAAc,GAAGgB,SAAS,CAAC,CAACvJ,GAAEmJ,GAAGnJ,GAAEqJ,KAAKC,EAAEE,UAAUtN,QAAQiC,EAAE1E,GAAEiP,WAAWtL,EAAEuK,sBAAsBkB,MAAM9I,GAAE5B,EAAEA,EAAEtE,KAAK0O,UAAU/E,EAAE+F,SAAS,CAAC,CAACvJ,GAAEqJ,GAAGrJ,GAAEoJ,KAAK5F,EAAEgG,UAAUtN,SAASqN,SAAS,CAAC,CAACvJ,GAAEmJ,GAAGnJ,GAAEoJ,KAAKxE,EAAE4E,UAAUtN,EAAEuN,2BAA2BlO,EAAE3B,SAASF,EAAEG,KAAKyO,eAAelL,EAAEvD,KAAK0O,SAAS1K,EAAEpE,GAAEiP,WAAWhP,EAAE+N,sBAAqB5J,EAAEA,EAAET,SAAShB,EAAE3C,GAAEiP,WAAWhP,EAAE8N,sBAAqBpL,EAAEA,EAAEgB,SAASqC,EAAEhG,GAAEiP,WAAWhP,EAAEiO,uBAAsBlI,EAAEA,EAAErC,SAASyC,EAAEpG,GAAEiP,WAAWhP,EAAEgO,uBAAsB7H,EAAEA,EAAEzC,SAASwF,EAAEnJ,GAAEiP,WAAWhP,EAAEmO,wBAAuBjF,EAAEA,EAAExF,SAAS2F,EAAEtJ,GAAEiP,WAAWhP,EAAEkO,wBAAuB7E,EAAEA,EAAE3F,GAAGxD,EAAE+O,yBAAyBE,MAAMtN,EAAEf,kBAAkBI,gBAAgBiD,EAAE4B,EAAE7F,EAAE+O,yBAAyBG,WAAW1M,EAAExC,EAAEmP,0BAA0BF,MAAMpJ,EAAE7F,EAAEmP,0BAA0BD,WAAWjJ,EAAEjG,EAAEoP,2BAA2BH,MAAMjG,EAAEhJ,EAAEoP,2BAA2BF,WAAW/F,EAAE2G,wCAAwCnO,SAASf,kBAAkBwC,GAAGzB,GAAGoM,mBAAmB/N,EAAE6N,kBAAkB5K,GAAGhD,KAAKyO,qBAAqB,CAAC9N,kBAAkBwC,EAAE2K,mBAAmB/N,EAAE6N,kBAAkB5K,EAAE+G,QAAQ/J,KAAK+J,SAASoC,iBAAiBzK,SAASyB,EAAEnD,KAAK6G,oBAAoB1D,EAAEiJ,IAAI1K,gBAAgB3B,EAAEC,KAAKwO,mCAAmCrH,IAAI,CAAC3D,GAAG,IAAIxD,KAAK6P,wCAAwCnO,KAAK,IAAI1B,KAAKqP,+BAA+B3N,EAAE3B,KAAK2D,GAAG,IAAI1D,KAAK0O,WAAW,IAAI1O,KAAK4P,2BAA2BlO,EAAE3B,KAAKqG,GAAG,IAAIpG,KAAKoP,gCAAgCrP,MAAM2B,GAAG2K,oBAAoB3K,QAAQmF,iBAAiByF,OAAO5K,GAAG2F,uBAAuB3F,EAAE,YAAYF,EAAE,CAACgC,GAAG,IAAIxD,KAAK0H,kBAAkBrH,EAAEqB,GAAGA,EAAEyB,EAAE0I,GAAG,aAAa7L,KAAKuM,4BAA4BjI,KAAKtE,KAAKuM,4BAA4B,CAAChM,OAAO4C,EAAEqJ,MAAMrJ,EAAEyJ,MAAMF,QAAQ,GAAGoD,MAAM,QAAQ1J,GAAG,IAAI1E,EAAErB,EAAEqB,OAAO6K,4BAA4B7K,KAAK8K,MAAMC,YAAYzM,KAAKmM,iBAAiB7H,KAAK5C,EAAEgL,QAAQD,YAAYzM,KAAKqM,oBAAoB/H,OAAOhD,EAAE,CAACqC,EAAE,CAAC4J,eAAc,KAAM/F,GAAEjG,UAAU,aAAQ,GAAQD,EAAE,CAACqC,EAAE,CAAC4J,eAAc,KAAM/F,GAAEjG,UAAU,iBAAY,GAAQD,EAAE,CAACqC,EAAE,CAAC4J,eAAc,KAAM/F,GAAEjG,UAAU,YAAO,GAAQD,EAAE,CAACqC,EAAE,CAACoM,UAAS,KAAMvI,GAAEjG,UAAU,UAAU,MAAMD,EAAE,CAACqC,KAAK6D,GAAEjG,UAAU,YAAY,MAAMD,EAAE,CAACqC,KAAK6D,GAAEjG,UAAU,iBAAiB,MAAMD,EAAE,CAACqC,KAAK6D,GAAEjG,UAAU,WAAW,MAAMiG,GAAElG,EAAE,CAAC+E,EAAE,8DAA8DmB,IAAG,MAAMpD,GAAE/B,IAAIoJ,GAAEpJ,IAAIZ,GAAEY,IAAIK,GAAEmC,KCAv7I,IAACwB,GAAE,cAAcH,GAAErB,KAAI/E,uBAAuBoO,WAAWlO,KAAKmE,KAAK,mBAAmBnE,KAAK8H,cAAc,IAAI3B,GAAExE,mBAAmBY,EAAEvC,KAAK8B,KAAKJ,EAAE1B,KAAK+D,WAAWiM,oBAAoB,IAAI5J,GAAE,CAACrC,MAAMrC,EAAEoG,cAAc9H,KAAK8H,cAAchG,KAAKS,IAAIvC,KAAKiQ,cAAc,IAAIhK,GAAE,CAAClC,MAAMrC,EAAE2M,UAAUrO,KAAK8B,KAAKS,IAAIvC,KAAKkQ,QAAQ/I,IAAI,CAACnH,KAAKgQ,oBAAoBnE,GAAG,wBAAwBtL,SAASP,KAAK8H,cAAcsF,cAAcpN,KAAKyI,KAAK,iBAAiB0H,QAAQ1I,eAAeuI,oBAAoB1O,GAAEtB,KAAKgQ,qBAAqBhQ,KAAKiQ,cAAc3O,GAAEtB,KAAKiQ,oCAAoCjQ,KAAK8H,cAAcC,SAASqI,QAAQ7N,EAAEvB,+BAA+BhB,KAAKgQ,oBAAoBnI,sBAAsBtF,QAAQyN,oBAAoBnI,SAAStF,EAAE8N,mBAAmB9N,SAASb,EAAE1B,KAAK8H,cAAcC,SAASoF,SAAS7I,EAAE/D,SAASgC,IAAIY,EAAE9B,GAAEK,MAAMyO,EAAEnP,gBAAgBQ,EAAE2B,EAAE,MAAMmN,oBAAoB1Q,GAAEI,KAAKgQ,qBAAoB,MAAOzN,EAAEqF,gCAAgC,CAAC9F,KAAK9B,KAAKiQ,cAAcM,WAAWvQ,KAAKgQ,uBAAuB3P,EAAE,CAAC4I,EAAE,CAAC8G,UAAS,KAAM1J,GAAE9E,UAAU,YAAO,GAAQlB,EAAE,CAAC4I,KAAK5C,GAAE9E,UAAU,aAAQ,GAAQlB,EAAE,CAAC4I,EAAE,CAAC8G,UAAS,KAAM1J,GAAE9E,UAAU,UAAU,MAAMlB,EAAE,CAAC4I,KAAK5C,GAAE9E,UAAU,WAAW,MAAMlB,EAAE,CAAC4I,KAAK5C,GAAE9E,UAAU,qBAAgB,GAAQlB,EAAE,CAAC4I,KAAK5C,GAAE9E,UAAU,2BAAsB,GAAQlB,EAAE,CAAC4I,KAAK5C,GAAE9E,UAAU,qBAAgB,GAAQ8E,GAAEhG,EAAE,CAACR,EAAE,gDAAgDwG,IAAM,IAACxE,GAAEwE"}