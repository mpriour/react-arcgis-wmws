{"version":3,"file":"I3SIndexInfo.27dc4373.js","sources":["../../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";import{isSome as r}from\"../../core/maybe.js\";async function n(n,t,s,a,i,d){let l=null;if(r(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:\"page\",rootPage:(await e(t,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(f){r(i)&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",t,f),l=f}}if(!t)return null;const p=`${n}/nodes/`,c=p+(t&&t.split(\"/\").pop());try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,urlPrefix:p}}catch(f){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:f,url:c})}}export{n as fetchIndexInfo};\n"],"names":["async","n2","t","s","a","i","d","l","r","o","t2","Math","floor","rootIndex","nodesPerPage","type","rootPage","e","query","f","token","responseType","signal","data","pageSize","lodMetric","lodSelectionMetricType","urlPrefix","warn","p","c","split","pop","rootNode","pageError","nodeError","url"],"mappings":"uDAIgHA,iBAAiBC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,OAAOC,EAAE,QAAQC,EAAEL,GAAG,OAAOM,EAAE,GAAGR,eAAeS,EAAED,EAAEE,KAAKC,MAAMT,EAAEU,UAAUV,EAAEW,wBAAwB,CAACC,KAAK,OAAOC,gBAAgBC,EAAEP,EAAE,CAACQ,MAAM,CAACC,EAAE,OAAOC,MAAMhB,GAAGiB,aAAa,OAAOC,OAAOhB,KAAKiB,KAAKV,UAAUV,EAAEU,UAAUW,SAASrB,EAAEW,aAAaW,UAAUtB,EAAEuB,uBAAuBC,UAAUlB,SAASU,KAAKd,IAAIA,EAAEuB,KAAK,oBAAoB,iEAAiElB,EAAES,GAAGZ,EAAEY,OAAOjB,SAAS,WAAW2B,EAAE,GAAG5B,WAAW6B,EAAED,MAAM3B,EAAE6B,MAAM,KAAKC,iBAAiB,CAACjB,KAAK,OAAOkB,gBAAgBhB,EAAEa,EAAE,CAACZ,MAAM,CAACC,EAAE,OAAOC,MAAMhB,GAAGiB,aAAa,OAAOC,OAAOhB,KAAKiB,KAAKI,UAAUE,SAASV,SAAS,IAAIV,EAAE,iCAAiC,qBAAqB,CAACyB,UAAU3B,EAAE4B,UAAUhB,EAAEiB,IAAIN"}