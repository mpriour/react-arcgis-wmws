{"version":3,"file":"ImageryLayerView2D.397fda43.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryGraphicsView2D.js","../../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js","../../node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import r from\"../../../../request.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Logger.js\";import{isSome as a}from\"../../../../core/maybe.js\";import{debounce as o,isAbortError as n}from\"../../../../core/promiseUtils.js\";import{createScreenPoint as p}from\"../../../../core/screenUtils.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{enumeration as h}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../../geometry/Extent.js\";import{projectExtent as u}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{snapImageToSymbolTile as d}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import y from\"../../../../support/GraphicsCollection.js\";import{Container as g}from\"../../engine/Container.js\";import x from\"../graphics/GraphicContainer.js\";import f from\"../graphics/GraphicsView2D.js\";const _=s.getLogger(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\");let w=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new g,this.updateRequested=!1,this._graphicsView=null,this._projectFullExtentPromise=null,this._dataParameters={exportParametersVersion:0,extents:[],tileResolution:0,time:\"\"},this.type=\"Graphics\",this._graphics=new y,this._updateGraphics=o((async(e,t)=>{if(!e.stationary)return;const r=e.state,i=new m({xmin:r.extent.xmin,ymin:r.extent.ymin,xmax:r.extent.xmax,ymax:r.extent.ymax,spatialReference:r.spatialReference}),[s,o]=e.state.size,n={};n.timeExtent=this.timeExtent,n.requestAsImageElement=!1,n.signal=t,null==this._projectFullExtentPromise&&(this._projectFullExtentPromise=this._getProjectedFullExtent(i.spatialReference));const p=\"vector-field\"===this.layer.renderer.type?this.layer.renderer.symbolTileSize:50,c=await this._projectFullExtentPromise,{extent:h,resolution:l,width:u,height:y}=d(i,s,o,p,c),g=await this.layer.fetchImage(h,u,y,n),x=this.layer.renderer;if(\"vector-field\"===x.type){const t=g.pixelData.pixelBlock,r=x.sizeVariables[0];!a(t)||r.minDataValue&&r.maxDataValue||(r.minDataValue=t.statistics[0].minValue,r.maxDataValue=t.statistics[0].maxValue),this._pixelData={extent:h,pixelBlock:t};const i=h.clone().normalize(),s={exportParametersVersion:this.layer.exportImageServiceParameters.version,extents:i,tileResolution:l,time:JSON.stringify(this.timeExtent||\"\")},o=this._canReuseVectorFieldData(s)?this._dataParameters.extents:[],n=await x.getGraphicsFromPixelData(g.pixelData,\"vector-uv\"===this.layer.rasterInfo.dataType,o);if(o.length){const e=this._graphics.items.filter((e=>a(e.geometry)&&o.some((t=>t.intersects(e.geometry)))&&!i.some((t=>t.intersects(e.geometry)))));this._graphics.removeMany(e),this._graphics.addMany(n)}else this._graphics.set(\"items\",n);this._graphicsView.update(e),this._dataParameters=s}}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this._updateGraphics(e).catch((e=>{n(e)||_.error(e)}))}hitTest(e,r){const i=this.view.toMap(p(e,r));return Promise.resolve(new t({attributes:{},geometry:i,layer:this.layer}))}attach(){this._graphicsView=new f({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new x(this.view.featuresTilingScheme)}),this.attached=!0}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}install(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}async _getProjectedFullExtent(e){try{return await u(this.layer.fullExtent,e)}catch(t){try{const t=(await r(this.layer.url,{query:{option:\"footprints\",outSR:e.wkid||JSON.stringify(e.toJSON()),f:\"json\"}})).data.featureCollection.layers[0].layerDefinition.extent;return t?m.fromJSON(t):null}catch{return null}}}_canReuseVectorFieldData(e){const t=this._dataParameters.exportParametersVersion===e.exportParametersVersion,r=this._dataParameters.time===e.time,i=Math.abs(this._dataParameters.tileResolution-e.tileResolution)/e.tileResolution<.01,s=this._dataParameters.extents.some((t=>e.extents.some((e=>t.intersects(e)))));return t&&r&&i&&s}};e([c()],w.prototype,\"attached\",void 0),e([c()],w.prototype,\"container\",void 0),e([c()],w.prototype,\"layer\",void 0),e([c()],w.prototype,\"timeExtent\",void 0),e([c()],w.prototype,\"view\",void 0),e([c()],w.prototype,\"updateRequested\",void 0),e([c()],w.prototype,\"updating\",null),e([h({graphics:\"Graphics\"})],w.prototype,\"type\",void 0),w=e([l(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\")],w);var j=w;export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import r from\"../../../../core/Accessor.js\";import i from\"../../../../core/Logger.js\";import{isSome as s}from\"../../../../core/maybe.js\";import{isAbortError as o}from\"../../../../core/promiseUtils.js\";import{createScreenPoint as a}from\"../../../../core/screenUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{enumeration as p}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mosaicPixelData as c}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{BitmapContainer as h}from\"../../engine/BitmapContainer.js\";import{Container as m}from\"../../engine/Container.js\";import d from\"../../engine/ImageryBitmapSource.js\";import u from\"../support/ExportStrategy.js\";const g=i.getLogger(\"esri.views.2d.layers.imagery.ImageryView2D\");let y=class extends r{constructor(){super(...arguments),this.attached=!1,this.container=new m,this.updateRequested=!1,this.type=\"Imagery\",this._bitmapView=null}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(e){this.strategy.update(e).catch((e=>{o(e)||g.error(e)}))}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(e,r){const i=this.view.toMap(a(e,r));return Promise.resolve(new t({attributes:{},geometry:i,layer:this.layer}))}attach(){const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,r=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new h,this.strategy=new u({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:r,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()}),this.attached=!0}install(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}redraw(){this.strategy.updateExports((e=>{e.source instanceof HTMLImageElement?e.requestRender():this.layer.applyRenderer({pixelBlock:e.source.pixelBlock}).then((t=>{const r=e.source;r.pixelBlock=t.pixelBlock,r.filter=e=>this.layer.applyFilter(e),this.container.requestRender()}))}))}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.bitmaps;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,r=e.map((e=>e.source)).filter((e=>e.extent&&e.extent.intersects(t))).map((e=>({extent:e.extent,pixelBlock:e.originalPixelBlock}))),i=c(r,t);return s(i)?{extent:i.extent,pixelBlock:i.pixelBlock}:null}return null}_fetchImage(e,t,r,i){return(i=i||{}).timeExtent=this.timeExtent,i.requestAsImageElement=!0,this.layer.fetchImage(e,t,r,i).then((e=>e.imageElement?e.imageElement:this.layer.applyRenderer(e.pixelData,{signal:i.signal}).then((t=>{const r=new d(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return r.filter=e=>this.layer.applyFilter(e),r}))))}};e([n()],y.prototype,\"attached\",void 0),e([n()],y.prototype,\"container\",void 0),e([n()],y.prototype,\"layer\",void 0),e([n()],y.prototype,\"strategy\",void 0),e([n()],y.prototype,\"timeExtent\",void 0),e([n()],y.prototype,\"view\",void 0),e([n()],y.prototype,\"updateRequested\",void 0),e([n()],y.prototype,\"updating\",null),e([p({imagery:\"Imagery\"})],y.prototype,\"type\",void 0),y=e([l(\"esri.views.2d.layers.imagery.ImageryView2D\")],y);var x=y;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{init as t,watch as s}from\"../../../core/watchUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as a}from\"./LayerView2D.js\";import o from\"./imagery/ImageryGraphicsView2D.js\";import h from\"./imagery/ImageryView2D.js\";import{ImageryLayerView as n}from\"../../layers/ImageryLayerView.js\";import l from\"../../layers/LayerView.js\";import{RefreshableLayerView as u}from\"../../layers/RefreshableLayerView.js\";let p=class extends(n(u(a(l)))){constructor(){super(...arguments),this._exportImageVersion=-1}initialize(){this.handles.add([t(this,[\"layer.blendMode\",\"layer.effects\"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0),t(this,[\"layer.effect\"],(e=>{this.subview&&(this.subview.container.effect=e)}),!0)])}get pixelData(){return this.updating?null:this.subview.getPixelData()}get updating(){return!(this.subview&&!this.subview.updating)}hitTest(e,t){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(e,t)}update(e){var t;null==(t=this.subview)||t.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([t(this,\"layer.exportImageServiceParameters.version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),this.watch(\"timeExtent\",(()=>{this.subview.timeExtent=this.timeExtent,this.requestUpdate()})),this.layer.on(\"redraw\",(()=>this.subview.redraw())),s(this.layer,\"renderer\",(()=>this._setSubView()))],\"imagerylayerview-update\")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove(\"imagerylayerview-update\"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||!this.suspended&&this.subview.isUpdating()}_setSubView(){var e;let t=\"Imagery\";var s,i;(\"vector-field\"===(null==(e=this.layer.renderer)?void 0:e.type)&&\"lerc\"===this.layer.format&&(t=\"Graphics\"),this.subview&&this.subview.type===t)||(null==(s=this.subview)||s.uninstall(this.container),null==(i=this.subview)||i.destroy(),this.subview=\"Imagery\"===t?new h({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new o({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode,this.subview.container.effect=this.layer.effect);this.requestUpdate()}};e([i()],p.prototype,\"pixelData\",null),e([i({readOnly:!0})],p.prototype,\"updating\",null),e([i()],p.prototype,\"subview\",void 0),p=e([r(\"esri.views.2d.layers.ImageryLayerView2D\")],p);var d=p;export{d as default};\n"],"names":["_","s","getLogger","w","i","constructor","arguments","this","attached","container","g","updateRequested","_graphicsView","_projectFullExtentPromise","_dataParameters","exportParametersVersion","extents","tileResolution","time","type","_graphics","y","_updateGraphics","o","async","e2","t2","stationary","r2","state","i2","m","xmin","extent","ymin","xmax","ymax","spatialReference","s2","size","n2","timeExtent","requestAsImageElement","signal","_getProjectedFullExtent","p2","layer","renderer","symbolTileSize","c2","h2","resolution","l2","width","u2","height","y2","d","g2","fetchImage","x2","t3","pixelData","pixelBlock","r3","sizeVariables","a","minDataValue","maxDataValue","statistics","minValue","maxValue","_pixelData","i3","clone","normalize","s3","exportImageServiceParameters","version","JSON","stringify","o2","_canReuseVectorFieldData","n3","getGraphicsFromPixelData","rasterInfo","dataType","length","e3","items","filter","e4","geometry","some","t4","intersects","removeMany","addMany","set","update","destroy","detach","isUpdating","catch","error","hitTest","view","toMap","p","Promise","resolve","t","attributes","attach","f","graphics","requestUpdateCallback","requestUpdate","x","featuresTilingScheme","removeChild","install","addChild","uninstall","updating","getPixelData","redraw","u","fullExtent","r","url","query","option","outSR","wkid","toJSON","data","featureCollection","layers","layerDefinition","fromJSON","Math","abs","e","c","prototype","h","l","j","_bitmapView","strategy","removeAllChildren","imageMaxHeight","imageMaxWidth","imageNormalizationSupported","fetchSource","_fetchImage","bind","updateExports","source","HTMLImageElement","requestRender","applyRenderer","then","applyFilter","bitmaps","originalPixelBlock","map","imageElement","n","imagery","_exportImageVersion","initialize","handles","add","subview","blendMode","effect","suspended","increaseRasterJobHandlerUsage","_setSubView","watch","on","decreaseRasterJobHandlerUsage","remove","moveStart","viewChange","moveEnd","format","readOnly"],"mappings":"4pDAIsrC,MAAMA,EAAEC,EAAEC,UAAU,sDAAsD,IAAIC,EAAE,cAAcC,EAAEC,uBAAuBC,WAAWC,KAAKC,UAAS,EAAGD,KAAKE,UAAU,IAAIC,EAAEH,KAAKI,iBAAgB,EAAGJ,KAAKK,cAAc,KAAKL,KAAKM,0BAA0B,KAAKN,KAAKO,gBAAgB,CAACC,wBAAwB,EAAEC,QAAQ,GAAGC,eAAe,EAAEC,KAAK,IAAIX,KAAKY,KAAK,WAAWZ,KAAKa,UAAU,IAAIC,EAAEd,KAAKe,gBAAgBC,GAAGC,MAAMC,EAAEC,SAASD,EAAEE,wBAAwBC,EAAEH,EAAEI,MAAMC,EAAE,IAAIC,EAAE,CAACC,KAAKJ,EAAEK,OAAOD,KAAKE,KAAKN,EAAEK,OAAOC,KAAKC,KAAKP,EAAEK,OAAOE,KAAKC,KAAKR,EAAEK,OAAOG,KAAKC,iBAAiBT,EAAES,oBAAoBC,EAAEf,GAAGE,EAAEI,MAAMU,KAAKC,EAAE,KAAKC,WAAWlC,KAAKkC,WAAWD,EAAEE,uBAAsB,EAAGF,EAAEG,OAAOjB,EAAE,MAAMnB,KAAKM,iCAAiCA,0BAA0BN,KAAKqC,wBAAwBd,EAAEO,yBAAyBQ,EAAE,iBAAAtC,KAAsBuC,MAAMC,SAAS5B,KAAKZ,KAAKuC,MAAMC,SAASC,eAAe,GAAGC,QAAQ1C,KAAKM,2BAA2BoB,OAAOiB,EAAEC,WAAWC,EAAEC,MAAMC,EAAEC,OAAOC,GAAGC,EAAE3B,EAAEQ,EAAEf,EAAEsB,EAAEI,GAAGS,QAAQnD,KAAKuC,MAAMa,WAAWT,EAAEI,EAAEE,EAAEhB,GAAGoB,EAAErD,KAAKuC,MAAMC,YAAY,iBAAiBa,EAAEzC,KAAK,OAAO0C,EAAEH,EAAEI,UAAUC,WAAWC,EAAEJ,EAAEK,cAAc,IAAIC,EAAEL,IAAIG,EAAEG,cAAcH,EAAEI,iBAAiBD,aAAaN,EAAEQ,WAAW,GAAGC,SAASN,EAAEI,aAAaP,EAAEQ,WAAW,GAAGE,UAAUhE,KAAKiE,WAAW,CAACvC,OAAOiB,EAAEa,WAAWF,SAASY,EAAEvB,EAAEwB,QAAQC,YAAYC,EAAE,CAAC7D,wBAAwBR,KAAKuC,MAAM+B,6BAA6BC,QAAQ9D,QAAQyD,EAAExD,eAAemC,EAAElC,KAAK6D,KAAKC,UAAUzE,KAAKkC,YAAY,KAAKwC,EAAE1E,KAAK2E,yBAAyBN,GAAGrE,KAAKO,gBAAgBE,QAAQ,GAAGmE,QAAQvB,EAAEwB,yBAAyB1B,EAAEI,UAAU,cAAcvD,KAAKuC,MAAMuC,WAAWC,SAASL,MAAMA,EAAEM,OAAO,OAAOC,EAAEjF,KAAKa,UAAUqE,MAAMC,WAAWxB,EAAEyB,EAAEC,WAAWX,EAAEY,SAASC,EAAEC,WAAWJ,EAAEC,cAAcnB,EAAEoB,SAASC,EAAEC,WAAWJ,EAAEC,mBAAmBxE,UAAU4E,WAAWR,GAAGjF,KAAKa,UAAU6E,QAAQd,aAAa/D,UAAU8E,IAAI,QAAQf,QAAQvE,cAAcuF,OAAO1E,GAAGlB,KAAKO,gBAAgB8D,MAAMwB,eAAe5F,gBAAgB6F,SAAS9F,KAAKC,UAAS,GAAID,KAAKI,iBAAgB,wBAAyBJ,KAAKC,UAAUD,KAAK+F,aAAaH,OAAO1E,QAAQH,gBAAgBG,GAAG8E,aAAaf,IAAIxF,EAAEwG,MAAMhB,MAAMiB,QAAQhF,EAAEG,SAASE,EAAEvB,KAAKmG,KAAKC,MAAMC,EAAEnF,EAAEG,WAAWiF,QAAQC,QAAQ,IAAIC,EAAE,CAACC,WAAW,GAAGpB,SAAS9D,EAAEgB,MAAMvC,KAAKuC,SAASmE,cAAcrG,cAAc,IAAIsG,EAAE,CAACR,KAAKnG,KAAKmG,KAAKS,SAAS5G,KAAKa,UAAUgG,sBAAsB,IAAI7G,KAAK8G,gBAAgB5G,UAAU,IAAI6G,EAAE/G,KAAKmG,KAAKa,wBAAwBhH,KAAKC,UAAS,EAAG6F,cAAcjF,UAAUgF,UAAU7F,KAAKK,cAAcwF,UAAU7F,KAAKE,UAAU+G,YAAYjH,KAAKK,cAAcH,WAAWF,KAAKK,cAAc,KAAK6G,QAAQhG,QAAQhB,UAAUiH,SAASnH,KAAKK,cAAcH,WAAWgB,EAAEiG,SAASnH,KAAKE,WAAWkH,UAAUlG,QAAQhB,UAAU+G,YAAYjH,KAAKK,cAAcH,WAAWgB,EAAE+F,YAAYjH,KAAKE,WAAW6F,oBAAoB/F,KAAKK,cAAcgH,UAAUrH,KAAKI,gBAAgBkH,sBAAsBtH,KAAKqH,SAAS,KAAKrH,KAAKiE,WAAWsD,UAAUT,qBAAqB1G,uBAAuBA,iBAAgB,EAAGJ,KAAKmG,KAAKW,+CAA+C5F,oBAAoBsG,EAAExH,KAAKuC,MAAMkF,WAAWvG,SAASC,aAAamC,SAASoE,EAAE1H,KAAKuC,MAAMoF,IAAI,CAACC,MAAM,CAACC,OAAO,aAAaC,MAAM5G,EAAE6G,MAAMvD,KAAKC,UAAUvD,EAAE8G,UAAUrB,EAAE,WAAWsB,KAAKC,kBAAkBC,OAAO,GAAGC,gBAAgB1G,cAAc4B,EAAE9B,EAAE6G,SAAS/E,GAAG,kBAAkB,OAAOqB,yBAAyBzD,SAASC,EAAEnB,KAAKO,gBAAgBC,0BAA0BU,EAAEV,wBAAwBa,EAAErB,KAAKO,gBAAgBI,OAAOO,EAAEP,KAAKY,EAAE+G,KAAKC,IAAIvI,KAAKO,gBAAgBG,eAAeQ,EAAER,gBAAgBQ,EAAER,eAAe,IAAIqB,EAAE/B,KAAKO,gBAAgBE,QAAQ6E,SAASpE,EAAET,QAAQ6E,SAAShC,EAAEkC,WAAWP,cAAc9D,GAAGE,GAAGE,GAAGQ,IAAIyG,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,gBAAW,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,iBAAY,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,aAAQ,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,kBAAa,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,YAAO,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,uBAAkB,GAAQF,EAAE,CAACC,KAAK7I,EAAE8I,UAAU,WAAW,MAAMF,EAAE,CAACG,EAAE,CAAC/B,SAAS,cAAchH,EAAE8I,UAAU,YAAO,GAAQ9I,EAAE4I,EAAE,CAACI,EAAE,uDAAuDhJ,GAAG,IAAIiJ,EAAEjJ,ECAvnI,MAAMO,EAAEN,EAAEF,UAAU,8CAA8C,IAAImB,EAAE,cAAc4G,EAAE5H,uBAAuBC,WAAWC,KAAKC,UAAS,EAAGD,KAAKE,UAAU,IAAIsB,EAAExB,KAAKI,iBAAgB,EAAGJ,KAAKY,KAAK,UAAUZ,KAAK8I,YAAY,KAAKjD,eAAe5F,gBAAgB6F,SAAS9F,KAAKC,UAAS,GAAID,KAAKI,iBAAgB,wBAAyBJ,KAAKC,UAAUD,KAAK+F,aAAaH,OAAO1E,QAAQ6H,SAASnD,OAAO1E,GAAG8E,aAAaf,IAAI9E,EAAE8F,MAAMhB,MAAMa,cAAciD,SAASlD,UAAU7F,KAAK8I,YAAYE,oBAAoBhJ,KAAKE,UAAU8I,oBAAoB9C,QAAQhF,EAAEG,SAASE,EAAEvB,KAAKmG,KAAKC,MAAMzC,EAAEzC,EAAEG,WAAWiF,QAAQC,QAAQ,IAAIC,EAAE,CAACC,WAAW,GAAGpB,SAAS9D,EAAEgB,MAAMvC,KAAKuC,SAASmE,eAAexF,EAAElB,KAAKuC,MAAMgC,SAAS,GAAGiC,EAAExG,KAAKuC,MAAMgC,SAAS,KAAKvE,KAAKuC,MAAM0G,eAAe,KAAK5H,EAAErB,KAAKuC,MAAMgC,SAAS,KAAKvE,KAAKuC,MAAM2G,cAAc,UAAUJ,YAAY,IAAIH,EAAE3I,KAAK+I,SAAS,IAAIvB,EAAE,CAACtH,UAAUF,KAAK8I,YAAYK,4BAA4BjI,EAAE+H,eAAezC,EAAE0C,cAAc7H,EAAE+H,YAAYpJ,KAAKqJ,YAAYC,KAAKtJ,MAAM8G,cAAc,IAAI9G,KAAK8G,kBAAkB9G,KAAKC,UAAS,EAAGiH,QAAQhG,QAAQhB,UAAUiH,SAASnH,KAAK8I,aAAa5H,EAAEiG,SAASnH,KAAKE,WAAWkH,UAAUlG,QAAQhB,UAAU+G,YAAYjH,KAAK8I,aAAa5H,EAAE+F,YAAYjH,KAAKE,WAAWqH,cAAcwB,SAASQ,qBAAqBC,kBAAkBC,iBAAiBvI,EAAEwI,gBAAgB1J,KAAKuC,MAAMoH,cAAc,CAACnG,WAAWtC,EAAEsI,OAAOhG,aAAaoG,gBAAgBvI,EAAEH,EAAEsI,SAAShG,WAAWrC,EAAEqC,WAAWnC,EAAE8D,UAAUnF,KAAKuC,MAAMsH,YAAY5E,GAAGjF,KAAKE,UAAUwJ,sBAAsB5C,qBAAqB1G,uBAAuBA,iBAAgB,EAAGJ,KAAKmG,KAAKW,iBAAiBf,oBAAoB/F,KAAK+I,SAAS1B,UAAUrH,KAAKI,gBAAgBkH,kBAAkBtH,KAAKqH,gBAAgB,WAAWnG,EAAElB,KAAK+I,SAASe,WAAW,IAAA5I,EAAM8D,QAAQ9D,EAAE,GAAGsI,aAAa,CAAC9H,OAAOR,EAAE,GAAGsI,OAAO9H,OAAO8B,WAAWtC,EAAE,GAAGsI,OAAOO,uBAAuB7I,EAAE8D,OAAO,EAAE,OAAO7D,EAAEnB,KAAKmG,KAAKzE,OAAOL,EAAEH,EAAE8I,QAAQ/E,EAAEuE,SAASrE,WAAWF,EAAEvD,QAAQuD,EAAEvD,OAAO8D,WAAWrE,KAAK6I,SAAS,CAACtI,OAAOuD,EAAEvD,OAAO8B,WAAWyB,EAAE8E,uBAAuBxI,EAAEkH,EAAEpH,EAAEF,UAAUzB,EAAE6B,GAAG,CAACG,OAAOH,EAAEG,OAAO8B,WAAWjC,EAAEiC,YAAY,YAAY,KAAK6F,YAAYnI,EAAEC,EAAEE,EAAExB,YAAYA,GAAG,IAAIqC,WAAWlC,KAAKkC,WAAWrC,EAAEsC,uBAAsB,EAAGnC,KAAKuC,MAAMa,WAAWlC,EAAEC,EAAEE,EAAExB,GAAG+J,SAAS3E,EAAEgF,aAAahF,EAAEgF,aAAajK,KAAKuC,MAAMoH,cAAc1E,EAAE1B,UAAU,CAACnB,OAAOvC,EAAEuC,SAASwH,gBAAgBnG,EAAE,IAAIP,EAAEI,EAAEE,WAAWF,EAAE5B,OAAOyC,QAAQc,EAAE1B,UAAUC,mBAAmBC,EAAE0B,UAAUnF,KAAKuC,MAAMsH,YAAYzE,GAAG3B,SAAS+E,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,gBAAW,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,iBAAY,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,aAAQ,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,gBAAW,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,kBAAa,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,YAAO,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,uBAAkB,GAAQF,EAAE,CAAC0B,KAAKpJ,EAAE4H,UAAU,WAAW,MAAMF,EAAE,CAACnC,EAAE,CAAC8D,QAAQ,aAAarJ,EAAE4H,UAAU,YAAO,GAAQ5H,EAAE0H,EAAE,CAACI,EAAE,+CAA+C9H,GAAG,IAAIiG,EAAEjG,ECA9kG,IAAIuF,EAAE,cAAc6D,EAAE1C,EAAE7D,EAAEiF,MAAM9I,uBAAuBC,WAAWC,KAAKoK,uBAAuBC,kBAAkBC,QAAQC,IAAI,CAAC/D,EAAExG,KAAK,CAAC,kBAAkB,2BAA2BwK,eAAeA,QAAQtK,UAAUuK,UAAUvJ,MAAK,GAAIsF,EAAExG,KAAK,CAAC,0BAA0BwK,eAAeA,QAAQtK,UAAUwK,OAAOxJ,MAAK,4BAA6BlB,KAAKqH,SAAS,KAAKrH,KAAKwK,QAAQlD,2CAA2CkD,UAAUxK,KAAKwK,QAAQnD,UAAUnB,QAAQhF,EAAEC,UAAUnB,KAAK2K,YAAY3K,KAAKwK,QAAQlE,QAAQC,QAAQ,MAAMvG,KAAKwK,QAAQtE,QAAQhF,EAAEC,GAAGyE,OAAO1E,OAAOC,EAAE,SAASnB,KAAKwK,UAAUrJ,EAAEyE,OAAO1E,GAAGwF,cAAcnE,MAAMqI,gCAAgC5K,KAAK6K,cAAc7K,KAAKsK,QAAQC,IAAI,CAAC/D,EAAExG,KAAK,uDAAuDoK,sBAAsBlJ,SAASkJ,oBAAoBlJ,EAAElB,KAAK8G,oBAAoB9G,KAAK8K,MAAM,cAAc,UAAUN,QAAQtI,WAAWlC,KAAKkC,WAAWlC,KAAK8G,mBAAmB9G,KAAKuC,MAAMwI,GAAG,UAAU,IAAI/K,KAAKwK,QAAQjD,WAAW7H,EAAEM,KAAKuC,MAAM,YAAY,IAAIvC,KAAK6K,iBAAiB,2BAA2B/E,cAAcvD,MAAMyI,gCAAgChL,KAAKwK,QAAQ3E,UAAU7F,KAAKsK,QAAQW,OAAO,2BAA2BjL,KAAKoK,uBAAuBc,aAAaC,cAAcC,eAAetE,uCAAuCA,gBAAgBf,oBAAoB/F,KAAKwK,UAAUxK,KAAK2K,WAAW3K,KAAKwK,QAAQzE,aAAa8E,kBAAkB3J,MAAMC,EAAE,cAAcY,EAAER,EAAG,kBAAkB,SAASvB,KAAKuC,MAAMC,eAAU,EAAOtB,EAAEN,OAAO,SAASZ,KAAKuC,MAAM8I,WAAW,YAAYrL,KAAKwK,SAASxK,KAAKwK,QAAQ5J,OAAOO,IAAK,SAASnB,KAAKwK,UAAUzI,EAAEqF,UAAUpH,KAAKE,WAAW,SAASF,KAAKwK,UAAUjJ,EAAEsE,UAAU7F,KAAKwK,QAAQ,YAAArJ,EAAc,IAAIwH,EAAE,CAACpG,MAAMvC,KAAKuC,MAAM4D,KAAKnG,KAAKmG,KAAKjE,WAAWlC,KAAKkC,aAAa,IAAIlB,EAAE,CAACuB,MAAMvC,KAAKuC,MAAM4D,KAAKnG,KAAKmG,KAAKjE,WAAWlC,KAAKkC,aAAalC,KAAKwK,QAAQ9D,SAAS1G,KAAKwK,QAAQtD,QAAQlH,KAAKE,WAAWF,KAAKwK,QAAQtK,UAAUuK,UAAUzK,KAAKuC,MAAMkI,UAAUzK,KAAKwK,QAAQtK,UAAUwK,OAAO1K,KAAKuC,MAAMmI,aAAa5D,kBAAkB0B,EAAE,CAAC3I,KAAKwG,EAAEqC,UAAU,YAAY,MAAMF,EAAE,CAAC3I,EAAE,CAACyL,UAAS,KAAMjF,EAAEqC,UAAU,WAAW,MAAMF,EAAE,CAAC3I,KAAKwG,EAAEqC,UAAU,eAAU,GAAQrC,EAAEmC,EAAE,CAACd,EAAE,4CAA4CrB,GAAM,IAACnD,EAAEmD"}