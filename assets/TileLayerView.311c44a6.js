import{F as e,G as t,H as r,z as a,bN as s,B as i}from"./vendor.7103ff48.js";import{s as l}from"./clickToleranceUtils.85f9bed9.js";const o=o=>{let n=class extends o{async fetchPopupFeatures(e,t){const{layer:r}=this;if(!e)return Promise.reject(new a("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r}));if("tile"!==r.type)return Promise.reject(new a("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:r.type}));const o=this.get("view.scale"),n=r.allSublayers.toArray().filter((e=>{const t=0===e.minScale||o<=e.minScale,r=0===e.maxScale||o>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&r}));return s(n.map((async r=>{const a=r.createQuery(),s=i(t)?t.event:null,o=l({renderer:r.renderer,event:s});return a.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o),a.outFields=await r.popupTemplate.getRequiredFields(),(await r.queryFeatures(a)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([t()],n.prototype,"layer",void 0),n=e([r("esri.layers.mixins.TileLayerView")],n),n};export{o as i};
//# sourceMappingURL=TileLayerView.311c44a6.js.map
