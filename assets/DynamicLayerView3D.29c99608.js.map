{"version":3,"file":"DynamicLayerView3D.29c99608.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/DynamicLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as n}from\"../../../../geometry/support/aaBoundingRect.js\";import{Geometry as i}from\"../../webgl-engine/lib/Geometry.js\";import r from\"../../webgl-engine/lib/GeometryUtil.js\";function o(n,i,r){const o=t(n)/e(n),a={width:r,height:r};return o>1.0001?a.height=r/o:o<.9999&&(a.width=r*o),a.width=Math.round(a.width/(t(n)/t(i))),a.height=Math.round(a.height/(e(n)/e(i))),a}function a(t){return r.createSquareGeometry([[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function h(t,e){if(!n(t,e))return a(e);const r=[t[1]-e[1],Math.min(t[3],e[3])-Math.max(t[1],e[1]),e[3]-t[3],123456],o=[t[0]-e[0],Math.min(t[2],e[2])-Math.max(t[0],e[0]),e[2]-t[2],123456],h=e[2]-e[0],u=e[3]-e[1],l=o[0]>0&&o[2]>0?3:2,m=r[0]>0&&r[2]>0?3:2,c=(m+1)*(l+1),g=new Float64Array(3*c),w=new Float32Array(2*c),d=new Uint32Array(6*(m*l-1));let f=0,p=0,y=0,x=0,M=0;for(let n=0;n<4;n++){const t=r[n];if(t<=0)continue;let i=0;for(let r=0;r<4;r++){const t=o[r];t<=0||(g[p++]=e[0]+i,g[p++]=e[1]+f,g[p++]=-1,w[y++]=i/h,w[y++]=f/u,r<3&&n<3&&(1!==r||1!==n)&&(d[M++]=x,d[M++]=x+1,d[M++]=x+l+1,d[M++]=x+1,d[M++]=x+l+2,d[M++]=x+l+1),x++,i+=t)}f+=t}const v=new Uint32Array(d.length);return new i([[\"position\",{size:3,data:g,exclusive:!0}],[\"normal\",{size:3,data:s,exclusive:!0}],[\"uv0\",{size:2,data:w,exclusive:!0}]],[[\"position\",d],[\"normal\",v],[\"uv0\",d]])}const s=[0,0,1];export{o as computeImageExportSize,a as createGeometryForExtent,h as createOuterImageGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterialTexture.js\";import{Material as t,materialParametersDefaults as i}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as s}from\"../lib/OrderIndependentTransparency.js\";import{DefaultBufferWriter as a,PositionUVLayout as r}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as u,ImageMaterialTechnique as h}from\"../shaders/ImageMaterialTechnique.js\";class c extends t{constructor(e){super(e,p),this.supportsEdges=!0,this.techniqueConfig=new u}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,a,r,u){n(e,t,s,a,r,void 0,u)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new l(e):void 0}createBufferWriter(){return new a(r)}}class l extends e{constructor(e){super({...e,...e.material.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(h,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(23===e)return!0;if(4===this._output)return 3===e;return e===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&(this._material.setParameterValues({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}ensureParameters(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e){this.bindTextures(this._technique.program),this.bindTextureScale(this._technique.program),this._technique.bindPass(this._material.params,e)}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const p={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...i};export{c as ImageMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{forEach as t,result as i}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Logger.js\";import{isNone as a,isSome as s}from\"../../../core/maybe.js\";import{debounce as n,isAbortError as o,eachAlways as l,createAbortController as h,onAbort as m,isAborted as d,createAbortError as c,always as g,throwIfAborted as u}from\"../../../core/promiseUtils.js\";import{whenOnce as p}from\"../../../core/watchUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import x from\"../../../geometry/Extent.js\";import{equals as w,create as _,width as v,height as b,copy as R,intersection as S}from\"../../../geometry/support/aaBoundingRect.js\";import{LayerView3D as E}from\"./LayerView3D.js\";import{computeImageExportSize as j,createGeometryForExtent as I,createOuterImageGeometry as A}from\"./support/overlayImageUtils.js\";import{toViewIfLocal as C}from\"./support/projectExtentUtils.js\";import L from\"../support/debugFlags.js\";import{RenderGeometry as D}from\"../webgl-engine/lib/RenderGeometry.js\";import{Texture as M}from\"../webgl-engine/lib/Texture.js\";import{ImageMaterial as G}from\"../webgl-engine/materials/ImageMaterial.js\";import T from\"../../layers/LayerView.js\";import{RefreshableLayerView as P}from\"../../layers/RefreshableLayerView.js\";const H=r.getLogger(\"esri.views.3d.layers.DynamicLayerView3D\");let O=class extends(P(E(T))){constructor(){super(...arguments),this.drapeSourceType=0,this.updatePolicy=1,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this.refreshDebounced=n((async e=>{await this.doRefresh(e).catch((e=>{o(e)||r.getLogger(this.declaredClass).error(e)}))}),2e3)}initialize(){this.addResolvingPromise(C(this).then((e=>this._set(\"fullExtentInLocalViewSpatialReference\",e)))),this.updatingHandles.add(this,\"suspended\",(()=>this._suspendedChangeHandler())),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((()=>{this._isScaleRangeActive()&&this.notifyChange(\"suspended\")}),(()=>{}))),this._isScaleRangeLayer()&&this.updatingHandles.add(this.layer,\"scaleRangeId\",(()=>this.notifyChange(\"suspended\")))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach((e=>{this._overlays[e.index]=e,this._updateImageExtent(e)}))}_updateImageExtent(e){const t=this._clippedExtent(e.extent,V);if(a(t))return;const i=j(e.extent,t,e.resolution);let r=e.pixelRatio*this.view.pixelRatio;if(\"imageMaxWidth\"in this.layer||\"imageMaxHeight\"in this.layer){const e=this.layer.imageMaxWidth,t=this.layer.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,r*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,r*=e}}const s=this._extents[e.index];s&&w(s.extent,t)&&this._imageSizeEquals(t,s.imageSize,i)||(this._extents[e.index]={extent:_(t),imageSize:i,pixelRatio:r},this.suspended||this._fetch(e.index).catch((e=>{o(e)||H.error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(e){if(this.suspended)return;const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await l(t)}canResume(){if(!super.canResume())return!1;if(this._isScaleRangeLayer()){const{minScale:e,maxScale:t}=this.layer;if(e>0||t>0){const i=this.view.scale;if(i<t||e>0&&i>e)return!1}}return!0}isUpdating(){return this._images.some((e=>!!e.loadingPromise))}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new x(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,i){await t(this._images,(async(t,r)=>{t&&(await e(t,i),await this._createStageObjects(r,t.image))}))}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution||L.TESTS_DISABLE_UPDATE_THRESHOLDS)return!1;const r=v(e)/this.maximumDataResolution.x,a=b(e)/this.maximumDataResolution.y,s=r/t.width,n=a/t.height,o=r/i.width,l=a/i.height,h=Math.abs(s-o),m=Math.abs(n-l);return h<=1.5&&m<=1.5}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],r=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:_(r)});const a=this._images[e];a.loadingAbortController&&(a.loadingAbortController.abort(),a.loadingAbortController=null);const s=new x(r[0],r[1],r[2],r[3],this._spatialReference);if(0===s.width||0===s.height)return void this._clearImage(e);const n=h();a.loadingAbortController=n,m(t,(()=>n.abort()));const l=n.signal,u=this._waitFetchReady(l).then((()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:l},{height:r,width:a}=i.imageSize;return this.layer.fetchImage(s,a,r,t)})).then((e=>{if(d(l))throw H.warnOnce(\"A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true.\"),c();return this.processResult(a,e)})).then((()=>R(a.renderExtent,r)));a.loadingPromise=u,g(u,(()=>{u===a.loadingPromise&&(a.loadingPromise=null,a.loadingAbortController=null)})),this.notifyChange(\"updating\"),await u.then((async()=>{await this._createStageObjects(e,a.image),this.notifyChange(\"updating\")})).catch((e=>{throw e&&!o(e)&&H.error(e),this.notifyChange(\"updating\"),e}))}_clearImage(e){const t=this._images[e];if(t){s(t.renderGeometry)&&(this.view.basemapTerrain.overlayManager.renderer.removeGeometries([t.renderGeometry],this,2),t.renderGeometry=null);const e=this.view._stage;e.remove(t.texture),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController&&(t.loadingAbortController.abort(),t.loadingAbortController=null),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t){const r=this.view._stage,n=this._images[e],o=this.view.basemapTerrain.overlayManager.renderer,l=()=>{r.remove(n.texture),n.texture=null,s(n.renderGeometry)&&(o.removeGeometries([n.renderGeometry],this,2),n.renderGeometry=null)};if(t){const s=new M(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:33071,t:33071}});let h;if(await i(this._images[0===e?1:0].loadingPromise),0===e)h=I(n.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void l();h=A(e,n.renderExtent)}l(),r.add(s),n.texture=s,a(n.material)?(n.material=new G({transparent:!0,textureId:s.id}),r.add(n.material)):n.material.setParameterValues({textureId:s.id}),n.renderGeometry=new D(h,n.material),n.renderGeometry.origin=this._overlays[e].renderLocalOrigin,o.addGeometries([n.renderGeometry],this,2)}else l(),r.remove(n.material),n.material=null}_isScaleRangeLayer(){return\"minScale\"in this.layer&&\"maxScale\"in this.layer}_isScaleRangeActive(){return!!this._isScaleRangeLayer()&&(this.layer.minScale>0||this.layer.maxScale>0)}_clippedExtent(e,t){if(\"local\"!==this.view.viewingMode)return R(t,e);const i=this.view.basemapTerrain;return i.ready?S(e,i.extent,t):R(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await p(this.view,\"stationary\",e),u(e)}};e([y()],O.prototype,\"layer\",void 0),e([y()],O.prototype,\"suspended\",void 0),e([y({readOnly:!0})],O.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([y()],O.prototype,\"updating\",void 0),O=e([f(\"esri.views.3d.layers.DynamicLayerView3D\")],O);const V=_();var U=O;export{U as default};\n"],"names":["t2","r","createSquareGeometry","s","t","constructor","e2","p","this","supportsEdges","techniqueConfig","u","getTechniqueConfig","output","cullFace","params","slicePlaneEnabled","transparent","writeDepth","sceneHasOcludees","transparencyPassType","enableOffset","camera","relativeElevation","multipassTerrainEnabled","cullAboveGround","intersect","i2","s2","a2","r2","u2","getGLMaterial","l","createBufferWriter","a","e","__spreadValues","material","updateParameters","_material","updateTexture","textureId","_technique","_techniqueRep","releaseAndAcquire","h","_output","beginSlot","configuration","_updateOccludeeState","hasOccludees","setParameterValues","ensureParameters","bind","bindTextures","program","bindTextureScale","bindPass","getPipelineState","opacity","initTextureTransparent","i","H","getLogger","O","P","E","T","arguments","drapeSourceType","updatePolicy","fullExtentInLocalViewSpatialReference","maximumDataResolution","_images","Array","_extents","_overlays","updateWhenStationary","refreshDebounced","n","async","doRefresh","catch","e3","declaredClass","error","initialize","addResolvingPromise","C","then","_set","updatingHandles","add","_suspendedChangeHandler","handles","view","resourceController","scheduler","registerIdleStateCallbacks","_isScaleRangeActive","notifyChange","_isScaleRangeLayer","layer","destroy","clear","setDrapingExtent","_spatialReference","forEach","index","_updateImageExtent","_clippedExtent","extent","V","n2","o2","width","height","Math","round","j","resolution","pixelRatio","imageMaxWidth","t3","imageMaxHeight","t4","floor","e4","w","_imageSizeEquals","imageSize","_","suspended","_fetch","length","_clearImage","push","canResume","super","minScale","maxScale","scale","isUpdating","some","loadingPromise","HTMLImageElement","HTMLCanvasElement","image","findExtentInfoAt","x","contains","getFetchOptions","_createStageObjects","L","TESTS_DISABLE_UPDATE_THRESHOLDS","v","b","y","l2","h2","abs","m2","texture","renderGeometry","loadingAbortController","pixelData","renderExtent","abort","m","signal","_waitFetchReady","__spreadProps","requestAsImageElement","r3","a3","fetchImage","d","warnOnce","c","processResult","R","g","o","basemapTerrain","overlayManager","renderer","removeGeometries","_stage","remove","M","preMultiplyAlpha","wrap","I","min","max","c2","g2","Float64Array","Float32Array","d2","Uint32Array","f2","p2","y2","M2","v2","size","data","exclusive","A","G","id","D","origin","renderLocalOrigin","addGeometries","viewingMode","ready","S","prototype","readOnly","f","U"],"mappings":"i5BAIwZ,WAAWA,UAAUC,EAAEC,qBAAqB,CAAC,CAACF,EAAE,GAAGA,EAAE,OAAO,CAACA,EAAE,GAAGA,EAAE,OAAO,CAACA,EAAE,GAAGA,EAAE,OAAO,CAACA,EAAE,GAAGA,EAAE,SAA21B,MAAMG,EAAE,CAAC,EAAE,EAAE,GCA93B,iBAAgBC,EAAEC,YAAYC,SAASA,EAAEC,IAAGC,KAAKC,eAAc,EAAGD,KAAKE,gBAAgB,IAAIC,EAAEC,mBAAmBN,EAAEN,UAAUQ,KAAKE,gBAAgBG,OAAOP,EAAEE,KAAKE,gBAAgBI,SAASN,KAAKO,OAAOD,SAASN,KAAKE,gBAAgBM,kBAAkBR,KAAKO,OAAOC,kBAAkBR,KAAKE,gBAAgBO,YAAYT,KAAKO,OAAOE,YAAYT,KAAKE,gBAAgBQ,WAAWV,KAAKO,OAAOG,WAAWV,KAAKE,gBAAgBS,iBAAiBX,KAAKO,OAAOI,iBAAiBX,KAAKE,gBAAgBU,qBAAqBpB,EAAEA,EAAEoB,qBAAqB,EAAEZ,KAAKE,gBAAgBW,cAAcrB,GAAGA,EAAEsB,OAAOC,kBAAkBpB,EAAEK,KAAKE,gBAAgBc,0BAA0BxB,GAAGA,EAAEwB,wBAAwBhB,KAAKE,gBAAgBe,kBAAkBzB,GAAGA,EAAEyB,gBAAgBjB,KAAKE,gBAAgBgB,UAAUpB,EAAEN,EAAE2B,EAAEC,EAAEC,EAAEC,EAAEC,KAAKzB,EAAEN,EAAE4B,EAAEC,EAAEC,OAAE,EAAOC,GAAGC,cAAc1B,UAAU,IAAAA,EAAMO,QAAQ,IAAAP,EAAMO,QAAQ,IAAIP,EAAEO,OAAO,IAAIoB,GAAE3B,QAAG,EAAO4B,4BAA4B,IAAIC,EAAElC,IAAI,iBAAgBmC,EAAE/B,YAAYC,SAAS+B,OAAI/B,GAAKA,EAAEgC,SAASvB,SAASP,KAAK+B,mBAAmBA,iBAAiBjC,SAASN,EAAEQ,KAAKgC,UAAUzB,YAAY0B,cAAczC,EAAE0C,WAAWlC,KAAKmC,WAAWnC,KAAKoC,cAAcC,kBAAkBC,EAAEtC,KAAKgC,UAAU5B,mBAAmBJ,KAAKuC,QAAQzC,GAAGE,KAAKmC,YAAYK,UAAU1C,UAAM,KAAAA,IAAmB,IAAIE,KAAKuC,QAAe,IAAAzC,EAAaA,UAAUqC,WAAWM,cAAchC,YAAYT,KAAKmC,WAAWM,cAAc/B,WAAW,EAAE,EAAE,IAAGgC,qBAAqB5C,KAAK6C,eAAe3C,KAAKgC,UAAUzB,OAAOI,wBAAwBqB,UAAUY,mBAAmB,CAACjC,iBAAiBb,EAAE6C,eAAe3C,KAAK+B,iBAAiBjC,IAAI+C,iBAAiB/C,GAAG,IAAIE,KAAKuC,SAAS,IAAAvC,KAASuC,SAASvC,KAAK0C,qBAAqB5C,GAAGE,KAAK+B,iBAAiBjC,GAAGgD,KAAKhD,QAAQiD,aAAa/C,KAAKmC,WAAWa,SAAShD,KAAKiD,iBAAiBjD,KAAKmC,WAAWa,SAAShD,KAAKmC,WAAWe,SAASlD,KAAKgC,UAAUzB,OAAOT,GAAGqD,iBAAiBrD,EAAEN,UAAUQ,KAAKmC,WAAWgB,iBAAiB3D,IAAI,MAAMO,GAAE8B,GAACpB,aAAY,EAAGC,YAAW,EAAGF,mBAAkB,EAAGF,SAAS,EAAEK,kBAAiB,EAAGyC,QAAQ,EAAElB,UAAU,KAAKmB,wBAAuB,GAAMC,GCAn/BC,GAAE9D,EAAE+D,UAAU,2CAA2C,IAAIC,GAAE,cAAcC,EAAEC,EAAEC,KAAK/D,uBAAuBgE,WAAW7D,KAAK8D,gBAAgB,EAAE9D,KAAK+D,aAAa,EAAE/D,KAAKgE,sCAAsC,KAAKhE,KAAKiE,sBAAsB,KAAKjE,KAAKkE,QAAQ,IAAIC,MAAMnE,KAAKoE,SAAS,IAAID,MAAMnE,KAAKqE,UAAU,IAAIF,MAAMnE,KAAKsE,sBAAqB,EAAGtE,KAAKuE,iBAAiBC,GAAGC,MAAM3E,UAAUE,KAAK0E,UAAU5E,GAAG6E,aAAaC,IAAInF,EAAE+D,UAAUxD,KAAK6E,eAAeC,MAAMF,QAAQ,KAAKG,kBAAkBC,oBAAoBC,EAAEjF,MAAMkF,SAASlF,KAAKmF,KAAK,wCAAwCrF,MAAME,KAAKoF,gBAAgBC,IAAIrF,KAAK,aAAa,IAAIA,KAAKsF,4BAA4BtF,KAAKuF,QAAQF,IAAIrF,KAAKwF,KAAKC,mBAAmBC,UAAUC,4BAA4B,UAAUC,uBAAuB5F,KAAK6F,aAAa,gBAAgB,UAAU7F,KAAK8F,sBAAsB9F,KAAKoF,gBAAgBC,IAAIrF,KAAK+F,MAAM,gBAAgB,IAAI/F,KAAK6F,aAAa,eAAeG,eAAeC,QAAQC,iBAAiBpG,EAAEN,QAAQ2G,kBAAkB3G,EAAEM,EAAEsG,kBAAkB/B,UAAUO,EAAEyB,OAAOzB,EAAE5E,KAAKsG,mBAAmB1B,MAAM0B,mBAAmBxG,SAASN,EAAEQ,KAAKuG,eAAezG,EAAE0G,OAAOC,OAAM9E,EAAEnC,gBAAgB2B,EFAz4E,SAAWuF,EAAEvF,EAAEG,SAASqF,EAAE/G,EAAE8G,GAAG9E,EAAE8E,GAAGrF,EAAE,CAACuF,MAAMtF,EAAEuF,OAAOvF,UAAUqF,EAAE,OAAOtF,EAAEwF,OAAOvF,EAAEqF,EAAEA,EAAE,UAAUC,MAAMtF,EAAEqF,GAAGtF,EAAEuF,MAAME,KAAKC,MAAM1F,EAAEuF,SAASF,GAAG9G,EAAEuB,KAAKE,EAAEwF,OAAOC,KAAKC,MAAM1F,EAAEwF,UAAUH,GAAG9E,EAAET,KAAKE,EEA4sE2F,CAAElH,EAAE0G,OAAOhH,EAAEM,EAAEmH,gBAAgB3F,EAAExB,EAAEoH,WAAWlH,KAAKwF,KAAK0B,cAAc,kBAAkBlH,KAAK+F,OAAO,mBAAmB/F,KAAK+F,MAAM,OAAOnB,EAAE5E,KAAK+F,MAAMoB,cAAcC,EAAEpH,KAAK+F,MAAMsB,kBAAkBlG,EAAEyF,MAAMhC,EAAE,OAAO0C,EAAE1C,EAAEzD,EAAEyF,QAAQC,OAAOC,KAAKS,MAAMpG,EAAE0F,OAAOS,GAAGnG,EAAEyF,MAAMhC,EAAEtD,GAAGgG,KAAKnG,EAAE0F,OAAOO,EAAE,OAAOI,EAAEJ,EAAEjG,EAAE0F,SAASD,MAAME,KAAKS,MAAMpG,EAAEyF,MAAMY,GAAGrG,EAAE0F,OAAOO,EAAE9F,GAAGkG,SAASpG,EAAEpB,KAAKoE,SAAStE,EAAEuG,UAAUoB,EAAErG,EAAEoF,OAAOhH,IAAIQ,KAAK0H,iBAAiBlI,EAAE4B,EAAEuG,UAAUxG,UAAUiD,SAAStE,EAAEuG,OAAO,CAACG,OAAOoB,EAAEpI,GAAGmI,UAAUxG,EAAE+F,WAAW5F,GAAGtB,KAAK6H,WAAW7H,KAAK8H,OAAOhI,EAAEuG,OAAO1B,aAAaC,IAAIrB,GAAEuB,MAAMF,OAAOqB,gBAAgBnG,EAAE,EAAEA,EAAEE,KAAKkE,QAAQ6D,OAAOjI,SAASkI,YAAYlI,mBAAmBA,MAAME,KAAK6H,uBAAuBrI,EAAE,WAAW2B,EAAE,EAAEA,EAAEnB,KAAKoE,SAAS2D,OAAO5G,SAASiD,SAASjD,IAAI3B,EAAEyI,KAAKjI,KAAK8H,OAAO3G,EAAErB,UAAU2B,EAAEjC,GAAG0I,gBAAgBC,MAAMD,mBAAkB,KAAMlI,KAAK8F,qBAAqB,OAAOsC,SAAStI,EAAEuI,SAAS7I,GAAGQ,KAAK+F,SAASjG,EAAE,GAAGN,EAAE,EAAE,OAAO2B,EAAEnB,KAAKwF,KAAK8C,SAASnH,EAAE3B,GAAGM,EAAE,GAAGqB,EAAErB,SAAQ,UAAU,EAAGyI,oBAAoBvI,KAAKkE,QAAQsE,WAAW1I,EAAE2I,qCAAqC3I,EAAEN,EAAE2B,iBAAiBuH,kBAAkBlJ,aAAamJ,uBAAuBC,MAAMpJ,GAAGqJ,iBAAiB/I,aAAaN,KAAKQ,KAAKoE,SAAS,OAAOjD,EAAE3B,EAAEgH,UAAU,IAAIsC,EAAE3H,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGnB,KAAKmG,mBAAmB4C,SAASjJ,UAAUN,SAAS,KAAKwJ,gCAAgClJ,EAAEqB,SAASvB,EAAEI,KAAKkE,SAASO,MAAMjF,EAAE8B,eAAexB,EAAEN,EAAE2B,SAASnB,KAAKiJ,oBAAoB3H,EAAE9B,EAAEoJ,WAAWlB,iBAAiB5H,EAAEN,EAAE2B,OAAOnB,KAAKiE,uBAAuBiF,EAAEC,uCAAsC,QAAS7H,EAAE8H,EAAEtJ,GAAGE,KAAKiE,sBAAsB6E,EAAEzH,EAAEgI,EAAEvJ,GAAGE,KAAKiE,sBAAsBqF,EAAElI,EAAEE,EAAE9B,EAAEoH,MAAMF,EAAErF,EAAE7B,EAAEqH,OAAOF,EAAErF,EAAEH,EAAEyF,MAAM2C,EAAElI,EAAEF,EAAE0F,OAAO2C,EAAE1C,KAAK2C,IAAIrI,EAAEuF,GAAG+C,EAAE5C,KAAK2C,IAAI/C,EAAE6C,UAAUC,GAAG,KAAKE,GAAG,iBAAiB5J,EAAEN,MAAMQ,KAAK6H,uBAAuB1G,EAAEnB,KAAKoE,SAAStE,GAAGwB,EAAEH,EAAEqF,YAAYtC,QAAQpE,UAAUoE,QAAQpE,GAAG,CAAC6J,QAAQ,KAAK7H,SAAS,KAAK8H,eAAe,KAAKnB,eAAe,KAAKoB,uBAAuB,KAAKjB,MAAM,KAAKkB,UAAU,KAAKC,aAAanC,EAAEtG,WAAWD,EAAErB,KAAKkE,QAAQpE,KAAK+J,2BAA2BA,uBAAuBG,QAAQ3I,EAAEwI,uBAAuB,YAAYzI,EAAE,IAAI0H,EAAExH,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGtB,KAAKmG,sBAAsB,IAAA/E,EAAMwF,OAAO,IAAIxF,EAAEyF,mBAAmB7G,KAAKgI,YAAYlI,SAAS4G,EAAEpE,MAAMuH,uBAAuBnD,EAAEuD,EAAEzK,GAAG,IAAIkH,EAAEsD,gBAAgBT,EAAE7C,EAAEwD,OAAO3I,EAAEvB,KAAKmK,gBAAgBZ,GAAGrE,MAAM,WAAWkC,oBAAEgD,IAACC,uBAAsB,EAAGnD,WAAWlH,KAAKqE,UAAUvE,GAAGoH,YAAclH,KAAKgJ,mBAA1E,CAA4FkB,OAAOX,KAAI1C,OAAOyD,EAAE1D,MAAM2D,GAAGpJ,EAAEwG,iBAAiB3H,KAAK+F,MAAMyE,WAAWpJ,EAAEmJ,EAAED,EAAElD,MAAMlC,aAAauF,EAAElB,SAAShG,GAAEmH,SAAS,uIAAuIC,WAAW3K,KAAK4K,cAAcvJ,EAAEuD,MAAMM,MAAM,IAAI2F,EAAExJ,EAAE0I,aAAazI,OAAOmH,eAAelH,EAAEuJ,EAAEvJ,GAAG,SAASF,EAAEoH,mBAAmBA,eAAe,KAAKpH,EAAEwI,uBAAuB,SAAS7J,KAAK6F,aAAa,kBAAkBtE,EAAE2D,MAAMT,gBAAgBzE,KAAKiJ,oBAAoBnJ,EAAEuB,EAAEuH,OAAO5I,KAAK6F,aAAa,eAAelB,iBAAiBC,IAAImG,EAAEnG,IAAIrB,GAAEuB,MAAMF,GAAG5E,KAAK6F,aAAa,YAAYjB,KAAKoD,YAAYlI,SAASN,EAAEQ,KAAKkE,QAAQpE,MAAMN,EAAE,GAAGA,EAAEoK,uBAAuBpE,KAAKwF,eAAeC,eAAeC,SAASC,iBAAiB,CAAC3L,EAAEoK,gBAAgB5J,KAAK,GAAGR,EAAEoK,eAAe,YAAYhF,EAAE5E,KAAKwF,KAAK4F,SAASC,OAAO7L,EAAEmK,SAASnK,EAAEmK,QAAQ,KAAK/E,EAAEyG,OAAO7L,EAAEsC,UAAUtC,EAAEsC,SAAS,KAAKtC,EAAEqK,2BAA2BA,uBAAuBG,QAAQxK,EAAEqK,uBAAuB,MAAMrK,EAAEiJ,eAAe,KAAKjJ,EAAEoJ,MAAM,KAAKpJ,EAAEsK,UAAU,gCAAgChK,EAAEN,SAASC,EAAEO,KAAKwF,KAAK4F,OAAO1E,EAAE1G,KAAKkE,QAAQpE,GAAG6G,EAAE3G,KAAKwF,KAAKwF,eAAeC,eAAeC,SAAS3B,EAAE,OAAO8B,OAAO3E,EAAEiD,SAASjD,EAAEiD,QAAQ,KAAKhK,EAAE+G,EAAEkD,oBAAoBuB,iBAAiB,CAACzE,EAAEkD,gBAAgB5J,KAAK,GAAG0G,EAAEkD,eAAe,UAAUpK,EAAE,OAAO4B,EAAE,IAAIkK,EAAE9L,EAAE,CAACoH,MAAMpH,EAAEoH,MAAMC,OAAOrH,EAAEqH,OAAO0E,kBAAiB,EAAGC,KAAK,CAAC7L,EAAE,MAAMC,EAAE,aAAa0C,WAAWgB,EAAEtD,KAAKkE,QAAQ,IAAIpE,EAAE,EAAE,GAAG2I,gBAAgB,IAAI3I,IAAI2L,EAAE/E,EAAEqD,kBAAkB,OAAOnF,EAAE5E,KAAKkE,QAAQ,GAAG6F,iBAAiBnF,cAAc2E,MFA/9L,SAAW/J,EAAEM,OAAO0E,EAAEhF,EAAEM,UAAU6B,EAAE7B,SAASwB,EAAE,CAAC9B,EAAE,GAAGM,EAAE,GAAGgH,KAAK4E,IAAIlM,EAAE,GAAGM,EAAE,IAAIgH,KAAK6E,IAAInM,EAAE,GAAGM,EAAE,IAAIA,EAAE,GAAGN,EAAE,GAAG,QAAQmH,EAAE,CAACnH,EAAE,GAAGM,EAAE,GAAGgH,KAAK4E,IAAIlM,EAAE,GAAGM,EAAE,IAAIgH,KAAK6E,IAAInM,EAAE,GAAGM,EAAE,IAAIA,EAAE,GAAGN,EAAE,GAAG,QAAQgK,EAAE1J,EAAE,GAAGA,EAAE,GAAGK,EAAEL,EAAE,GAAGA,EAAE,GAAGyJ,EAAE5C,EAAE,GAAG,GAAGA,EAAE,GAAG,EAAE,EAAE,EAAE+C,EAAEpI,EAAE,GAAG,GAAGA,EAAE,GAAG,EAAE,EAAE,EAAEsK,KAAK,MAAM,GAAGC,EAAE,IAAIC,aAAa,EAAEF,GAAGnE,EAAE,IAAIsE,aAAa,EAAEH,GAAGI,EAAE,IAAIC,YAAY,KAAK1C,EAAE,QAAQ2C,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEtD,EAAE,EAAEuD,EAAE,UAAU3F,EAAE,EAAEA,EAAE,EAAEA,IAAI,OAAOU,EAAE9F,EAAEoF,MAAMU,GAAG,eAAejG,EAAE,UAAUmJ,EAAE,EAAEA,EAAE,EAAEA,IAAI,OAAOhD,EAAEX,EAAE2D,MAAM,MAAM6B,KAAKrM,EAAE,GAAGqB,EAAE0K,EAAEM,KAAKrM,EAAE,GAAGoM,EAAEL,EAAEM,QAAQ1E,EAAE2E,KAAKjL,EAAEqI,EAAE/B,EAAE2E,KAAKF,EAAE/L,EAAEmK,EAAE,GAAG5D,EAAE,IAAI,IAAI4D,GAAG,IAAA5D,OAAW2F,KAAKvD,EAAEkD,EAAEK,KAAKvD,EAAE,EAAEkD,EAAEK,KAAKvD,EAAES,EAAE,EAAEyC,EAAEK,KAAKvD,EAAE,EAAEkD,EAAEK,KAAKvD,EAAES,EAAE,EAAEyC,EAAEK,KAAKvD,EAAES,EAAE,GAAGT,IAAI3H,GAAGmG,MAAMF,QAAQkF,EAAE,IAAIL,YAAYD,EAAEjE,eAAe,IAAIzE,EAAE,CAAC,CAAC,WAAW,CAACiJ,KAAK,EAAEC,KAAKX,EAAEY,WAAU,IAAK,CAAC,SAAS,CAACF,KAAK,EAAEC,KAAK7M,EAAE8M,WAAU,IAAK,CAAC,MAAM,CAACF,KAAK,EAAEC,KAAK/E,EAAEgF,WAAU,KAAM,CAAC,CAAC,WAAWT,GAAG,CAAC,SAASM,GAAG,CAAC,MAAMN,KEAwpKU,CAAE9H,EAAE8B,EAAEqD,kBAAkBtK,EAAE4F,IAAIjE,GAAGsF,EAAEiD,QAAQvI,EAAEO,EAAE+E,EAAE5E,aAAaA,SAAS,IAAI6K,GAAE,CAAClM,aAAY,EAAGyB,UAAUd,EAAEwL,KAAKnN,EAAE4F,IAAIqB,EAAE5E,WAAW4E,EAAE5E,SAASc,mBAAmB,CAACV,UAAUd,EAAEwL,KAAKlG,EAAEkD,eAAe,IAAIiD,EAAEvK,EAAEoE,EAAE5E,UAAU4E,EAAEkD,eAAekD,OAAO9M,KAAKqE,UAAUvE,GAAGiN,kBAAkBpG,EAAEqG,cAAc,CAACtG,EAAEkD,gBAAgB5J,KAAK,YAAYP,EAAE4L,OAAO3E,EAAE5E,UAAU4E,EAAE5E,SAAS,KAAKgE,2BAA2B,aAAa9F,KAAK+F,OAAO,aAAa/F,KAAK+F,MAAMH,8BAA8B5F,KAAK8F,4BAA4BC,MAAMqC,SAAS,GAAGpI,KAAK+F,MAAMsC,SAAS,GAAG9B,eAAezG,EAAEN,MAAM,UAAUQ,KAAKwF,KAAKyH,mBAAmBpC,EAAErL,EAAEM,SAASqB,EAAEnB,KAAKwF,KAAKwF,sBAAsB7J,EAAE+L,MAAMC,EAAErN,EAAEqB,EAAEqF,OAAOhH,GAAGqL,EAAErL,EAAEM,GAAGwF,+BAA+BuC,UAAU7H,KAAKiG,QAAQjG,KAAKuE,yCAAyCzE,SAASC,EAAEC,KAAKwF,KAAK,aAAa1F,GAAGK,EAAEL,KAAK8B,EAAE,CAAC0H,KAAK7F,GAAE2J,UAAU,aAAQ,GAAQxL,EAAE,CAAC0H,KAAK7F,GAAE2J,UAAU,iBAAY,GAAQxL,EAAE,CAAC0H,EAAE,CAAC+D,UAAS,KAAM5J,GAAE2J,UAAU,6CAAwC,GAAQxL,EAAE,CAAC0H,KAAK7F,GAAE2J,UAAU,gBAAW,GAAQ3J,GAAE7B,EAAE,CAAC0L,EAAE,4CAA4C7J,IAAG,MAAMgD,GAAEmB,IAAO,IAAC2F,GAAE9J"}