{"version":3,"file":"projectionSupport.c5c55ada.js","sources":["../../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as s}from\"../../../core/maybe.js\";import{initializeProjection as t,projectMany as e}from\"../../../geometry/projection.js\";import{jsonAdapter as n}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as r,equals as i,isWebMercator as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as m,xyToLngLat as a,canProject as h}from\"../../../geometry/support/webMercatorUtils.js\";const u=[0,0];function c(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,u),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,u),[e.xmax,e.ymax]=s(t.xmax,t.ymax,u),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:p(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:p(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:l(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(s,t){const e=[];for(const n of s)e.push(l(n,t));return e}function l(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function f(e,n){if(!n)return;const r=Array.isArray(e)?e.map((t=>s(t.geometry)&&t.geometry.spatialReference)):[e];await t(r.map((s=>({source:s,dest:n}))))}const x=c.bind(null,m),y=c.bind(null,a);function g(s,t,m){return s?(m||(m=t,t=s.spatialReference),r(t)&&r(m)&&!i(t,m)?h(t,m)?o(m)?x(s):y(s):e(n,[s],t,m,null)[0]:s):s}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,e){if(!s||!s.length||!t||!e||i(t,e))return s;const n={geometries:s,inSpatialReference:t,outSpatialReference:e,resolve:null};return this._jobs.push(n),new Promise((s=>{n.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:m}=s;h(r,i)?o(i)?m(t.map(x)):m(t.map(y)):m(e(n,t,r,i,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const j=new _;function M(s,t,e){return j.push(s,t,e)}export{f as checkProjectionSupport,g as project,M as projectMany};\n"],"names":["u","s","t2","e","x","y","z","m","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","rings","p","paths","points","l","n","push","s2","length","async","r","Array","isArray","map","geometry","spatialReference","t","source","dest","c","bind","a","i","h","o","j","constructor","_jobs","this","_timer","_process","geometries","inSpatialReference","outSpatialReference","resolve","Promise","setTimeout","shift","r2"],"mappings":"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"}