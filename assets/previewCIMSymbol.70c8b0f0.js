import{o7 as e,o8 as t,bD as a}from"./vendor.7103ff48.js";import{CIMSymbolRasterizer as l}from"./CIMSymbolRasterizer.da7ec585.js";import"./cimAnalyzer.07de9cca.js";import"./CIMSymbolHelper.da5834c9.js";import"./Rasterizer.12b7ee42.js";const i=new l(null,!0);async function o(l,o={}){const{size:s,maxSize:n,node:r,opacity:c}=o,m=o.cimOptions||o,{feature:d,fieldMap:y,geometryType:p,style:h}=m,u=e(l),b=Math.min(null!=s?s:u,null!=n?n:a(120));b!==u&&(l=l.clone(),t(l,b,{preserveOutlineWidth:!0}));let g=3;l&&l.data&&l.data.symbol&&"CIMPointSymbol"!==l.data.symbol.type&&(g=1);const M=await i.rasterizeCIMSymbolAsync(l,d,y,p,{scaleFactor:g,style:h}),f=document.createElement("canvas");f.width=M.imageData.width,f.height=M.imageData.height,f.getContext("2d").putImageData(M.imageData,0,0);let C=f.width/g,I=f.height/g;if(null!=s&&(null==(null==o?void 0:o.scale)||(null==o?void 0:o.scale))){const e=C/I;C=e<=1?Math.ceil(b*e):b,I=e<=1?b:Math.ceil(b/e)}const w=new Image(C,I);return w.src=f.toDataURL(),null!=c&&(w.style.opacity=`${c}`),r&&r.appendChild(w),w}export{o as previewCIMSymbol};
//# sourceMappingURL=previewCIMSymbol.70c8b0f0.js.map
