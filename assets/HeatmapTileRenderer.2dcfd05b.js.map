{"version":3,"file":"HeatmapTileRenderer.2dcfd05b.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","../../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{drawHeatmap as t}from\"../../../../../../renderers/support/heatmapUtils.js\";class i{constructor(){this.gradient=null,this.height=512,this.width=512}render(i){t(i,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}export{i as HeatmapSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{generateGradient as i}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as s}from\"../../../engine/BitmapTileContainer.js\";import r from\"./BaseTileRenderer.js\";import{HeatmapSource as n}from\"./support/HeatmapSource.js\";let o=class extends r{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new s(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:s}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=s,this._gradient=i(e.toJSON()),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minPixelIntensity=t,i.maxPixelIntensity=s,i.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:s,maxPixelIntensity:r}=this._intensityInfo,o=t.bitmap.source||new n;o.intensities=i&&i.matrix||null,o.minPixelIntensity=s,o.maxPixelIntensity=r,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};o=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],o);var a=o;export{a as default};\n"],"names":["constructor","gradient","this","height","width","render","i2","intensities","minPixelIntensity","maxPixelIntensity","o","r","e2","_intensityInfo","featuresView","attributeView","initialize","requestUpdate","requestRender","_container","s","tileInfoView","createTile","t","getTileCoords","bitmap","resolution","getTileResolution","onConfigUpdate","layer","renderer","type","_gradient","i","toJSON","tiles","forEach","e3","source","invalidateTexture","hitTest","Promise","resolve","install","addChild","uninstall","removeAllChildren","removeChild","disposeTile","destroy","supportsRenderer","onTileData","get","tileKey","intensityInfo","o2","n","matrix","onTileError","error","lockGPUUploads","unlockGPUUploads","e","a"],"mappings":"sjBAIkF,QAAQA,mBAAmBC,SAAS,KAAKC,KAAKC,OAAO,IAAID,KAAKE,MAAM,IAAIC,OAAOC,KAAKA,EAAE,IAAIJ,KAAKK,YAAYL,KAAKD,SAASC,KAAKM,kBAAkBN,KAAKO,oBCA6W,IAAIC,EAAE,cAAcC,EAAEX,YAAYY,SAASA,GAAGV,KAAKW,eAAe,CAACL,kBAAkB,EAAEC,kBAAkB,GAAGP,KAAKY,aAAa,CAACC,cAAc,CAACC,WAAW,OAAOC,cAAc,QAAQC,cAAc,QAAQhB,KAAKiB,WAAW,IAAIC,EAAER,EAAES,cAAcC,WAAWV,SAASW,EAAErB,KAAKiB,WAAWG,WAAWV,UAAUV,KAAKmB,aAAaG,cAAcD,EAAEE,OAAOb,GAAGW,EAAEE,OAAOC,WAAWxB,KAAKmB,aAAaM,kBAAkBf,GAAGW,EAAEK,uBAAuBhB,EAAEV,KAAK2B,MAAMC,YAAY,YAAYlB,EAAEmB,KAAK,OAAOvB,kBAAkBe,EAAEd,kBAAkBW,GAAGR,OAAOC,eAAeL,kBAAkBe,EAAErB,KAAKW,eAAeJ,kBAAkBW,EAAElB,KAAK8B,UAAUC,EAAErB,EAAEsB,UAAUhC,KAAKiC,MAAMC,mBAAmB9B,EAAE+B,EAAEZ,OAAOa,aAAa9B,kBAAkBe,EAAEjB,EAAEG,kBAAkBW,EAAEd,EAAEL,SAASC,KAAK8B,UAAUK,EAAEZ,OAAOc,yBAAyBC,iBAAiBC,QAAQC,QAAQ,IAAIC,QAAQ/B,KAAKgC,SAAS1C,KAAKiB,YAAY0B,UAAUjC,QAAQO,WAAW2B,oBAAoBlC,EAAEmC,YAAY7C,KAAKiB,YAAY6B,YAAYpC,QAAQO,WAAW4B,YAAYnC,GAAGA,EAAEqC,UAAUC,iBAAiBtC,UAAUA,GAAG,YAAAA,EAAcmB,KAAKoB,WAAWvC,SAASW,EAAErB,KAAKiC,MAAMiB,IAAIxC,EAAEyC,aAAa9B,eAAeU,EAAErB,EAAE0C,eAAe9C,kBAAkBY,EAAEX,kBAAkBE,GAAGT,KAAKW,eAAe0C,EAAEhC,EAAEE,OAAOa,QAAQ,IAAIkB,IAAIjD,YAAY0B,GAAGA,EAAEwB,QAAQ,KAAKF,EAAE/C,kBAAkBY,EAAEmC,EAAE9C,kBAAkBE,EAAE4C,EAAEtD,SAASC,KAAK8B,UAAUT,EAAEE,OAAOa,OAAOiB,EAAErD,KAAKiB,WAAWyB,SAASrB,GAAGrB,KAAKe,gBAAgByC,YAAY9C,WAAW+C,MAAM/C,GAAGgD,kBAAkBC,sBAAsBnD,EAAEoD,EAAE,CAACvC,EAAE,oEAAoEb,GAAM,IAACqD,EAAErD"}