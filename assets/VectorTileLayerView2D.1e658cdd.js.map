{"version":3,"file":"VectorTileLayerView2D.1e658cdd.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js","../../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/RenderableTile.js","../../node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/support/Display.js","../../node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js","../../node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/LRUCache.js\";import{isNone as i,isSome as t}from\"../../../../core/maybe.js\";import s from\"../../tiling/TileCoverage.js\";import l from\"../../tiling/TileKey.js\";const r=512,o=1e-6,n=(e,i)=>e+1/(1<<2*i);class a{constructor(i,t){this._tiles=new Map,this._tileCache=new e(40,(e=>e.dispose())),this._viewSize=[0,0],this._visibleTiles=new Map,this.acquireTile=i.acquireTile,this.releaseTile=i.releaseTile,this.tileInfoView=i.tileInfoView,this._container=t}destroy(){for(const[e,i]of this._tiles)i.dispose();this._tiles=null,this._tileCache.clear(),this._tileCache=null}update(e){this._updateCacheSize(e);const i=this.tileInfoView,t=i.getTileCoverage(e.state,0,\"smallest\"),{spans:r,lodInfo:o}=t,{level:n}=o,a=this._tiles,c=new Set,h=new Set;for(const{row:s,colFrom:_,colTo:f}of r)for(let e=_;e<=f;e++){const i=l.getId(n,s,o.normalizeCol(e),o.getWorldForColumn(e)),t=this._getOrAcquireTile(i);c.add(i),t.processed()?this._addToContainer(t):h.add(new l(i))}for(const[s,l]of a)l.isCoverage=c.has(s);for(const s of h)this._findPlaceholdersForMissingTiles(s,c);let d=!1;for(const[s,l]of a)l.neededForCoverage=c.has(s),l.neededForCoverage||l.isHoldingForFade&&i.intersects(t,l.key)&&c.add(s),l.isFading&&(d=!0);for(const[s,l]of this._tiles)c.has(s)||this._releaseTile(s);return s.pool.release(t),!d}clear(){this._tiles.clear(),this._tileCache.clear(),this._visibleTiles.clear()}clearCache(){this._tileCache.clear()}_findPlaceholdersForMissingTiles(e,i){const t=[];for(const[l,r]of this._tiles)this._addPlaceholderChild(t,r,e,i);const s=t.reduce(n,0);Math.abs(1-s)<o||this._addPlaceholderParent(e.id,i)}_addPlaceholderChild(e,i,t,s){i.key.level<=t.level||!i.hasData()||h(t,i.key)&&(this._addToContainer(i),s.add(i.id),e.push(i.key.level-t.level))}_addPlaceholderParent(e,i){const t=this._tiles;let s=e;for(;;){if(s=c(s),!s||i.has(s))return;const e=t.get(s);if(e&&e.hasData())return this._addToContainer(e),void i.add(e.id)}}_getOrAcquireTile(e){let i=this._tiles.get(e);return i||(i=this._tileCache.pop(e),i||(i=this.acquireTile(new l(e))),this._tiles.set(e,i),i)}_releaseTile(e){const i=this._tiles.get(e);this.releaseTile(i),this._removeFromContainer(i),this._tiles.delete(e),i.hasData()?this._tileCache.put(e,i,1):i.dispose()}_addToContainer(e){let s;const l=[],r=this._container;if(r.contains(e))return;const o=this._visibleTiles;for(const[t,n]of o)this._canConnectDirectly(e,n)&&l.push(n),i(s)&&this._canConnectDirectly(n,e)&&(s=n);if(t(s)){for(const i of l)s.childrenTiles.delete(i),e.childrenTiles.add(i),i.parentTile=e;s.childrenTiles.add(e),e.parentTile=s}else for(const i of l)e.childrenTiles.add(i),i.parentTile=e;o.set(e.id,e),r.addChild(e)}_removeFromContainer(e){if(this._visibleTiles.delete(e.id),this._container.removeChild(e),t(e.parentTile)){e.parentTile.childrenTiles.delete(e);for(const i of e.childrenTiles)t(e.parentTile)&&e.parentTile.childrenTiles.add(i)}for(const i of e.childrenTiles)i.parentTile=e.parentTile;e.parentTile=null,e.childrenTiles.clear()}_canConnectDirectly(e,i){const t=e.key;let{level:s,row:l,col:r,world:o}=i.key;const n=this._visibleTiles;for(;s>0;){if(s--,l>>=1,r>>=1,t.level===s&&t.row===l&&t.col===r&&t.world===o)return!0;if(n.has(`${s}/${l}/${r}/${o}`))return!1}return!1}_updateCacheSize(e){const i=e.state.size;if(i[0]===this._viewSize[0]&&i[1]===this._viewSize[1])return;const t=Math.ceil(i[0]/r)+1,s=Math.ceil(i[1]/r)+1;this._viewSize[0]=i[0],this._viewSize[1]=i[1],this._tileCache.maxSize=5*t*s}}function c(e){const[i,t,s,l]=e.split(\"/\"),r=parseInt(i,10);return 0===r?null:`${r-1}/${parseInt(t,10)>>1}/${parseInt(s,10)>>1}/${parseInt(l,10)}`}function h(e,i){const t=i.level-e.level;return e.row===i.row>>t&&e.col===i.col>>t&&e.world===i.world}export{a as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Evented.js\";import{isSome as e}from\"../../../../../core/maybe.js\";import{DECLUTTER_BUDGET as i,FADE_DURATION as s}from\"./config.js\";import{VTLUniqueSymbol as o}from\"./core.js\";import{CollisionJob as r}from\"./jobs.js\";import{SymbolDeclutterer as l}from\"./SymbolDeclutterer.js\";import{SymbolRepository as a}from\"./SymbolRepository.js\";import{writeOpacityToBuffers as h}from\"./util.js\";const c=.5;class n extends t{constructor(t,e){super(),this.styleRepository=t,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._completed=!1,this._symbolRepository=new a(4096,e,(()=>new o)),this._symbolDeclutterer=new l(e,this._symbolRepository,((t,e,i)=>new r(t,e,i,this.styleRepository,this._zoom,this._viewState.rotation)),((t,e)=>{t.allSymbolsFadingOut=!0,t.lastOpacityUpdate=e,h(t,e,!0),t.decluttered=!0,t.requestRender()}),((t,e)=>this.styleRepository.getStyleLayerByUID(t.styleLayerUID).z-this.styleRepository.getStyleLayerByUID(e.styleLayerUID).z),(t=>{const e=this.styleRepository.getStyleLayerByUID(t);if(this._zoom<e.minzoom||this._zoom>e.maxzoom)return!1;const i=e.getLayoutProperty(\"visibility\");return!i||1!==i.getValue()}))}addTile(t){t.decluttered=!1,this._tileToHandle.set(t,t.on(\"symbols-changed\",(()=>{this._symbolRepository.add(t),this.restartDeclutter()}))),this._symbolRepository.add(t),this.restartDeclutter()}removeTile(t){const e=this._tileToHandle.get(t);e&&(this._symbolRepository.removeTile(t),this.restartDeclutter(),e.remove(),this._tileToHandle.delete(t))}update(t,e){return this._zoom=t,this._viewState={scale:e.scale,rotation:e.rotation,center:[e.center[0],e.center[1]],size:[e.size[0],e.size[1]]},this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((t=>t.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(t){this._symbolRepository.deleteStyleLayers(t)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(i),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){e(this._stableNotificationHandle)&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this.emit(\"fade-complete\")}),(1+c)*s)}_notifyUnstable(){e(this._stableNotificationHandle)&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this.emit(\"fade-start\")}}export{n as SymbolFader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as s}from\"../../../../chunks/mat3f32.js\";import{TiledDisplayObject as r}from\"./TiledDisplayObject.js\";class t extends r{_createTransforms(){return{dvs:s(),tileMat3:s()}}}export{t as RenderableTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,unwrap as s}from\"../../../../core/maybe.js\";import{createResolver as r}from\"../../../../core/promiseUtils.js\";import{create as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{SymbolFader as o}from\"./decluttering/SymbolFader.js\";import{WGLDrawPhase as l}from\"../webgl/enums.js\";import{RenderableTile as n}from\"../webgl/RenderableTile.js\";import a from\"../webgl/TileContainer.js\";import d from\"../../tiling/TileCoverage.js\";import h from\"../../tiling/TileKey.js\";const c=1e-6;function y(e,t){if(e){const s=e.getLayoutProperty(\"visibility\");if(!s||1!==s.getValue()&&(void 0===e.minzoom||e.minzoom<t+c)&&(void 0===e.maxzoom||e.maxzoom>=t-c))return!0}return!1}class p extends a{constructor(e){super(e),this._backgroundTiles=[],this._pointToCallbacks=new Map}destroy(){this.removeAllChildren(),this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null),e(this._symbolFader)&&(this._symbolFader.clear(),this._symbolFader=null),this._styleRepository=null,this._backgroundTiles=[],this._pointToCallbacks.clear()}setStyleResources(e,r,i){if(this._spriteMosaic=e,this._glyphMosaic=r,this._styleRepository=i,t(this._symbolFader)){const e=new o(this._styleRepository,this.children);e.on(\"fade-start\",(()=>{this.emit(\"fade-start\"),this.requestRender()})),e.on(\"fade-complete\",(()=>{this.emit(\"fade-complete\"),this.requestRender()})),this._symbolFader=e}s(this._symbolFader).styleRepository=i}deleteStyleLayers(t){e(this._symbolFader)&&this._symbolFader.deleteStyleLayers(t)}async hitTest(e,t){const s=[e,t],i=r();return this._pointToCallbacks.set(s,i),this.requestRender(),i.promise}enterTileInvalidation(){for(const e of this.children)e.invalidating=!0}createRenderParams(e){return{...super.createRenderParams(e),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}}doRender(e){!this.visible||e.drawPhase!==l.MAP&&e.drawPhase!==l.DEBUG||void 0===this._spriteMosaic||super.doRender(e)}addChild(t){return super.addChild(t),e(this._symbolFader)?this._symbolFader.addTile(t):t.decluttered=!0,this.requestRender(),t}removeChild(t){return e(this._symbolFader)&&this._symbolFader.removeTile(t),this.requestRender(),super.removeChild(t)}renderChildren(e){if(e.drawPhase!==l.DEBUG){if(this._doRender(e),this._pointToCallbacks.size>0){const{context:t}=e,s=t.getBoundFramebufferObject();e.drawPhase=l.HITTEST;const r=e.painter.effects.hittest;r.bind(e),this._doRender(e),r.draw(e,this._pointToCallbacks),t.bindFramebuffer(s)}}else super.renderChildren(e)}removeAllChildren(){for(let t=0;t<this.children.length;t++){const s=this.children[t];e(this._symbolFader)&&this._symbolFader.removeTile(s),s.dispose()}super.removeAllChildren()}getStencilTarget(){return this.children.filter((e=>e.neededForCoverage&&e.hasData()))}restartDeclutter(){e(this._symbolFader)&&this._symbolFader.restartDeclutter()}_doRender(e){const{context:t}=e,s=this._styleRepository;if(!s)return;const r=s.layers;let i=!0;e.drawPhase===l.HITTEST&&(i=!1),s.backgroundBucketIds.length>0&&(e.renderPass=\"background\",this._renderBackgroundLayers(e,s.backgroundBucketIds)),super.renderChildren(e),e.drawPhase===l.MAP&&this._fade(e.displayLevel,e.state);const o=this.children.filter((e=>e.visible&&e.hasData()));if(o&&0!==o.length){for(const e of o)e.triangleCount=0;t.setStencilWriteMask(0),t.setColorMask(!0,!0,!0,!0),t.setStencilOp(7680,7680,7681),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setDepthTestEnabled(!0),t.setDepthWriteEnabled(!0),t.setDepthFunction(515),t.setClearDepth(1),t.clear(t.gl.DEPTH_BUFFER_BIT),e.renderPass=\"opaque\";for(let t=r.length-1;t>=0;t--)this._renderStyleLayer(r[t],e,o);t.setDepthWriteEnabled(!1),t.setBlendingEnabled(i),t.setBlendFunctionSeparate(1,771,1,771),e.renderPass=\"translucent\";for(let t=0;t<r.length;t++)this._renderStyleLayer(r[t],e,o);t.setDepthTestEnabled(!1),e.renderPass=\"symbol\";for(let t=0;t<r.length;t++)this._renderStyleLayer(r[t],e,o);t.bindVAO(),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0)}}_fade(t,s){e(this._symbolFader)&&(this._symbolFader.update(t,s)||this.requestRender())}_renderStyleLayer(e,t,s){const{painter:r,renderPass:i}=t;if(void 0===e)return;const o=e.getLayoutProperty(\"visibility\");if(o&&1===o.getValue())return;let l;switch(e.type){case 0:return;case 1:if(\"opaque\"!==i&&\"translucent\"!==t.renderPass)return;l=\"vtlFill\";break;case 2:if(\"translucent\"!==i)return;l=\"vtlLine\";break;case 4:if(\"symbol\"!==i)return;l=\"vtlCircle\";break;case 3:if(\"symbol\"!==i)return;l=\"vtlSymbol\"}if(s=3===e.type?s.filter((e=>e.decluttered)):s.filter((e=>e.neededForCoverage)),\"vtlSymbol\"!==l){const r=t.displayLevel;if(0===s.length||void 0!==e.minzoom&&e.minzoom>=r+c||void 0!==e.maxzoom&&e.maxzoom<r-c)return}const n=e.uid;t.styleLayerUID=n,t.styleLayer=e;for(const a of s)if(a.layerData.has(n)){r.renderObjects(t,s,l);break}}_renderBackgroundLayers(t,s){const{context:r,displayLevel:o,painter:a,state:c}=t,p=this._styleRepository;let u=!1;for(const e of s)if(y(p.getLayerById(e),o)){u=!0;break}if(!u)return;const m=this._tileInfoView.getTileCoverage(t.state,0,\"smallest\"),{spans:f,lodInfo:b}=m,{level:_}=b,g=i(),T=[];if(this._renderPasses){const s=this._renderPasses[0];e(this._clippingInfos)&&(s.brushes[0].prepareState(t,this._clippingInfos[0]),s.brushes[0].drawMany(t,this._clippingInfos))}const v=this._backgroundTiles;let F,C=0;for(const{row:e,colFrom:l,colTo:d}of f)for(let t=l;t<=d;t++){if(C<v.length)F=v[C],F.key.set(_,e,b.normalizeCol(t),b.getWorldForColumn(t)),this._tileInfoView.getTileBounds(g,F.key,!1),F.x=g[0],F.y=g[3];else{const s=new h(_,e,b.normalizeCol(t),b.getWorldForColumn(t)),r=this._tileInfoView.getTileBounds(i(),s);F=new n(s,r[0],r[3],512,512,4096,4096),v.push(F)}F.setTransform(c,this._tileInfoView.getTileResolution(F.key)),T.push(F),C++}r.setStencilWriteMask(0),r.setColorMask(!0,!0,!0,!0),r.setStencilOp(7680,7680,7681),r.setStencilFunction(514,0,255);let k=!0;t.drawPhase===l.HITTEST&&(k=!1),r.setStencilTestEnabled(k);for(const e of s){const s=p.getLayerById(e);y(s,o)&&(t.styleLayerUID=s.uid,t.styleLayer=s,a.renderObjects(t,T,\"vtlBackground\"))}d.pool.release(m)}}export{p as VectorTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Bitmap as t}from\"../../engine/Bitmap.js\";import{BitmapContainer as e}from\"../../engine/BitmapContainer.js\";class i extends e{constructor(e){super(),this.requestRender=this.requestRender.bind(this),this._layerView=e,this._canvas=document.createElement(\"canvas\"),this._context=this._canvas.getContext(\"2d\"),this._bitmap=new t(null,\"standard\",!1),this.addChild(this._bitmap)}doRender(t){const e=t.state,i=this._createCustomRenderParams(t),a=i.pixelRatio,s=this._canvas,n=this._bitmap;s.width=e.size[0]*a,s.height=e.size[1]*a,n.resolution=e.resolution,n.pixelRatio=a,n.x=e.viewpoint.targetGeometry.x-Math.abs(e.extent.xmax-e.extent.xmin)/2,n.y=e.viewpoint.targetGeometry.y+Math.abs(e.extent.ymax-e.extent.ymin)/2,this._layerView.render(i),n.source=s,n.rotation=e.rotation,super.doRender(t)}_createCustomRenderParams(t){const e=window.devicePixelRatio,i={...t.state,pixelRatio:e};return{...t,pixelRatio:e,context:this._context,state:i}}}export{i as Display,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../layers/support/TileInfo.js\";import l from\"./TileInfoView.js\";import s from\"./TileKey.js\";class t extends l{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(e){const l=s.pool.acquire(e),t=0===l.level?null:s.getId(l.level-1,l.row>>1,l.col>>1,l.world);return s.pool.release(l),t}getTileCoverage(e,l,s){const t=super.getTileCoverage(e,l,s);if(!t)return t;const o=1<<t.lodInfo.level;return t.spans=t.spans.filter((e=>e.row>=0&&e.row<o)),t}scaleToLevel(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];{const l=this._fullCacheLodInfos;if(e>l[0].scale)return l[0].level;let s,t;for(let o=0;o<l.length-1;o++)if(t=l[o+1],e>t.scale)return s=l[o],s.level+(s.scale-e)/(s.scale-t.scale);return l[l.length-1].level}}_initializeFullCacheLODs(l){let s;if(0===l[0].level)s=l.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})));else{const l=this.tileInfo.size[0],t=this.tileInfo.spatialReference;s=e.create({size:l,spatialReference:t}).lods.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})))}for(let e=0;e<s.length;e++)this._levelByScale[s[e].scale]=s[e].level;this._fullCacheLodInfos=s}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import i from\"../../../core/Error.js\";import s from\"../../../core/Handles.js\";import{clone as r}from\"../../../core/lang.js\";import a from\"../../../core/Logger.js\";import{isNone as l}from\"../../../core/maybe.js\";import{isAbortError as o,createAbortController as n}from\"../../../core/promiseUtils.js\";import{init as h}from\"../../../core/watchUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{diff as y,hasDiff as p}from\"../../../core/accessorSupport/diffUtils.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{TileHandler as _}from\"../engine/vectorTiles/TileHandler.js\";import{TileManager as f}from\"../engine/vectorTiles/TileManager.js\";import{VectorTile as g}from\"../engine/vectorTiles/VectorTile.js\";import{VectorTileContainer as m}from\"../engine/vectorTiles/VectorTileContainer.js\";import{drawColliders as T}from\"../engine/vectorTiles/decluttering/debugging.js\";import v from\"../engine/vectorTiles/style/StyleRepository.js\";import{LayerView2DMixin as C}from\"./LayerView2D.js\";import{Display as w}from\"./support/Display.js\";import Q from\"../tiling/TileInfoViewPOT.js\";import H from\"../tiling/TileQueue.js\";import R from\"../../layers/LayerView.js\";const b=a.getLogger(\"esri.views.2d.layers.VectorTileLayerView2D\");let j=class extends(C(R)){constructor(){super(...arguments),this._styleChanges=[],this._handles=new s,this._fetchQueue=null,this._parseQueue=null,this._isTileHandlerReady=!1,this.fading=!1}initialize(){const e=this.layer.tileInfo;if(!(e&&e.spatialReference).equals(this.view.spatialReference))return void this.addResolvingPromise(Promise.reject(new i(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})));const{style:t,spriteUrl:s,glyphsUrl:r}=this.layer.currentStyleInfo;this._styleRepository=new v(t,{spriteUrl:s,glyphsUrl:r}),this._tileInfoView=new Q(this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new m(this._tileInfoView),this._tileHandler=new _(this.layer,this._styleRepository,window.devicePixelRatio||1),this.container.addChild(this._vectorTileContainer),this.handles.add([this._vectorTileContainer.on(\"fade-start\",(()=>{this.fading=!0,this.notifyChange(\"updating\"),this.requestUpdate()})),this._vectorTileContainer.on(\"fade-complete\",(()=>{this._collisionBoxesDisplay&&this._collisionBoxesDisplay.requestRender(),this.fading=!1,this.notifyChange(\"updating\"),this.requestUpdate()})),h(this.layer,\"symbolCollisionBoxesVisible\",(e=>{e?(this._collisionBoxesDisplay=new w({render:e=>this._renderCollisionBoxes(e.context)}),this.container.addChild(this._collisionBoxesDisplay)):(this.container.removeChild(this._collisionBoxesDisplay),this._collisionBoxesDisplay=null)}))])}destroy(){var e;this._stop(),this.container.removeAllChildren(),this._vectorTileContainer&&(this._vectorTileContainer.destroy(),this._vectorTileContainer=null),null==(e=this._tileHandler)||e.destroy(),this._tileHandler=null}async hitTest(e,i){if(this.suspended||!this._tileHandlerPromise)return null;await this._tileHandlerPromise;const s=await this._vectorTileContainer.hitTest(e,i);if(!s||0===s.length)return null;const r=s[0]-1,a=this._styleRepository,l=a.getStyleLayerByUID(r);if(!l)return null;const o=a.getStyleLayerIndex(l.id),n=new t({attributes:{layerId:o,layerName:l.id,layerUID:r}});return n.layer=this.layer,n.sourceLayer=this.layer,n}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){this._start(),this._handles.add([this.layer.on(\"paint-change\",(e=>{if(e.isDataDriven)this._styleChanges.push({type:0,data:e}),this.notifyChange(\"updating\"),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=3===i.type;t.setPaintProperties(e.layer,e.paint),s&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()}})),this.layer.on(\"layout-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=y(i.layout,e.layout);if(!l(s)){if(p(s,\"visibility\")&&1===D(s))return t.setLayoutProperties(e.layer,e.layout),3===i.type&&this._vectorTileContainer.restartDeclutter(),void this._vectorTileContainer.requestRender();this._styleChanges.push({type:1,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()}})),this.layer.on(\"style-layer-visibility-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(t.setStyleLayerVisibility(e.layer,e.visibility),3===i.type&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())})),this.layer.on(\"style-layer-change\",(e=>{this._styleChanges.push({type:2,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()})),this.layer.on(\"delete-style-layer\",(e=>{this._styleChanges.push({type:3,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()})),this.layer.on(\"load-style\",(()=>this._loadStyle()))])}detach(){this._stop(),this._handles.removeAll()}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this._collisionBoxesDisplay&&this._vectorTileContainer.restartDeclutter(),this.requestUpdate()}canResume(){let e=super.canResume();const t=this.layer;if(e&&t.currentStyleInfo){const i=this.view.scale,s=t.currentStyleInfo;if(s&&s.layerDefinition){const t=s.layerDefinition;t.minScale&&t.minScale<i&&(e=!1),t.maxScale&&t.maxScale>i&&(e=!1)}}return e}isUpdating(){const e=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||e.length>0&&e.filter((e=>e.invalidating)).length>0||this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._tileHandlerPromise.then((()=>{this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once(\"attach\",(()=>this.requestUpdate())),e&&(t.setData(e.tileData),this.requestUpdate(),this.notifyChange(\"updating\"))})).catch((e=>{this.notifyChange(\"updating\"),o(e)||b.error(e)}))})),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new f({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new H({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15}),this._parseQueue=new H({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue&&(this._fetchQueue.destroy(),this._fetchQueue=null),this._parseQueue&&(this._parseQueue.destroy(),this._parseQueue=null),this._tileManager&&(this._tileManager.destroy(),this._tileManager=null),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){const i=await this._tileHandler.fetchTileData(e,t);return this.notifyChange(\"updating\"),i}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){b.error(\"error applying vector-tiles style update\",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const t=this._styleRepository,i=[];e.forEach((e=>{if(3!==e.type)return;const s=e.data,r=t.getLayerById(s.layer);r&&i.push(r.uid)}));const s=[];let r;e.forEach((e=>{const i=e.type,a=e.data;switch(i){case 0:t.setPaintProperties(a.layer,a.paint),r=a.layer;break;case 1:t.setLayoutProperties(a.layer,a.layout),r=a.layer;break;case 3:return void t.deleteStyleLayer(a.layer);case 2:t.setStyleLayer(a.layer,a.index),r=a.layer.id}const l=t.getLayerById(r);l&&s.push(l.uid)}));const a=this._vectorTileContainer.children;if(i.length>0){this._vectorTileContainer.deleteStyleLayers(i);for(const e of a)e.deleteLayerData(i)}if(this._fetchQueue.resume(),this._parseQueue.resume(),s.length>0){const e=[];for(const t of a){const i=this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e,styleLayerUIDs:s}))).then((e=>t.setData(e.tileData)));e.push(i)}await Promise.all(e)}this._styleChanges=[],this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),this.requestUpdate()}async _loadStyle(){const{style:e,spriteUrl:t,glyphsUrl:i}=this.layer.currentStyleInfo,s=r(e);this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this.notifyChange(\"updating\"),this._styleRepository=new v(s,{spriteUrl:t,glyphsUrl:i}),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=n();const{signal:a}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,s),await this._tileHandlerPromise}catch(h){if(!o(h))throw h}if(a.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),void this.requestUpdate();const l=await this._tileHandler.spriteMosaic;this._vectorTileContainer.setStyleResources(l,this._tileHandler.glyphMosaic,this._styleRepository),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),this.requestUpdate()}_createVectorTile(e){const t=this._tileInfoView.getTileBounds(d(),e);return new g(e,t[0],t[3],512,512,this._styleRepository)}_renderCollisionBoxes(e){for(const t of this._vectorTileContainer.children)if(t.symbols){const i=[];for(const[e,s]of t.symbols)i.push(...s);T(e,i)}}};function D(e){if(l(e))return 0;switch(e.type){case\"partial\":return Object.keys(e.diff).length;case\"complete\":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case\"collection\":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}e([u()],j.prototype,\"_fetchQueue\",void 0),e([u()],j.prototype,\"_parseQueue\",void 0),e([u()],j.prototype,\"_isTileHandlerReady\",void 0),e([u()],j.prototype,\"suspended\",void 0),e([u()],j.prototype,\"fading\",void 0),e([u()],j.prototype,\"updating\",void 0),j=e([c(\"esri.views.2d.layers.VectorTileLayerView2D\")],j);var U=j;export{U as default};\n"],"names":["n","e2","i2","constructor","t2","_tiles","Map","this","_tileCache","e","dispose","_viewSize","_visibleTiles","acquireTile","releaseTile","tileInfoView","_container","destroy","clear","update","_updateCacheSize","getTileCoverage","state","spans","r2","lodInfo","o2","level","n2","a2","c2","Set","h2","row","s2","colFrom","_","colTo","f2","e3","i3","l","getId","normalizeCol","getWorldForColumn","t3","_getOrAcquireTile","add","processed","_addToContainer","l2","isCoverage","has","_findPlaceholdersForMissingTiles","d2","neededForCoverage","isHoldingForFade","intersects","key","isFading","_releaseTile","s","pool","release","clearCache","_addPlaceholderChild","reduce","abs","_addPlaceholderParent","id","hasData","col","world","h","push","c","get","pop","set","_removeFromContainer","delete","put","contains","_canConnectDirectly","i","t","childrenTiles","parentTile","addChild","removeChild","size","Math","ceil","maxSize","split","parseInt","styleRepository","_tileToHandle","_viewState","scale","rotation","center","_declutterViewState","_completed","_symbolRepository","a","o","_symbolDeclutterer","r","_zoom","allSymbolsFadingOut","lastOpacityUpdate","decluttered","requestRender","getStyleLayerByUID","styleLayerUID","z","minzoom","maxzoom","getLayoutProperty","getValue","addTile","on","restartDeclutter","removeTile","remove","_continueDeclutter","restart","_notifyUnstable","forEach","_declutterZoom","deleteStyleLayers","stale","running","setScreenSize","continue","_scheduleNotifyStable","_stableNotificationHandle","clearTimeout","setTimeout","emit","_createTransforms","dvs","tileMat3","_backgroundTiles","_pointToCallbacks","removeAllChildren","_spriteMosaic","_glyphMosaic","_symbolFader","_styleRepository","setStyleResources","children","promise","enterTileInvalidation","invalidating","createRenderParams","__spreadProps","super","renderPass","styleLayer","glyphMosaic","spriteMosaic","hasClipping","_clippingInfos","doRender","visible","drawPhase","MAP","DEBUG","renderChildren","_doRender","context","getBoundFramebufferObject","HITTEST","painter","effects","hittest","bind","draw","bindFramebuffer","length","getStencilTarget","filter","layers","backgroundBucketIds","_renderBackgroundLayers","_fade","displayLevel","triangleCount","setStencilWriteMask","setColorMask","setStencilOp","setStencilTestEnabled","setBlendingEnabled","setDepthTestEnabled","setDepthWriteEnabled","setDepthFunction","setClearDepth","gl","DEPTH_BUFFER_BIT","_renderStyleLayer","setBlendFunctionSeparate","bindVAO","type","r3","uid","layerData","renderObjects","p2","u","y","getLayerById","m2","_tileInfoView","b2","g2","T","_renderPasses","s3","brushes","prepareState","drawMany","v","F","C","getTileBounds","x","setTransform","getTileResolution","setStencilFunction","k","_layerView","_canvas","document","createElement","_context","getContext","_bitmap","_createCustomRenderParams","pixelRatio","width","height","resolution","viewpoint","targetGeometry","extent","xmax","xmin","ymax","ymin","render","source","window","devicePixelRatio","arguments","_fullCacheLodInfos","_levelByScale","getTileParentId","acquire","scaleToLevel","_initializeFullCacheLODs","_lodInfos","map","l3","tileInfo","spatialReference","create","lods","b","getLogger","j","R","_styleChanges","_handles","_fetchQueue","_parseQueue","_isTileHandlerReady","fading","initialize","layer","equals","view","addResolvingPromise","Promise","reject","style","spriteUrl","glyphsUrl","currentStyleInfo","Q","fullExtent","_vectorTileContainer","m","_tileHandler","container","handles","notifyChange","requestUpdate","_collisionBoxesDisplay","w","_renderCollisionBoxes","e4","_stop","suspended","_tileHandlerPromise","hitTest","getStyleLayerIndex","attributes","layerId","layerName","layerUID","sourceLayer","_start","_applyStyleChanges","pause","_tileManager","resume","attach","isDataDriven","data","setPaintProperties","paint","layout","p","Object","keys","diff","max","oldValue","newValue","added","changed","removed","D","setLayoutProperties","setStyleLayerVisibility","visibility","_loadStyle","detach","removeAll","moveStart","viewChange","moveEnd","canResume","layerDefinition","minScale","maxScale","isUpdating","updating","_createVectorTile","then","once","setData","tileData","catch","error","abort","f","AbortController","start","signal","H","process","_getTileData","concurrency","_parseTileData","_tileHandlerAbortController","fetchTileData","parseTileData","updateStyle","message","a3","deleteStyleLayer","setStyleLayer","index","deleteLayerData","styleLayerUIDs","all","setStyle","aborted","d","g","symbols","prototype","U"],"mappings":"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"}