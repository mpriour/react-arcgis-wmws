import{aN as n,P as t,aP as r,aL as e,aO as i,aY as l,aQ as o,Z as u,aU as a,aZ as s}from"./vendor.7103ff48.js";import{w as f,z as c,k as g,$ as h,b as d,J as w,n as m,x as A,A as p,F as y,G as E,H as I,K as F,Q as b,U as R,g as x,V as N,X as S,_ as Z,a0 as O,a1 as j}from"./arcadeUtils.39046be5.js";import{S as M,g as P,A as k,w as v,x as z,p as L,O as J,d as U,h as C,j as Q,k as T,R as V,E as W,l as q,y as G,W as H,K,F as X,M as Y,m as _,P as B,U as D,G as $,V as nn,b as tn,I as rn,q as en,J as ln,v as on}from"./geometryEngineAsync.37052085.js";import"./number.94b5b5ed.js";import"./FeatureSetReader.bfb25a2d.js";import"./centroid.f07ef5b9.js";function un(n){return 0===l.indexOf("4.")?i.fromExtent(n):new i({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function an(t){if(c(t,2,2),t[0]instanceof n&&t[1]instanceof n);else if(t[0]instanceof n&&null===t[1]);else if(t[1]instanceof n&&null===t[0]);else if(null!==t[0]||null!==t[1])throw new Error("Illegal Argument")}function sn(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return a(0);let e=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(e=O(n.spatialReference)/s(n.spatialReference));let i=0;if("polyline"===n.type)for(const r of n.paths)for(let n=1;n<r.length;n++)i+=j(r[n],r[n-1],e);else if("polygon"===n.type)for(const r of n.rings){for(let n=1;n<r.length;n++)i+=j(r[n],r[n-1],e);(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||void 0!==r[0][2]&&r[0][2]!==r[r.length-1][2])&&(i+=j(r[0],r[r.length-1],e))}else"extent"===n.type&&(i+=2*j([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],e),i+=2*j([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],e),i*=2,i+=4*Math.abs(E(n.zmax,0)*e-E(n.zmin,0)*e));const l=new r({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,i]]});return X(l,t)}function fn(l){"async"===l.mode&&(l.functions.disjoint=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null===r[0]||null===r[1]||M(r[0],r[1])}))},l.functions.intersects=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&P(r[0],r[1])}))},l.functions.touches=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&k(r[0],r[1])}))},l.functions.crosses=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&v(r[0],r[1])}))},l.functions.within=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&z(r[0],r[1])}))},l.functions.contains=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&L(r[0],r[1])}))},l.functions.overlaps=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null!==r[1]&&J(r[0],r[1])}))},l.functions.equals=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){return c(e,2,2),e[0]===e[1]||(e[0]instanceof n&&e[1]instanceof n?U(e[0],e[1]):!(!g(e[0])||!g(e[1]))&&e[0].getTime()===e[1].getTime())}))},l.functions.relate=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,3,3),e[0]instanceof n&&e[1]instanceof n)return C(e[0],e[1],h(e[2]));if(e[0]instanceof n&&null===e[1])return!1;if(e[1]instanceof n&&null===e[0])return!1;if(null===e[0]&&null===e[1])return!1;throw new Error("Illegal Argument")}))},l.functions.intersection=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null===r[0]||null===r[1]?null:Q(r[0],r[1])}))},l.functions.union=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){const l=[];if(0===(i=f(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(d(i[0])){const t=f(i[0]);for(let r=0;r<t.length;r++)if(null!==t[r]){if(!(t[r]instanceof n))throw new Error("Illegal Argument");l.push(t[r])}}else{if(!w(i[0])){if(i[0]instanceof n)return m(A(i[0]),t.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const t=f(i[0].toArray());for(let r=0;r<t.length;r++)if(null!==t[r]){if(!(t[r]instanceof n))throw new Error("Illegal Argument");l.push(t[r])}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof n))throw new Error("Illegal Argument");l.push(i[t])}return 0===l.length?null:T(l)}))},l.functions.difference=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null!==r[0]&&null===r[1]?A(r[0]):null===r[0]?null:V(r[0],r[1])}))},l.functions.symmetricdifference=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=f(r)),null===r[0]&&null===r[1]?null:null===r[0]?A(r[1]):null===r[1]?A(r[0]):W(r[0],r[1])}))},l.functions.clip=function(r,e){return l.standardFunctionAsync(r,e,(function(r,e,i){if(i=f(i),c(i,2,2),!(i[1]instanceof t)&&null!==i[1])throw new Error("Illegal Argument");if(null===i[0])return null;if(!(i[0]instanceof n))throw new Error("Illegal Argument");return null===i[1]?null:q(i[0],i[1])}))},l.functions.cut=function(t,e){return l.standardFunctionAsync(t,e,(function(t,e,i){if(i=f(i),c(i,2,2),!(i[1]instanceof r)&&null!==i[1])throw new Error("Illegal Argument");if(null===i[0])return[];if(!(i[0]instanceof n))throw new Error("Illegal Argument");return null===i[1]?[A(i[0])]:G(i[0],i[1])}))},l.functions.area=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(c(i,1,2),null===(i=f(i))[0])return 0;if(p(i[0]))return i[0].sumArea(y(E(i[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=I(i[0],t.spatialReference);return null===n?0:H(n,y(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return H(i[0],y(E(i[1],-1)))}))},l.functions.areageodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(c(i,1,2),null===(i=f(i))[0])return 0;if(p(i[0]))return i[0].sumArea(y(E(i[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=I(i[0],t.spatialReference);return null===n?0:K(n,y(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return K(i[0],y(E(i[1],-1)))}))},l.functions.length=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(c(i,1,2),null===(i=f(i))[0])return 0;if(p(i[0]))return i[0].sumLength(F(E(i[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=b(i[0],t.spatialReference);return null===n?0:X(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return X(i[0],F(E(i[1],-1)))}))},l.functions.length3d=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(c(i,1,2),null===(i=f(i))[0])return 0;if(d(i[0])||w(i[0])){const n=b(i[0],t.spatialReference);return null===n?0:!0===n.hasZ?sn(n,F(E(i[1],-1))):X(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return!0===i[0].hasZ?sn(i[0],F(E(i[1],-1))):X(i[0],F(E(i[1],-1)))}))},l.functions.lengthgeodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(c(i,1,2),null===(i=f(i))[0])return 0;if(p(i[0]))return i[0].sumLength(F(E(i[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=b(i[0],t.spatialReference);return null===n?0:Y(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return Y(i[0],F(E(i[1],-1)))}))},l.functions.distance=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){i=f(i),c(i,2,3);let l=i[0];(d(i[0])||w(i[0]))&&(l=R(i[0],t.spatialReference));let o=i[1];if((d(i[1])||w(i[1]))&&(o=R(i[1],t.spatialReference)),!(l instanceof n))throw new Error("Illegal Argument");if(!(o instanceof n))throw new Error("Illegal Argument");return _(l,o,F(E(i[2],-1)))}))},l.functions.distancegeodetic=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,i){i=f(i),c(i,2,3);const l=i[0],o=i[1];if(!(l instanceof e))throw new Error("Illegal Argument");if(!(o instanceof e))throw new Error("Illegal Argument");const u=new r({paths:[],spatialReference:l.spatialReference});return u.addPath([l,o]),Y(u,F(E(i[2],-1)))}))},l.functions.densify=function(e,o){return l.standardFunctionAsync(e,o,(function(e,l,o){if(o=f(o),c(o,2,3),null===o[0])return null;if(!(o[0]instanceof n))throw new Error("Illegal Argument");const u=x(o[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return o[0]instanceof i||o[0]instanceof r?B(o[0],u,F(E(o[2],-1))):o[0]instanceof t?B(un(o[0]),u,F(E(o[2],-1))):o[0]}))},l.functions.densifygeodetic=function(e,o){return l.standardFunctionAsync(e,o,(function(e,l,o){if(o=f(o),c(o,2,3),null===o[0])return null;if(!(o[0]instanceof n))throw new Error("Illegal Argument");const u=x(o[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return o[0]instanceof i||o[0]instanceof r?D(o[0],u,F(E(o[2],-1))):o[0]instanceof t?D(un(o[0]),u,F(E(o[2],-1))):o[0]}))},l.functions.generalize=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,2,4),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return $(e[0],i,N(E(e[2],!0)),F(E(e[3],-1)))}))},l.functions.buffer=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,2,3),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?A(e[0]):nn(e[0],i,F(E(e[2],-1)))}))},l.functions.buffergeodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,2,3),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?A(e[0]):tn(e[0],i,F(E(e[2],-1)))}))},l.functions.offset=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,e){if(e=f(e),c(e,2,6),null===e[0])return null;if(!(e[0]instanceof i||e[0]instanceof r))throw new Error("Illegal Argument");const l=x(e[1]);if(isNaN(l))throw new Error("Illegal Argument");const o=x(E(e[4],10));if(isNaN(o))throw new Error("Illegal Argument");const u=x(E(e[5],0));if(isNaN(u))throw new Error("Illegal Argument");return rn(e[0],l,F(E(e[2],-1)),h(E(e[3],"round")).toLowerCase(),o,u)}))},l.functions.rotate=function(r,o){return l.standardFunctionAsync(r,o,(function(r,l,o){o=f(o),c(o,2,3);let u=o[0];if(null===u)return null;if(!(u instanceof n))throw new Error("Illegal Argument");u instanceof t&&(u=i.fromExtent(u));const a=x(o[1]);if(isNaN(a))throw new Error("Illegal Argument");const s=E(o[2],null);if(null===s)return en(u,a);if(s instanceof e)return en(u,a,s);throw new Error("Illegal Argument")}))},l.functions.centroid=function(u,a){return l.standardFunctionAsync(u,a,(function(l,a,s){if(s=f(s),c(s,1,1),null===s[0])return null;let g=s[0];if((d(s[0])||w(s[0]))&&(g=R(s[0],u.spatialReference)),null===g)return null;if(!(g instanceof n))throw new Error("Illegal Argument");return g instanceof e?m(A(s[0]),u.spatialReference):g instanceof i?g.centroid:g instanceof r?S(g):g instanceof o?Z(g):g instanceof t?g.center:null}))},l.functions.multiparttosinglepart=function(a,s){return l.standardFunctionAsync(a,s,(function(l,s,g){g=f(g),c(g,1,1);const h=[];if(null===g[0])return null;if(!(g[0]instanceof n))throw new Error("Illegal Argument");return g[0]instanceof e||g[0]instanceof t?[m(A(g[0]),a.spatialReference)]:ln(g[0]).then((n=>{if(n instanceof i){const t=[],r=[];for(let e=0;e<n.rings.length;e++)if(n.isClockwise(n.rings[e])){const r=u({rings:[n.rings[e]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(r)}else r.push({ring:n.rings[e],pt:n.getPoint(e,0)});for(let n=0;n<r.length;n++)for(let e=0;e<t.length;e++)if(t[e].contains(r[n].pt)){t[e].addRing(r[n].ring);break}return t}if(n instanceof r){const t=[];for(let r=0;r<n.paths.length;r++){const e=u({paths:[n.paths[r]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(e)}return t}if(g[0]instanceof o){const n=m(A(g[0]),a.spatialReference);for(let t=0;t<n.points.length;t++)h.push(n.getPoint(t));return h}return null}))}))},l.functions.issimple=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,1,1),null===e[0])return!0;if(!(e[0]instanceof n))throw new Error("Illegal Argument");return on(e[0])}))},l.functions.simplify=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=f(e),c(e,1,1),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");return ln(e[0])}))})}export{fn as registerFunctions};
//# sourceMappingURL=geomasync.54f4ded6.js.map
