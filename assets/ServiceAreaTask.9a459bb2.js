var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,n=(e,r)=>{for(var t in r||(r={}))s.call(r,t)&&o(e,t,r[t]);if(a)for(var t of a(r))i.call(r,t)&&o(e,t,r[t]);return e},l=(e,a)=>r(e,t(a));import{F as p,G as u,aL as y,b3 as c,aP as f,aO as d,D as B,H as m,aa as v,bM as g,B as P,Z as b,X as h,a1 as A,b5 as S,C as O,N as j,b6 as w}from"./vendor.7103ff48.js";import{a as R,u as N,d as k,c as x,p as F,o as I}from"./networkService.6894c31e.js";import"./GPMessage.b19d3dbb.js";function J(e){return e.features.map((r=>{const t=h.fromJSON(e.spatialReference),a=B.fromJSON(r);return A(a.geometry).spatialReference=t,a}))}function M(e){return g(e.features.map((r=>(P(r.geometry)&&(r.geometry.spatialReference=e.spatialReference),b(r.geometry)))))}let q=class extends v{constructor(e){super(e),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(e){return M(e)}readPointBarriers(e,r){return M(r.barriers)}readPolylineBarriers(e){return M(e)}readPolygonBarriers(e){return M(e)}readIncidents(e,r){return J(r.saPolylines)}readServiceAreaPolygons(e,r){return J(r.saPolygons)}};p([u({type:[y]})],q.prototype,"facilities",void 0),p([c("facilities")],q.prototype,"readFacilities",null),p([u({type:[R]})],q.prototype,"messages",void 0),p([u({type:[y]})],q.prototype,"pointBarriers",void 0),p([c("pointBarriers",["barriers"])],q.prototype,"readPointBarriers",null),p([u({type:[f]})],q.prototype,"polylineBarriers",void 0),p([c("polylineBarriers")],q.prototype,"readPolylineBarriers",null),p([u({type:[d]})],q.prototype,"polygonBarriers",void 0),p([c("polygonBarriers")],q.prototype,"readPolygonBarriers",null),p([u({type:[B]})],q.prototype,"serviceAreaPolylines",void 0),p([c("serviceAreaPolylines",["saPolylines"])],q.prototype,"readIncidents",null),p([u({type:[B]})],q.prototype,"serviceAreaPolygons",void 0),p([c("serviceAreaPolygons",["saPolygons"])],q.prototype,"readServiceAreaPolygons",null),q=p([m("esri.rest.support.ServiceAreaSolveResult")],q);var D=q;const E=I({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let G=class extends w{constructor(e){super(e),this.url=null}solve(e,r){return async function(e,r,t){const a=[],s=[],i={},o={},p=S(e),{path:u}=p;r.facilities&&r.facilities.features&&N(r.facilities.features,s,"facilities.features",i),r.pointBarriers&&r.pointBarriers.features&&N(r.pointBarriers.features,s,"pointBarriers.features",i),r.polylineBarriers&&r.polylineBarriers.features&&N(r.polylineBarriers.features,s,"polylineBarriers.features",i),r.polygonBarriers&&r.polygonBarriers.features&&N(r.polygonBarriers.features,s,"polygonBarriers.features",i);const y=await O(s);for(const n in i){const e=i[n];a.push(n),o[n]=y.slice(e[0],e[1])}if(k(o,a)){let e=null;try{e=await x(u,r.apiKey,t)}catch{}e&&!e.hasZ&&F(o,a)}for(const n in o)o[n].forEach(((e,t)=>{r.get(n)[t].geometry=e}));const c=l(n({},t),{query:l(n(n({},p.query),E.toQueryParams(r)),{f:"json"})}),{data:f}=await j(`${u}/solveServiceArea`,c);return D.fromJSON(f)}(this.url,e,r)}};p([u()],G.prototype,"url",void 0),G=p([m("esri.tasks.ServiceAreaTask")],G);var Z=G;export{Z as default};
//# sourceMappingURL=ServiceAreaTask.9a459bb2.js.map
