{"version":3,"file":"SceneService.80256ad0.js","sources":["../../node_modules/@arcgis/core/layers/mixins/SceneService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import\"../../core/has.js\";import o from\"../../core/Logger.js\";import{isSome as i}from\"../../core/maybe.js\";import{debounce as s}from\"../../core/promiseUtils.js\";import{urlToObject as a}from\"../../core/urlUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../../core/accessorSupport/decorators/writer.js\";import{updateOrigins as c}from\"../../core/accessorSupport/originUtils.js\";import u from\"../../geometry/Extent.js\";import m from\"../../geometry/HeightModelInfo.js\";import y from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as h,parse as f,cleanTitle as v,sanitizeUrlWithLayerId as g,writeUrlWithLayerId as S}from\"../support/arcgisLayerUrl.js\";import{id as w,url as I}from\"../support/commonProperties.js\";import{fetchIndexInfo as x}from\"../support/I3SIndexInfo.js\";import b from\"../../portal/Portal.js\";import j from\"../../portal/PortalItem.js\";import{saveResources as _}from\"../../webdoc/support/saveUtils.js\";const R=o.getLogger(\"esri.layers.mixins.SceneService\"),N=o=>{let N=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=s((async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return y.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf(\"/\")+1,r.length),10);return null!=o?new y(o):null}}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return u.fromJSON(o,r)}const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<O))?null:new u({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\",i={major:Number.NaN,minor:Number.NaN,versionString:o},s=o.split(\".\");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if(\"item-title\"===this.sublayerTitleMode)return h(this.url,t.name);let o=t.name;if(!o&&this.url){const e=f(this.url);i(e)&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),v(o)}set url(e){const t=g({layer:this,url:e,nonStandardUrlAllowed:!1,logger:R});this._set(\"url\",t.url),null!=t.layerId&&this._set(\"layerId\",t.layerId)}writeUrl(e,t,r,o){S(this,e,\"layers\",t,o)}get parsedUrl(){const e=this._get(\"url\");if(!e)return null;const t=a(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=x(this.parsedUrl.path,this.rootNode,e,this.apiKey,R,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if(\"page\"===(null==e?void 0:e.type)){var t,o;const i=e.rootIndex%e.pageSize,s=null==(t=e.rootPage)||null==(o=t.nodes)?void 0:o[i];if(null==s||null==s.obb||null==s.obb.center||null==s.obb.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(s.obb.center[0]<O||null==this.fullExtent||this.fullExtent.hasZ)return;const a=s.obb.halfSize,n=s.obb.center[2],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);this.fullExtent.zmin=n-l,this.fullExtent.zmax=n+l}else if(\"node\"===(null==e?void 0:e.type)){var i;const t=null==(i=e.rootNode)?void 0:i.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<O)return;const r=t[2],o=t[3];this.fullExtent.zmin=r-o,this.fullExtent.zmax=r+o}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const o=r.data;this.read(o,{origin:\"service\",url:this.parsedUrl}),this.validateLayer(o)}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),1===r&&(e.typeKeywords=e.typeKeywords.filter((e=>\"Hosted Service\"!==e))))}async _saveAs(e,t){const o={...E,...t};let i=j.from(e);i||(R.error(\"_saveAs(): requires a portal item parameter\"),await Promise.reject(new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||b.getDefault();await this._ensureLoadBeforeSave(),i.type=T,i.portal=s;const a={origin:\"portal-item\",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,a)]};return await Promise.all(a.resources.pendingOperations),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,1),await s._signIn(),await s.user.addItem({item:i,folder:o&&o.folder,data:n}),await _(this.resourceReferences,a,null),this.portalItem=i,c(a),a.portalItem=i,i}async _save(e){const t={...E,...e};this.portalItem||(R.error(\"_save(): requires the .portalItem property to be set\"),await Promise.reject(new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\"))),this.portalItem.type!==T&&(R.error(\"_save(): Non-matching portal item type. Got \"+this.portalItem.type+\", expected \"+T),await Promise.reject(new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${T}\"`))),await this._ensureLoadBeforeSave();const o={origin:\"portal-item\",url:this.portalItem.itemUrl&&a(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||b.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write(null,o)]};return await Promise.all(o.resources.pendingOperations),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:i}),await _(this.resourceReferences,o,null),c(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages.filter((e=>\"error\"===e.type)).map((e=>new r(e.name,e.message,e.details)));if(o&&o.validationOptions.ignoreUnsupported&&(i=i.filter((e=>\"layer:unsupported\"!==e.name&&\"symbol:unsupported\"!==e.name&&\"symbol-layer:unsupported\"!==e.name&&\"property:unsupported\"!==e.name&&\"url:unsupported\"!==e.name&&\"scenemodification:unsupported\"!==e.name))),o.validationOptions.enabled||U){const t=(await import(\"../support/schemaValidator.js\")).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(R.error(`_validateAgainstJSONSchema(): ${e}`),\"throw\"===o.validationOptions.failPolicy){const e=t.map((e=>new r(\"sceneservice:schema-validation\",e))).concat(i);throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{combined:e})}}}if(i.length>0)throw new r(\"sceneservice:save\",\"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:i})}};return e([n(w)],N.prototype,\"id\",void 0),e([n({type:y})],N.prototype,\"spatialReference\",void 0),e([l(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],N.prototype,\"readSpatialReference\",null),e([n({type:u})],N.prototype,\"fullExtent\",void 0),e([l(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],N.prototype,\"readFullExtent\",null),e([n({readOnly:!0,type:m})],N.prototype,\"heightModelInfo\",void 0),e([n({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],N.prototype,\"minScale\",void 0),e([n({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],N.prototype,\"maxScale\",void 0),e([n({readOnly:!0})],N.prototype,\"version\",void 0),e([l(\"version\",[\"store.version\"])],N.prototype,\"readVersion\",null),e([n({type:String,json:{read:{source:\"copyrightText\"}}})],N.prototype,\"copyright\",void 0),e([n({type:String,json:{read:!1}})],N.prototype,\"sublayerTitleMode\",void 0),e([n({type:String})],N.prototype,\"title\",void 0),e([l(\"portal-item\",\"title\")],N.prototype,\"readTitlePortalItem\",null),e([l(\"service\",\"title\",[\"name\"])],N.prototype,\"readTitleService\",null),e([n({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],N.prototype,\"layerId\",void 0),e([n(I)],N.prototype,\"url\",null),e([d(\"url\")],N.prototype,\"writeUrl\",null),e([n()],N.prototype,\"parsedUrl\",null),e([n({readOnly:!0})],N.prototype,\"store\",void 0),e([n({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],N.prototype,\"rootNode\",void 0),N=e([p(\"esri.layers.mixins.SceneService\")],N),N},O=-1e38,U=!1,T=\"Scene Service\",E={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{T as SCENE_SERVICE_ITEM_TYPE,N as SceneService};\n"],"names":["R","o","getLogger","N","N2","constructor","arguments","this","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","Number","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","indexInfo","_debouncedSaveOperations","s","async","e2","t","r2","_save","_saveAs","readSpatialReference","_readSpatialReference","y","fromJSON","store","indexCRS","geographicCRS","o2","parseInt","substring","lastIndexOf","length","readFullExtent","o3","u","i","extent","Array","isArray","some","e3","O","xmin","ymin","xmax","ymax","readVersion","toString","s2","split","readTitlePortalItem","readTitleService","r","portalItem","h","url","name","f","v","g","layer","nonStandardUrlAllowed","logger","_set","writeUrl","_get","a","path","x","parsedUrl","rootNode","apiKey","hasZ","_updateExtent","type","i2","rootIndex","pageSize","rootPage","nodes","obb","center","halfSize","a2","n2","l","Math","sqrt","zmin","zmax","t2","mbs","test","_fetchFirstLayerId","_fetchServiceLayer","query","token","responseType","signal","data","layers","id","ssl","replace","read","origin","validateLayer","load","beforeSave","_updateTypeKeywords","typeKeywords","getTypeKeywords","push","filter","r3","indexOf","__spreadValues","E","j","from","error","Promise","reject","clone","portal","b","getDefault","_ensureLoadBeforeSave","T","messages","writtenProperties","blockedRelativeUrls","resources","toAdd","toUpdate","toKeep","pendingOperations","write","all","_validateAgainstJSONSchema","_signIn","user","addItem","item","folder","_","resourceReferences","c","itemUrl","update","map","message","details","validationOptions","ignoreUnsupported","enabled","U","import","validate","portalItemLayerType","join","failPolicy","e4","e5","concat","combined","errors","e","n","w","prototype","readOnly","m","json","origins","service","source","String","target","isRequired","ignoreOrigin","I","d","p"],"mappings":"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"}