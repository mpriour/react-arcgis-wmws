{"version":3,"file":"I3SQueryFeatureStore.8e7d7921.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js","../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js","../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js","../../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import{PositionHint as r,indexOf as s}from\"../../../../core/arrayUtils.js\";import n from\"../../../../core/Logger.js\";import{isNone as i,isSome as o}from\"../../../../core/maybe.js\";import{getUnitString as a}from\"../../../../core/unitUtils.js\";import{whenOnce as c}from\"../../../../core/watchUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{t as u,b as f,s as d}from\"../../../../chunks/vec3.js\";import{WhereClause as g}from\"../../../../core/sql/WhereClause.js\";import{projectBoundingSphere as h,load as y,project as m,projectVectorToVector as j}from\"../../../../geometry/projection.js\";import{create as b}from\"../../../../geometry/support/aaBoundingBox.js\";import{fromValues as S,expandWithNestedArray as R,expand as w}from\"../../../../geometry/support/aaBoundingRect.js\";import{project as F}from\"../../../../geometry/support/webMercatorUtils.js\";import{objectIdFilter as E,filterInPlace as I}from\"./I3SUtil.js\";import x from\"../../../layers/support/FeatureFilter.js\";import M from\"../../../../geometry/SpatialReference.js\";const _=n.getLogger(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\");let v,O=class extends t{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){c(this,\"filter.geometry\").then((()=>this.loadAsyncModule(G().then((e=>{this.destroyed||(this._geometryEngine=e,this.applyFilters())})))))}get sortedObjectIds(){if(i(this.filter.objectIds))return null;const e=new Float64Array(this.filter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=o(this.filter)?this.filter.where:null;if(i(e)||!e)return null;try{return g.create(e,this.layerFieldsIndex)}catch(t){_.error(`Failed to parse filter where clause: ${t}`)}return null}addFilters(e,t,r,s){const n=this.sortedObjectIds;o(n)&&e.push((e=>E(n,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const i=this.parsedGeometry;if(o(i)){const n=this.spatialRelationship;e.push(((e,o)=>A(e,o,s,t,r,i,n)))}}isMBSGeoemtryVisible(e,t,r){const s=this.parsedGeometry;if(o(s)){const n=this.spatialRelationship,i=s[0].spatialReference||t;if(!h(e,r,T,i))return _.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return C(T,s,i,n)}return!0}get parsedGeometry(){if(i(this.filter))return null;if(!this._geometryEngine)return null;const{geometry:e}=this.filter;if(i(e))return null;const{distance:t,units:r}=this.filter,s=this.spatialRelationship,n=\"mesh\"===e.type?e.extent:e;if(i(t)||0===t)return L(n,s);const c=r||a(n.spatialReference);if(n.spatialReference.isWGS84){return L(this._geometryEngine.geodesicBuffer(n,t,c),s)}const l=F(n,M.WGS84);if(o(l)){return L(F(this._geometryEngine.geodesicBuffer(l,t,c),n.spatialReference),s)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule(y().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let p=null;try{p=m(n,M.WGS84)}catch(u){}if(p)try{p=m(this._geometryEngine.geodesicBuffer(p,t,c),n.spatialReference)}catch(u){p=null}return p||_.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${n.spatialReference.wkid}) to WGS84.`),L(p,s)}get spatialRelationship(){return o(this.filter)?this.filter.spatialRelationship:\"intersects\"}static checkSupport(e){return e.timeExtent?(_.warn(\"Filters with a timeExtent are not supported for mesh scene layers\"),!1):!!B(e.spatialRelationship)||(_.warn(`Filters with spatialRelationship other than ${W.join(\", \")} are not supported for mesh scene layers`),!1)}};function k(){return!!v}async function G(){return k()||(v=await import(\"../../../../geometry/geometryEngine.js\")),v}e([l({type:x})],O.prototype,\"filter\",void 0),e([l()],O.prototype,\"layerFieldsIndex\",void 0),e([l()],O.prototype,\"loadAsyncModule\",void 0),e([l()],O.prototype,\"applyFilters\",void 0),e([l()],O.prototype,\"addSqlFilter\",void 0),e([l({readOnly:!0})],O.prototype,\"sortedObjectIds\",null),e([l({readOnly:!0})],O.prototype,\"parsedWhereClause\",null),e([l({readOnly:!0})],O.prototype,\"parsedGeometry\",null),e([l({readOnly:!0})],O.prototype,\"spatialRelationship\",null),e([l()],O.prototype,\"_projectionEngineLoaded\",void 0),e([l()],O.prototype,\"_geometryEngine\",void 0),O=e([p(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\")],O);const W=(e=>e)([\"contains\",\"intersects\",\"disjoint\"]);function B(e){return null!=e&&W.indexOf(e)>=0}function L(e,t){if(i(e))return null;if(\"disjoint\"===t&&\"polygon\"===e.type){const t=new Array(e.rings.length);for(let r=0;r<e.rings.length;++r){const s=S(1/0,1/0,-1/0,-1/0);R(s,e.rings[r]),t[r]={type:\"polygon\",rings:[e.rings[r]],spatialReference:e.spatialReference,aabr:s}}t.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const n=new Set,i=new r;for(let e=0;e<t.length;++e){const r=t[e];for(let s=e+1;s<t.length;++s){const e=t[s];if(e.aabr[0]>=r.aabr[2])break;n.add(e)}n.forEach((e=>{if(r!==e)if(e.aabr[2]<=r.aabr[0])n.delete(e);else if(v.intersects(r,e)){r.rings=r.rings.concat(e.rings),w(r.aabr,e.aabr,r.aabr),delete r._geVersion,n.delete(e);const o=s(t,e,t.length,i);t.splice(o,1)}})),n.add(r)}for(const e of t)delete e.aabr;return t}return[e]}function C(e,t,r,s){const n=U(e,r);return t.every((e=>1!==q(e,n,s)))}function A(e,t,r,s,n,i,o){const a=i[0].spatialReference||s.spatialReference;if(!h(t.node.mbs,n,T,a))return void _.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter\");const c=U(T,a),l=V(o,s,a,r,t.objectHandle);for(const p of i){if(0===e.length)return;switch(q(p,c,o)){case 1:return void(e.length=0);case 0:continue}I(e,t.featureIds,(e=>H(p,e,l)))}}const T=[0,0,0,0];function V(e,t,r,s,n){const i=t.renderSpatialReference,o=new Map,a={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:r};a.rings[0][3]=a.rings[0][0];const c={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let l,p;switch(e){case\"intersects\":l=(e,t)=>v.intersects(e,t)?0:2,p=Z;break;case\"contains\":l=(e,t)=>v.contains(e,t)?2:1,p=Z;break;default:l=(e,t)=>v.disjoint(e,t)?2:1,p=$}return{collection:s,object:n,type:e,maskSR:r,renderSR:i,aabbCache:o,triangle:a,positions:c,triangleTest:l,geometryTest:p}}function U(e,t){const r={x:e[0],y:e[1],hasZ:!1,hasM:!1,type:\"point\",spatialReference:t},s=!t.isWGS84&&!t.isWebMercator?v.buffer(r,e[3],1):v.geodesicBuffer(r,e[3],1);return s.type=\"polygon\",s}function q(e,t,r){switch(r){case\"intersects\":case\"contains\":return Z(e,t);case\"disjoint\":return $(e,t)}}function Z(e,t){return v.intersects(e,t)?v.contains(e,t)?0:2:1}function $(e,t){return v.intersects(e,t)?v.contains(e,t)?1:2:0}const z=2**-32;function H(e,t,r){const{collection:s,object:n,renderSR:i,maskSR:o,geometryTest:a,aabbCache:c}=r;let l=c.get(t);if(!l){const e=s.getObjectTransform(n);s.getComponentAabb(n,t,P);const r=[[P[0],P[1],0],[P[0],P[4],0],[P[3],P[4],0],[P[3],P[1],0]];for(let t=0;t<4;++t)u(r[t],r[t],e.rotationScale),f(r[t],r[t],e.position),j(r[t],i,r[t],o);l={rings:[r],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:o},l.rings[0][4]=l.rings[0][0],c.set(t,l)}switch(a(e,l)){case 1:return!1;case 0:return!0}const{triangle:p,triangleTest:g,positions:h}=r,y=p.rings[0][0],m=p.rings[0][1],b=p.rings[0][2],S=s.getObjectTransform(n);s.getComponentPositions(n,t,h);const{indices:R,data:w,stride:F,startIndex:E,endIndex:I}=h;for(let x=E;x<I;x+=3){const t=F*R[x+0],r=F*R[x+1],s=F*R[x+2];d(y,w[t+0],w[t+1],w[t+2]),d(m,w[r+0],w[r+1],w[r+2]),d(b,w[s+0],w[s+1],w[s+2]),u(y,y,S.rotationScale),u(m,m,S.rotationScale),u(b,b,S.rotationScale),f(y,y,S.position),f(m,m,S.position),f(b,b,S.position),j(y,i,y,o),j(m,i,m,o),j(b,i,b,o);const n=m[0]-y[0],a=m[1]-y[1],c=b[0]-y[0],l=b[1]-y[1];if(!(Math.abs(n*l-a*c)<z))switch(delete p._geVersion,g(e,p)){case 1:return!1;case 0:return!0}}return\"intersects\"!==r.type}const P=b();export{O as I3SMeshViewFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{isNone as n}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../../geometry/Extent.js\";import u from\"../../../../layers/graphics/data/QueryEngine.js\";import y from\"../../../../rest/support/FeatureSet.js\";import c from\"../../../../rest/support/Query.js\";const l=u;let p=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null,this._handles=new s}get defaultQueryJSON(){return new c({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this.ensureDataQueryEngine()}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null),this._handles&&(this._handles.destroy(),this._handles=null),this._set(\"layerView\",null)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:i.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new t(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(s.returnCentroid)throw new t(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const n=await this.dataQueryEngine.executeQuery(s,r),o=y.fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){if(n(e))return this.defaultQueryJSON;const r=e.toJSON();return r.outSpatialReference||(e.outSpatialReference=this.spatialReference),r}ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||\"OBJECTID\",r=\"esriGeometryPolygon\",t=this.layer.fields.map((e=>e.toJSON())),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,a=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:r,fields:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:a,scheduler:s,priority:o}),this._dataQueryEngineInstance}};e([o({constructOnly:!0})],p.prototype,\"layerView\",void 0),e([o({constructOnly:!0})],p.prototype,\"priority\",void 0),e([o({constructOnly:!0})],p.prototype,\"spatialIndex\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],p.prototype,\"spatialReference\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.i3slayer\"})],p.prototype,\"layer\",void 0),e([o({readOnly:!0})],p.prototype,\"defaultQueryJSON\",null),p=e([a(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],p);var d=p;export{p as I3SQueryEngine,d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{create as e}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this.objectIdField=t.objectIdField,this.getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this.objectIdField&&(n[this.objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this.objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,r,i,n,a]=this.getFeatureExtent(t,s);return new o([5],[e,r,i,n,r,i,n,a,i,e,a,i,e,r,i])}getCentroid(t,e){if(t.geometry)return r(new o,t.geometry,e.hasZ,e.hasM);const[i,n,a,m,u,d]=this.getFeatureExtent(t,s);return new o([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=e();export{n as I3SQueryFeatureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Evented.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec4f64.js\";import{projectBoundingSphere as a}from\"../../../../geometry/projection.js\";import{create as n,toRect as p}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as i,intersects as u}from\"../../../../geometry/support/aaBoundingRect.js\";let m=class extends r{constructor(e){super(e),this.events=new t}forEach(e){this.forAllFeatures((r=>(e(r),1)))}forEachBounds(e,r,t){const o=this.getFeatureExtent;for(const s of e)r(o(s,t))}forEachInBounds(e,r){this.forAllFeatures((t=>{const o=this.getFeatureExtent(t,l);return u(e,p(o,d))&&r(t),1}),(r=>{if(a(r.node.mbs,this.sourceSpatialReference,f,this.viewSpatialReference),f[0]>=e[0]&&f[2]<=e[2]&&f[1]>=e[1]&&f[3]<=e[3])return 1;const t=Math.max(e[0],Math.min(f[0],e[2])),o=Math.max(e[1],Math.min(f[1],e[3])),s=f[0]-t,c=f[1]-o;return s*s+c*c<=f[3]*f[3]?1:2}))}};e([o({constructOnly:!0})],m.prototype,\"featureAdapter\",void 0),e([o({constructOnly:!0})],m.prototype,\"forAllFeatures\",void 0),e([o({constructOnly:!0})],m.prototype,\"getFeatureExtent\",void 0),e([o({constructOnly:!0})],m.prototype,\"sourceSpatialReference\",void 0),e([o({constructOnly:!0})],m.prototype,\"viewSpatialReference\",void 0),m=e([s(\"esri.views.3d.layers.i3s.I3SQueryFeatureStore\")],m);const f=c(),l=n(),d=i();var h=m;export{m as I3SQueryFeatureStore,h as default};\n"],"names":["_","n","getLogger","v","O","t","constructor","e2","this","_projectionEngineLoaded","initialize","then","loadAsyncModule","async","import","G","destroyed","_geometryEngine","applyFilters","i","filter","objectIds","Float64Array","sort","o","where","g","create","layerFieldsIndex","t2","error","addFilters","r","s2","n2","sortedObjectIds","push","E","e3","addSqlFilter","parsedWhereClause","parsedGeometry","n3","spatialRelationship","o2","r2","a2","spatialReference","h","node","mbs","T","warnOnce","c","U","l2","renderSpatialReference","Map","rings","hasZ","hasM","type","indices","data","stride","startIndex","endIndex","p2","t3","intersects","Z","contains","disjoint","$","collection","object","maskSR","renderSR","aabbCache","triangle","positions","triangleTest","geometryTest","V","objectHandle","length","q","featureIds","H","A","isMBSGeoemtryVisible","every","C","geometry","distance","units","extent","L","a","isWGS84","geodesicBuffer","F","M","WGS84","y","m","u2","wkid","timeExtent","warn","W","indexOf","B","join","e","l","x","prototype","readOnly","p","t$12","Array","S","aabr","Set","e4","add","forEach","delete","concat","w","_geVersion","s","splice","isWebMercator","buffer","get","getObjectTransform","getComponentAabb","P","r3","rotationScale","f","position","j","set","g2","h2","y2","m2","b2","getComponentPositions","R","w2","I","x2","s3","d","u","a3","c2","l3","abs","b","_dataQueryEngineInstance","_handles","outSpatialReference","toJSON","ensureDataQueryEngine","layerView","on","spatialIndex","events","emit","destroy","_set","dataQueryEngine","executeQueryForCount","_ensureQueryJSON","count","executeQueryForExtent","fromJSON","executeQueryForIds","returnGeometry","returnCentroid","executeQuery","features","defaultQueryJSON","layer","objectIdField","fields","map","view","resourceController","scheduler","priority","geometryType","timeInfo","featureStore","constructOnly","aliasOf","getFeatureExtent","getObjectId","id","getAttributes","meta","index","attributeInfo","attributeData","Object","keys","getAttribute","getGeometry","getCentroid","d2","cloneWithGeometry","forAllFeatures","forEachBounds","forEachInBounds","sourceSpatialReference","viewSpatialReference","Math","max","min"],"mappings":"2iBAI21C,MAAMA,EAAEC,EAAEC,UAAU,8CAAiD,IAACC,EAAEC,EAAE,cAAcC,EAAEC,YAAYC,SAASA,GAAGC,KAAKC,yBAAwB,EAAGC,eAAeF,KAAK,mBAAmBG,MAAM,IAAIH,KAAKI,gBAAqtEC,yBAAFV,YAA0CW,OAAO,iCAA2CX,EAA/xEY,GAAIJ,eAAeK,iBAAiBC,gBAAgBV,EAAEC,KAAKU,+CAA+CC,EAAEX,KAAKY,OAAOC,kBAAkB,WAAWd,EAAE,IAAIe,aAAad,KAAKY,OAAOC,kBAAkBd,EAAEgB,OAAOhB,gCAAgCA,EAAEiB,EAAEhB,KAAKY,QAAQZ,KAAKY,OAAOK,MAAM,QAAQN,EAAEZ,KAAKA,SAAS,gBAAgBmB,EAAEC,OAAOpB,EAAEC,KAAKoB,wBAAwBC,KAAKC,MAAM,wCAAwCD,YAAY,KAAKE,WAAWxB,EAAEsB,EAAEG,EAAEC,SAASC,EAAE1B,KAAK2B,kBAAkBD,IAAI3B,EAAE6B,SAASC,EAAEH,GAAE,EAAGI,KAAK9B,KAAK+B,aAAahC,EAAEC,KAAKgC,yBAAyBrB,EAAEX,KAAKiC,kBAAkBjB,EAAEL,GAAG,OAAOuB,EAAElC,KAAKmC,sBAAsBP,MAAM,CAACE,EAAEM,IAA4pG,SAAWrC,EAAEsB,EAAEgB,EAAEZ,EAAEC,EAAEf,EAAEyB,SAASE,EAAE3B,EAAE,GAAG4B,kBAAkBd,EAAEc,qBAAqBC,EAAEnB,EAAEoB,KAAKC,IAAIhB,EAAEiB,EAAEL,eAAe9C,EAAEoD,SAAS,wGAAwGC,EAAEC,EAAEH,EAAEL,GAAGS,EAAwL,SAAWhD,EAAEsB,EAAEgB,EAAEZ,EAAEC,SAASf,EAAEU,EAAE2B,uBAAuBZ,EAAE,IAAIa,IAAIX,EAAE,CAACY,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,KAAKC,MAAK,EAAGC,MAAK,EAAGC,KAAK,UAAUd,iBAAiBF,KAAKa,MAAM,GAAG,GAAGZ,EAAEY,MAAM,GAAG,SAASL,EAAE,CAACS,QAAQ,KAAKC,KAAK,KAAKC,OAAO,EAAEC,WAAW,EAAEC,SAAS,OAAOX,EAAEY,SAAS5D,OAAO,eAAe,CAAC+B,EAAE8B,IAAIjE,EAAEkE,WAAW/B,EAAE8B,GAAG,EAAE,EAAED,EAAEG,YAAY,aAAa,CAAChC,EAAE8B,IAAIjE,EAAEoE,SAASjC,EAAE8B,GAAG,EAAE,EAAED,EAAEG,kBAAkB,CAAChC,EAAE8B,IAAIjE,EAAEqE,SAASlC,EAAE8B,GAAG,EAAE,EAAED,EAAEM,QAAQ,CAACC,WAAWzC,EAAE0C,OAAOzC,EAAE2B,KAAKtD,EAAEqE,OAAO/B,EAAEgC,SAAS1D,EAAE2D,UAAUlC,EAAEmC,SAASjC,EAAEkC,UAAU3B,EAAE4B,aAAa1B,EAAE2B,aAAaf,GAAvtBgB,CAAEvC,EAAEX,EAAEa,EAAED,EAAEhB,EAAEuD,wBAAwBjB,KAAKhD,EAAE,IAAI,IAAIZ,EAAE8E,qBAAqBC,EAAEnB,EAAEd,EAAET,SAAS,gBAAgByC,OAAO,QAAQ,aAAa9E,EAAEsB,EAAE0D,eAAeC,EAAErB,EAAE7B,EAAEiB,MAApiHkC,CAAEnD,EAAEM,EAAEX,EAAEJ,EAAEG,EAAEb,EAAEuB,MAAMgD,qBAAqBnF,EAAEsB,EAAEG,SAASC,EAAEzB,KAAKiC,kBAAkBjB,EAAES,GAAG,OAAOC,EAAE1B,KAAKmC,oBAAoBxB,EAAEc,EAAE,GAAGc,kBAAkBlB,SAAMmB,EAAEzC,EAAEyB,EAAEmB,EAAEhC,GAAs7F,SAAWZ,EAAEsB,EAAEgB,EAAEZ,SAASC,EAAEoB,EAAE/C,EAAEsC,UAAUhB,EAAE8D,UAAU,IAAAL,EAAMhD,EAAEJ,EAAED,KAA72F2D,CAAEzC,EAAElB,EAAEd,EAAEe,IAAvIlC,EAAEoD,SAAS,2GAA0G,UAA2B,0BAA2BjC,EAAEX,KAAKY,eAAe,SAASZ,KAAKS,uBAAuB,WAAW4E,SAAStF,GAAGC,KAAKY,UAAUD,EAAEZ,UAAU,WAAWuF,SAASzF,EAAE0F,MAAM/D,GAAGxB,KAAKY,OAAOa,EAAEzB,KAAKmC,oBAAoBT,EAAE,SAAA3B,EAAWsD,KAAKtD,EAAEyF,OAAOzF,KAAKY,EAAEd,IAAI,IAAIA,SAAS4F,EAAE/D,EAAED,SAASoB,EAAErB,GAAGkE,EAAEhE,EAAEa,qBAAqBb,EAAEa,iBAAiBoD,eAAgBF,EAAEzF,KAAKS,gBAAgBmF,eAAelE,EAAE7B,EAAEgD,GAAGpB,SAASsB,EAAE8C,EAAEnE,EAAEoE,EAAEC,UAAU/E,EAAE+B,UAAW0C,EAAEI,EAAE7F,KAAKS,gBAAgBmF,eAAe7C,EAAElD,EAAEgD,GAAGnB,EAAEa,kBAAkBd,OAAOzB,KAAKC,+BAA+BG,gBAAgB4F,IAAI7F,MAAM,IAAIH,KAAKC,yBAAwB,MAAOD,KAAKC,gCAAgC,SAAS0D,EAAE,WAAWsC,EAAEvE,EAAEoE,EAAEC,aAAaG,OAAOvC,QAAQsC,EAAEjG,KAAKS,gBAAgBmF,eAAejC,EAAE9D,EAAEgD,GAAGnB,EAAEa,wBAAwB2D,KAAK,YAAYvC,GAAGnE,EAAE8B,MAAM,uFAAuFI,EAAEa,iBAAiB4D,mBAAmBV,EAAE9B,EAAElC,oCAAoCT,EAAEhB,KAAKY,QAAQZ,KAAKY,OAAOuB,oBAAoB,iCAAiCpC,UAAUA,EAAEqG,cAAcC,KAAK,sEAAqE,KAAm6B,SAAWtG,UAAU,MAAAA,GAASuG,EAAEC,QAAQxG,IAAI,EAAz8ByG,CAAEzG,EAAEoC,yBAAyBkE,KAAK,+CAA+CC,EAAEG,KAAK,kDAAiD,KAAyHC,EAAE,CAACC,EAAE,CAACtD,KAAKuD,KAAKhH,EAAEiH,UAAU,cAAS,GAAQH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,wBAAmB,GAAQH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,uBAAkB,GAAQH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,oBAAe,GAAQH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,oBAAe,GAAQH,EAAE,CAACC,EAAE,CAACG,UAAS,KAAMlH,EAAEiH,UAAU,kBAAkB,MAAMH,EAAE,CAACC,EAAE,CAACG,UAAS,KAAMlH,EAAEiH,UAAU,oBAAoB,MAAMH,EAAE,CAACC,EAAE,CAACG,UAAS,KAAMlH,EAAEiH,UAAU,iBAAiB,MAAMH,EAAE,CAACC,EAAE,CAACG,UAAS,KAAMlH,EAAEiH,UAAU,sBAAsB,MAAMH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,+BAA0B,GAAQH,EAAE,CAACC,KAAK/G,EAAEiH,UAAU,uBAAkB,GAAQjH,EAAE8G,EAAE,CAACK,EAAE,+CAA+CnH,GAAG,MAAM0G,EAAS,CAAC,WAAW,aAAa,YAA2D,WAAWvG,EAAEF,MAAMc,EAAEZ,UAAU,QAAQ,aAAAiH,GAAgB,YAAAjH,EAAcsD,KAAK,OAAOhC,EAAE,IAAI4F,MAAMlH,EAAEmD,MAAM2B,gBAAgBxC,EAAE,EAAEA,EAAEtC,EAAEmD,MAAM2B,SAASxC,EAAE,OAAOZ,EAAEyF,EAAE,EAAA,EAAI,EAAA,GAAI,EAAA,GAAK,EAAA,KAAQzF,EAAE1B,EAAEmD,MAAMb,IAAIhB,EAAEgB,GAAG,CAACgB,KAAK,UAAUH,MAAM,CAACnD,EAAEmD,MAAMb,IAAIE,iBAAiBxC,EAAEwC,iBAAiB4E,KAAK1F,KAAKV,MAAM,CAACe,EAAE8B,IAAI9B,EAAEqF,KAAK,GAAGvD,EAAEuD,KAAK,WAAWzF,EAAE,IAAI0F,IAAIzG,EAAE,IAAIa,UAAUM,EAAE,EAAEA,EAAET,EAAEwD,SAAS/C,EAAE,OAAOO,EAAEhB,EAAES,WAAWL,EAAEK,EAAE,EAAEL,EAAEJ,EAAEwD,SAASpD,EAAE,OAAO4F,EAAEhG,EAAEI,MAAM4F,EAAEF,KAAK,IAAI9E,EAAE8E,KAAK,WAAWG,IAAID,KAAKE,gBAAgBlF,IAAIgF,KAAKA,EAAEF,KAAK,IAAI9E,EAAE8E,KAAK,KAAKK,OAAOH,WAAW1H,EAAEkE,WAAWxB,EAAEgF,GAAG,GAAGnE,MAAMb,EAAEa,MAAMuE,OAAOJ,EAAEnE,OAAOwE,EAAErF,EAAE8E,KAAKE,EAAEF,KAAK9E,EAAE8E,aAAa9E,EAAEsF,WAAWjG,EAAE8F,OAAOH,SAASjF,EAAEwF,EAAEvG,EAAEgG,EAAEhG,EAAEwD,OAAOlE,KAAKkH,OAAOzF,EAAE,OAAOV,EAAE4F,IAAIjF,aAAaP,KAAKT,SAASS,EAAEqF,YAAY9F,QAAQ,CAACtB,GAA0d,MAAM4C,EAAE,CAAC,EAAE,EAAE,EAAE,GAAuiB,WAAW5C,EAAEsB,SAASgB,EAAE,CAACuE,EAAE7G,EAAE,GAAGiG,EAAEjG,EAAE,GAAGoD,MAAK,EAAGC,MAAK,EAAGC,KAAK,QAAQd,iBAAiBlB,GAAGI,EAAGJ,EAAEsE,SAAUtE,EAAEyG,cAAiCnI,EAAEiG,eAAevD,EAAEtC,EAAE,GAAG,GAA3CJ,EAAEoI,OAAO1F,EAAEtC,EAAE,GAAG,UAAqC0B,EAAE4B,KAAK,UAAU5B,EAAE,WAAW1B,EAAEsB,EAAEgB,UAAUA,OAAO,iBAAiB,kBAAkByB,EAAE/D,EAAEsB,OAAO,kBAAkB4C,EAAElE,EAAEsB,IAAI,WAAWtB,EAAEsB,UAAU1B,EAAEkE,WAAW9D,EAAEsB,GAAG1B,EAAEoE,SAAShE,EAAEsB,GAAG,EAAE,EAAE,EAAE,WAAWtB,EAAEsB,UAAU1B,EAAEkE,WAAW9D,EAAEsB,GAAG1B,EAAEoE,SAAShE,EAAEsB,GAAG,EAAE,EAAE,EAAiB,WAAWtB,EAAEsB,EAAEgB,SAAS6B,WAAWzC,EAAE0C,OAAOzC,EAAE2C,SAAS1D,EAAEyD,OAAOhC,EAAEsC,aAAapC,EAAEgC,UAAUzB,GAAGR,MAAMU,EAAEF,EAAEmF,IAAI3G,OAAO0B,EAAE,OAAOjB,EAAEL,EAAEwG,mBAAmBvG,KAAKwG,iBAAiBxG,EAAEL,EAAE8G,SAASC,EAAE,CAAC,CAACD,EAAE,GAAGA,EAAE,GAAG,GAAG,CAACA,EAAE,GAAGA,EAAE,GAAG,GAAG,CAACA,EAAE,GAAGA,EAAE,GAAG,GAAG,CAACA,EAAE,GAAGA,EAAE,GAAG,YAAYvE,EAAE,EAAEA,EAAE,IAAIA,IAAIwE,EAAExE,GAAGwE,EAAExE,GAAG9B,EAAEuG,eAAeC,EAAEF,EAAExE,GAAGwE,EAAExE,GAAG9B,EAAEyG,UAAUC,EAAEJ,EAAExE,GAAGjD,EAAEyH,EAAExE,GAAGxB,KAAK,CAACc,MAAM,CAACkF,GAAGjF,MAAK,EAAGC,MAAK,EAAGC,KAAK,UAAUd,iBAAiBH,GAAGW,EAAEG,MAAM,GAAG,GAAGH,EAAEG,MAAM,GAAG,GAAGL,EAAE4F,IAAIpH,EAAE0B,UAAUT,EAAEvC,EAAEgD,SAAS,SAAQ,OAAQ,SAAQ,QAASwB,SAASZ,EAAEc,aAAaiE,EAAElE,UAAUmE,GAAGtG,EAAEuG,EAAEjF,EAAET,MAAM,GAAG,GAAG2F,EAAElF,EAAET,MAAM,GAAG,GAAG4F,EAAEnF,EAAET,MAAM,GAAG,GAAGgE,EAAEzF,EAAEwG,mBAAmBvG,KAAKqH,sBAAsBrH,EAAEL,EAAEsH,SAASrF,QAAQ0F,EAAEzF,KAAK0F,EAAEzF,OAAOqC,EAAEpC,WAAW5B,EAAE6B,SAASwF,GAAGP,UAAUQ,EAAEtH,EAAEsH,EAAED,EAAEC,GAAG,EAAE,OAAOvF,EAAEiC,EAAEmD,EAAEG,EAAE,GAAGf,EAAEvC,EAAEmD,EAAEG,EAAE,GAAGC,EAAEvD,EAAEmD,EAAEG,EAAE,KAAKP,EAAEK,EAAErF,EAAE,GAAGqF,EAAErF,EAAE,GAAGqF,EAAErF,EAAE,IAAIyF,EAAER,EAAEI,EAAEb,EAAE,GAAGa,EAAEb,EAAE,GAAGa,EAAEb,EAAE,IAAIiB,EAAEP,EAAEG,EAAEG,EAAE,GAAGH,EAAEG,EAAE,GAAGH,EAAEG,EAAE,IAAIE,EAAEV,EAAEA,EAAE1B,EAAEmB,eAAeiB,EAAET,EAAEA,EAAE3B,EAAEmB,eAAeiB,EAAER,EAAEA,EAAE5B,EAAEmB,eAAeC,EAAEM,EAAEA,EAAE1B,EAAEqB,UAAUD,EAAEO,EAAEA,EAAE3B,EAAEqB,UAAUD,EAAEQ,EAAEA,EAAE5B,EAAEqB,UAAUC,EAAEI,EAAEjI,EAAEiI,EAAExG,GAAGoG,EAAEK,EAAElI,EAAEkI,EAAEzG,GAAGoG,EAAEM,EAAEnI,EAAEmI,EAAE1G,SAASF,EAAE2G,EAAE,GAAGD,EAAE,GAAGW,EAAEV,EAAE,GAAGD,EAAE,GAAGY,EAAEV,EAAE,GAAGF,EAAE,GAAGa,EAAEX,EAAE,GAAGF,EAAE,aAAac,IAAIxH,EAAEuH,EAAEF,EAAEC,GAA7iC,sCAAikC7F,EAAEgE,WAAWe,EAAE3I,EAAE4D,SAAS,SAAQ,OAAQ,SAAQ,SAAU,eAAetB,EAAEgB,KAAK,MAAM8E,EAAEwB,ICA/mOhD,GAAE2C,EAAE,IAAIvC,GAAE,cAAcvF,EAAE1B,YAAYC,SAASA,GAAGC,KAAK4J,yBAAyB,KAAK5J,KAAK6J,SAAS,IAAIjC,gCAAgC,IAAI/E,EAAE,CAACiH,oBAAoB9J,KAAKuC,mBAAmBwH,sCAAsC/J,KAAKgK,wBAAwB9J,kBAAkB2J,SAASvC,IAAItH,KAAKiK,UAAUC,GAAG,4BAA4B,IAAIlK,KAAKmK,aAAaC,OAAOC,KAAK,cAAcC,eAAeV,gCAAgCA,yBAAyBU,UAAUtK,KAAK4J,yBAAyB,MAAM5J,KAAK6J,gBAAgBA,SAASS,UAAUtK,KAAK6J,SAAS,MAAM7J,KAAKuK,KAAK,YAAY,iCAAiCxK,EAAEsC,UAAUrC,KAAKwK,gBAAgBC,qBAAqBzK,KAAK0K,iBAAiB3K,GAAGsC,+BAA+BtC,EAAEsC,SAASsI,MAAMtJ,EAAEmE,OAAO/D,SAASzB,KAAKwK,gBAAgBI,sBAAsB5K,KAAK0K,iBAAiB3K,GAAGsC,SAAS,CAACsI,MAAMtJ,EAAEmE,OAAO7E,EAAEkK,SAASpJ,6BAA6B1B,EAAEsC,UAAUrC,KAAKwK,gBAAgBM,mBAAmB9K,KAAK0K,iBAAiB3K,GAAGsC,sBAAsBtC,EAAEsC,SAASZ,EAAEzB,KAAK0K,iBAAiB3K,MAAM0B,EAAEsJ,qBAAqB,IAAIlL,EAAE,kCAAkC,uEAAuE4B,EAAEuJ,qBAAqB,IAAInL,EAAE,kCAAkC,0EAA0E6B,QAAQ1B,KAAKwK,gBAAgBS,aAAaxJ,EAAEY,GAAGD,EAAE4D,EAAE6E,SAASnJ,UAAUU,EAAE8I,SAAS3D,eAAelC,SAAS,QAAQjD,EAAEsI,iBAAiB3K,MAAMN,EAAEM,UAAUC,KAAKmL,uBAAuB9I,EAAEtC,EAAEgK,gBAAgB1H,EAAEyH,wBAAwBA,oBAAoB9J,KAAKuC,kBAAkBF,EAAE2H,2BAA2BhK,KAAK4J,gCAAgC5J,KAAK4J,+BAA+B7J,EAAEC,KAAKoL,MAAMC,eAAe,WAAmChK,EAAErB,KAAKoL,MAAME,OAAOC,QAAQzJ,EAAEiI,WAAWtI,EAAEzB,KAAKiK,UAAUuB,KAAKC,mBAAmBC,UAAUhK,EAAE1B,KAAKuC,iBAAiBwH,SAAS3H,EAAEpC,KAAK2L,SAASrJ,EAAEtC,KAAKmK,oBAAoBnK,KAAK4J,yBAAyB,IAAIjD,GAAE,CAACxD,MAAK,EAAGC,MAAK,EAAGwI,aAAnP,sBAAkQN,OAAOjK,EAAEwK,SAAS,KAAKtJ,iBAAiBb,EAAE2J,cAActL,EAAE+L,aAAaxJ,EAAEoJ,UAAUjK,EAAEkK,SAASvJ,IAAIpC,KAAK4J,2BAA2BlD,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAMhF,GAAEF,UAAU,iBAAY,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAMhF,GAAEF,UAAU,gBAAW,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAMhF,GAAEF,UAAU,oBAAe,GAAQH,EAAE,CAAC1F,EAAE,CAAC8F,UAAS,EAAGkF,QAAQ,qCAAqCjF,GAAEF,UAAU,wBAAmB,GAAQH,EAAE,CAAC1F,EAAE,CAAC8F,UAAS,EAAGkF,QAAQ,wBAAwBjF,GAAEF,UAAU,aAAQ,GAAQH,EAAE,CAAC1F,EAAE,CAAC8F,UAAS,KAAMC,GAAEF,UAAU,mBAAmB,MAAME,GAAEL,EAAE,CAAChB,EAAE,4CAA4CqB,IAAM,IAACsC,GAAEtC,GCAr6F,SAAQjH,YAAYuB,QAAQgK,cAAchK,EAAEgK,cAAcrL,KAAKiM,iBAAiB5K,EAAE4K,iBAAiBC,YAAY7K,UAAUA,EAAE8K,GAAGC,cAAcrM,SAASsM,KAAK7K,EAAE8K,MAAMlK,GAAGrC,EAAE2B,EAAE,QAAQ2J,kBAAkBrL,KAAKqL,eAAetL,EAAEoM,UAAU1K,EAAE5B,EAAE2B,EAAE+K,gBAAgB/K,EAAE+K,cAAcC,iBAAiB3M,EAAE4B,aAAaJ,KAAKoL,OAAOC,KAAKjL,KAAKJ,GAAGV,EAAEc,EAAEJ,GAAGe,UAAUV,EAAEiL,aAAa5M,EAAEyB,MAAMA,IAAIxB,KAAKqL,qBAAqBtL,EAAEoM,SAASE,KAAKjK,EAAEkK,MAAM5K,GAAG3B,EAAE0B,EAAE5B,EAAEuC,EAAEmK,gBAAgBnK,EAAEmK,cAAcC,qBAAqB3M,EAAE4B,GAAGd,EAAEc,EAAED,GAAGE,GAAG,KAAKkL,YAAYvL,MAAMA,EAAEgE,gBAAgBhE,EAAEgE,eAAetF,EAAEsC,EAAE1B,EAAEe,EAAEY,GAAGtC,KAAKiM,iBAAiB5K,EAAEuG,WAAU,IAAI5G,EAAE,CAAC,GAAG,CAACjB,EAAEsC,EAAE1B,EAAEe,EAAEW,EAAE1B,EAAEe,EAAEY,EAAE3B,EAAEZ,EAAEuC,EAAE3B,EAAEZ,EAAEsC,EAAE1B,IAAIkM,YAAYxL,EAAEtB,MAAMsB,EAAEgE,gBAAgB7D,EAAE,IAAIR,EAAEK,EAAEgE,SAAStF,EAAEoD,KAAKpD,EAAEqD,YAAYzC,EAAEe,EAAEY,EAAEuG,EAAE3C,EAAE4G,GAAG9M,KAAKiM,iBAAiB5K,EAAEuG,WAAU,IAAI5G,EAAE,CAAC,GAAG,IAAI6H,GAAG,KAAK3C,GAAG,KAAK4G,GAAG,IAAIC,kBAAkB1L,EAAEtB,SAASoM,GAAG9J,EAAEiK,MAAMlK,EAAEiK,KAAK1L,GAAGU,QAAQ,CAAC8K,GAAG9J,EAAEiK,MAAMlK,EAAEiK,KAAK1L,EAAE0E,SAAStF,IAAI,MAAM6H,GAAElB,ICAjgB,IAAIT,GAAE,cAAczE,EAAE1B,YAAYC,SAASA,GAAGC,KAAKoK,OAAO,IAAIvK,EAAE0H,QAAQxH,QAAQiN,sBAAsB3K,GAAG,KAAK4K,cAAclN,EAAEsC,EAAEhB,SAASe,EAAEpC,KAAKiM,2BAA2BxK,KAAK1B,IAAIqC,EAAEX,EAAEJ,IAAI6L,gBAAgBnN,EAAEsC,QAAQ2K,0BAA0B5K,EAAEpC,KAAKiM,iBAAiB5K,EAAEsF,WAAU2C,EAAEvJ,EAAEgH,EAAE3E,EAAEiH,MAAKhH,EAAEhB,GAAG,YAAYqE,EAAE0C,EAAE3F,KAAKC,IAAI1C,KAAKmN,uBAAuB7E,GAAEtI,KAAKoN,sBAAsB9E,GAAE,IAAIvI,EAAE,IAAIuI,GAAE,IAAIvI,EAAE,IAAIuI,GAAE,IAAIvI,EAAE,IAAIuI,GAAE,IAAIvI,EAAE,UAAU,QAAQsB,EAAEgM,KAAKC,IAAIvN,EAAE,GAAGsN,KAAKE,IAAIjF,GAAE,GAAGvI,EAAE,KAAKqC,EAAEiL,KAAKC,IAAIvN,EAAE,GAAGsN,KAAKE,IAAIjF,GAAE,GAAGvI,EAAE,KAAK0B,EAAE6G,GAAE,GAAGjH,EAAEwB,EAAEyF,GAAE,GAAGlG,SAASX,EAAEA,EAAEoB,EAAEA,GAAGyF,GAAE,GAAGA,GAAE,GAAG,EAAE,OAAO5B,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAM9F,GAAEY,UAAU,sBAAiB,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAM9F,GAAEY,UAAU,sBAAiB,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAM9F,GAAEY,UAAU,wBAAmB,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAM9F,GAAEY,UAAU,8BAAyB,GAAQH,EAAE,CAAC1F,EAAE,CAAC+K,eAAc,KAAM9F,GAAEY,UAAU,4BAAuB,GAAQZ,GAAES,EAAE,CAACkB,EAAE,kDAAkD3B,IAAG,MAAMqC,GAAEzF,IAAI8D,GAAElH,IAAI4J,GAAE1I,IAAO,IAAC6B,GAAEyD"}