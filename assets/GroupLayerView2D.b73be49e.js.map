{"version":3,"file":"GroupLayerView2D.b73be49e.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","../../node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../webgl/BufferObject.js\";import e from\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/renderState.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const o=this._getFbo(t),a=s.getRenderTarget();r.bindFramebuffer(o),s.setRenderTarget(o),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const n of this.children)n.beforeRender(e);for(const n of this.children)n.processRender(t);for(const n of this.children)n.afterRender(e);s.setRenderTarget(a),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,o.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:o}=r.getViewport();if(i!==this._lastWidth||o!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=o,this._renderTarget)this._renderTarget.resize(i,o);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:o},a={colorTarget:0,depthStencilTarget:3};this._renderTarget=new e(r,a,t,s.getSharedStencilBuffer())}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GroupContainer as t}from\"../engine/webgl/GroupContainer.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import s from\"../../layers/GroupLayerView.js\";let a=class extends(o(s)){constructor(){super(...arguments),this.container=new t}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}hitTest(e,r){return null}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};a=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],a);var i=a;export{i as default};\n"],"names":["t","constructor","arguments","this","_lastWidth","_lastHeight","requiresDedicatedFBO","dispose","_renderTarget","doRender","e2","createRenderParams","context","r2","painter","s","profiler","i2","_prevFBO","getBoundFramebufferObject","recordContainerStart","name","o","_getFbo","a2","getRenderTarget","bindFramebuffer","setRenderTarget","setDepthWriteEnabled","setColorMask","setClearColor","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","n2","children","beforeRender","processRender","afterRender","beforeRenderLayer","_clippingInfos","computedOpacity","setStencilTestEnabled","setStencilWriteMask","blitTexture","colorTexture","compositeLayer","recordContainerEnd","super","blendMode","effects","computedEffects","globalOpacity","width","height","getViewport","resize","t2","target","pixelFormat","dataType","samplingMode","wrapMode","colorTarget","depthStencilTarget","e","getSharedStencilBuffer","a","container","attach","_updateStageChildren","handles","add","layerViews","on","detach","remove","removeAllChildren","hitTest","update","moveStart","viewChange","moveEnd","forEach","addChildAt","r","i"],"mappings":"+tBAIgY,gBAAgBA,EAAEC,uBAAuBC,WAAWC,KAAKC,WAAW,EAAED,KAAKE,YAAY,EAAEF,KAAKG,sBAAqB,EAAGC,eAAeC,qBAAqBA,cAAcD,UAAUJ,KAAKK,cAAc,MAAMC,SAASC,SAASV,EAAEG,KAAKQ,mBAAmBD,IAAIE,QAAQC,EAAEC,QAAQC,EAAEC,SAASC,GAAGjB,OAAOkB,SAASL,EAAEM,4BAA4BF,EAAEG,qBAAqBjB,KAAKkB,YAAYC,EAAEnB,KAAKoB,QAAQvB,GAAGwB,EAAET,EAAEU,oBAAoBC,gBAAgBJ,GAAGP,EAAEY,gBAAgBL,GAAGT,EAAEe,sBAAqB,GAAIf,EAAEgB,cAAa,GAAG,GAAG,GAAG,GAAIhB,EAAEiB,cAAc,EAAE,EAAE,EAAE,GAAGjB,EAAEkB,cAAc,GAAGlB,EAAEmB,MAAMnB,EAAEoB,GAAGC,iBAAiBrB,EAAEoB,GAAGE,kBAAkBtB,EAAEe,sBAAqB,aAAcQ,KAAKjC,KAAKkC,WAAWC,aAAa5B,aAAa0B,KAAKjC,KAAKkC,WAAWE,cAAcvC,aAAaoC,KAAKjC,KAAKkC,WAAWG,YAAY9B,KAAKiB,gBAAgBH,GAAGX,EAAEa,gBAAgBvB,KAAKe,UAAUH,EAAE0B,kBAAkBzC,EAAEG,KAAKuC,eAAe,IAAI,EAAEvC,KAAKwC,iBAAiB9B,EAAE+B,uBAAsB,GAAI/B,EAAEgC,oBAAoB,GAAG9B,EAAE+B,YAAYjC,EAAES,EAAEyB,aAAa,MAAMhC,EAAEiC,eAAehD,EAAEG,KAAKwC,iBAAiB1B,EAAEgC,qBAAqBtC,mBAAmBD,mIAAawC,MAAMvC,mBAAmBD,MAA7B,CAAgCyC,UAAUhD,KAAKgD,UAAUC,QAAQjD,KAAKkD,gBAAgBC,cAAc,qBAAG/B,QAAQvB,SAASY,QAAQC,EAAEC,QAAQC,GAAGf,GAAGuD,MAAMtC,EAAEuC,OAAOlC,GAAGT,EAAE4C,iBAAiBxC,IAAId,KAAKC,YAAYkB,IAAInB,KAAKE,eAAeF,KAAKC,WAAWa,EAAEd,KAAKE,YAAYiB,EAAEnB,KAAKK,mBAAmBA,cAAckD,OAAOzC,EAAEK,OAAO,OAAOqC,EAAE,CAACC,OAAO,KAAKC,YAAY,KAAKC,SAAS,KAAKC,aAAa,KAAKC,SAAS,MAAMT,MAAMtC,EAAEuC,OAAOlC,GAAGE,EAAE,CAACyC,YAAY,EAAEC,mBAAmB,QAAQ1D,cAAc,IAAI2D,EAAEtD,EAAEW,EAAEmC,EAAE5C,EAAEqD,iCAAiCjE,KAAKK,eCAp/C,IAAI6D,EAAE,cAAc/C,EAAEP,IAAId,uBAAuBC,WAAWC,KAAKmE,UAAU,IAAItE,EAAEuE,cAAcC,uBAAuBrE,KAAKsE,QAAQC,IAAIvE,KAAKwE,WAAWC,GAAG,iBAAiB,IAAIzE,KAAKqE,yBAAyB,oBAAoBK,cAAcJ,QAAQK,OAAO,oBAAoB3E,KAAKmE,UAAUS,oBAAoBC,QAAQtE,EAAEG,UAAU,KAAKoE,OAAOvE,IAAIwE,aAAaC,cAAcC,WAAWZ,4BAA4BF,UAAUS,oBAAoB5E,KAAKwE,WAAWU,SAAS,CAAC3E,EAAEG,IAAIV,KAAKmE,UAAUgB,WAAW5E,EAAE4D,UAAUzD,OAAOwD,EAAEF,EAAE,CAACoB,EAAE,0CAA0ClB,GAAM,IAACmB,EAAEnB"}