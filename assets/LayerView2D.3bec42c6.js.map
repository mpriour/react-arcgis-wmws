{"version":3,"file":"LayerView2D.3bec42c6.js","sources":["../../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../../node_modules/@arcgis/core/views/layers/support/Geometry.js","../../node_modules/@arcgis/core/views/layers/support/Path.js","../../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n"],"names":["e","s","r","o","p","i","constructor","arguments","this","type","left","right","top","bottom","clone","_get","t","Number","String","json","write","prototype","readOnly","y","n","base","key","typeMap","extent","m","polygon","c","geometry","types","read","a","path","ofType","rect","h","d","l","p2","e2","clips","moving","attached","lastUpdateId","updateRequested","initialize","t2","container","fadeTransitionEnabled","opacity","handles","add","visible","t3","view","requestUpdate","e3","layer","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","when","destroy","detach","remove","suspended","isUpdating","isVisibleAtScale","s2","i2","minScale","maxScale","s3","processUpdate","isFulfilled","isResolved","_set","update","isRendering","canResume","super","scale","set"],"mappings":"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"}