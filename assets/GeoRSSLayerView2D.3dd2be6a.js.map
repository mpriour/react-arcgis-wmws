{"version":3,"file":"GeoRSSLayerView2D.3dd2be6a.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/GeoRSSLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import s from\"../../../PopupTemplate.js\";import i from\"../../../core/Collection.js\";import{init as o}from\"../../../core/watchUtils.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../renderers/SimpleRenderer.js\";import{fromJSON as a}from\"../../../renderers/support/jsonUtils.js\";import l from\"../../../rest/support/FeatureSet.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import n from\"./graphics/GraphicContainer.js\";import m from\"./graphics/GraphicsView2D.js\";import c from\"../../layers/LayerView.js\";let y=class extends(h(c)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(e,r){if(this.suspended||!this.graphicsViews.length)return Promise.resolve(null);const s=this.graphicsViews.reverse().map((s=>s.hitTest(e,r)));return Promise.all(s).then((e=>e.filter(((e,r)=>(e&&(e.popupTemplate=this._popupTemplates.get(this.graphicsViews[r]),e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))}update(e){if(this.graphicsViews)for(const r of this.graphicsViews)r.processUpdate(e)}attach(){this.layer.featureCollections.forEach((e=>{const o=l.fromJSON(e.featureSet),t=new(i.ofType(r))(o.features);let p;if(this._graphicsViewMap[o.geometryType])p=this._graphicsViewMap[o.geometryType],p.graphics.addMany(t);else{const r=e.layerDefinition.drawingInfo,i=e.popupInfo?s.fromJSON(e.popupInfo):null,l=a(r.renderer);p=new m({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:t,renderer:l,container:new n(this.view.featuresTilingScheme)}),this._graphicsViewMap[o.geometryType]=p,this._popupTemplates.set(p,i),\"polygon\"!==o.geometryType||this.layer.polygonSymbol?\"polyline\"!==o.geometryType||this.layer.lineSymbol?\"point\"!==o.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=l.symbol):this.layer.lineSymbol=l.symbol:this.layer.polygonSymbol=l.symbol,this.graphicsViews.push(p),this.container.addChild(p.container)}})),this.handles.add([o(this.layer,\"polygonSymbol\",(e=>{this._graphicsViewMap.polygon.renderer=new p({symbol:e})})),o(this.layer,\"lineSymbol\",(e=>{this._graphicsViewMap.polyline.renderer=new p({symbol:e})})),o(this.layer,\"pointSymbol\",(e=>{this._graphicsViewMap.point.renderer=new p({symbol:e})}))])}detach(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy();this.graphicsViews.length=0}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}};y=e([t(\"esri.views.2d.layers.GeoRSSLayerView2D\")],y);var g=y;export{g as default};\n"],"names":["y","h","c","constructor","arguments","this","_graphicsViewMap","_popupTemplates","Map","graphicsViews","hitTest","e2","r2","suspended","length","Promise","resolve","s","reverse","map","s2","all","then","e3","filter","e4","r3","popupTemplate","get","layer","sourceLayer","update","processUpdate","attach","featureCollections","forEach","o","l","fromJSON","featureSet","t","ofType","r","features","p","geometryType","graphics","addMany","layerDefinition","drawingInfo","i2","popupInfo","l2","a","renderer","m","requestUpdateCallback","requestUpdate","view","container","n","featuresTilingScheme","set","polygonSymbol","lineSymbol","pointSymbol","symbol","push","addChild","handles","add","polygon","polyline","point","detach","removeAllChildren","destroy","moveStart","moveEnd","viewChange","e","g"],"mappings":"6sCAI0zB,IAAIA,EAAE,cAAcC,EAAEC,IAAIC,uBAAuBC,WAAWC,KAAKC,iBAAiB,GAAGD,KAAKE,gBAAgB,IAAIC,IAAIH,KAAKI,cAAc,GAAGC,QAAQC,EAAEC,MAAMP,KAAKQ,YAAYR,KAAKI,cAAcK,cAAcC,QAAQC,QAAQ,YAAYC,EAAEZ,KAAKI,cAAcS,UAAUC,QAAQC,EAAEV,QAAQC,EAAEC,YAAYG,QAAQM,IAAIJ,GAAGK,SAASC,EAAEC,QAAQ,CAACC,EAAEC,WAAWC,cAActB,KAAKE,gBAAgBqB,IAAIvB,KAAKI,cAAciB,IAAID,EAAEI,MAAMxB,KAAKwB,MAAMJ,EAAEK,YAAYzB,KAAKwB,SAASJ,KAAK,IAAI,OAAOM,OAAOpB,MAAMN,KAAKI,wBAAwBG,KAAKP,KAAKI,gBAAgBuB,cAAcrB,GAAGsB,cAAcJ,MAAMK,mBAAmBC,mBAAmBC,EAAEC,EAAEC,SAAS3B,EAAE4B,YAAYC,EAAE,MAAMC,OAAOC,GAAb,CAAiBN,EAAEO,cAAcC,KAAKvC,KAAKC,iBAAiB8B,EAAES,gBAAgBxC,KAAKC,iBAAiB8B,EAAES,cAAcD,EAAEE,SAASC,QAAQP,OAAO,OAAOE,EAAE/B,EAAEqC,gBAAgBC,YAAYC,EAAEvC,EAAEwC,UAAUlC,EAAEqB,SAAS3B,EAAEwC,WAAW,KAAKC,EAAEC,EAAEX,EAAEY,YAAY,IAAIC,EAAE,CAACC,sBAAsB,IAAInD,KAAKoD,gBAAgBC,KAAKrD,KAAKqD,KAAKZ,SAASN,EAAEc,SAASF,EAAEO,UAAU,IAAIC,EAAEvD,KAAKqD,KAAKG,wBAAwBxD,KAAKC,iBAAiB8B,EAAES,cAAcD,EAAEvC,KAAKE,gBAAgBuD,IAAIlB,EAAEM,GAAG,YAAYd,EAAES,cAAcxC,KAAKwB,MAAMkC,cAAc,aAAa3B,EAAES,cAAcxC,KAAKwB,MAAMmC,WAAW,UAAU5B,EAAES,cAAcxC,KAAKwB,MAAMoC,mBAAmBpC,MAAMoC,YAAYb,EAAEc,QAAQ7D,KAAKwB,MAAMmC,WAAWZ,EAAEc,OAAO7D,KAAKwB,MAAMkC,cAAcX,EAAEc,OAAO7D,KAAKI,cAAc0D,KAAKvB,GAAGvC,KAAKsD,UAAUS,SAASxB,EAAEe,eAAetD,KAAKgE,QAAQC,IAAI,CAAClC,EAAE/B,KAAKwB,MAAM,0BAA0BvB,iBAAiBiE,QAAQjB,SAAS,IAAIV,EAAE,CAACsB,OAAOvD,OAAOyB,EAAE/B,KAAKwB,MAAM,uBAAuBvB,iBAAiBkE,SAASlB,SAAS,IAAIV,EAAE,CAACsB,OAAOvD,OAAOyB,EAAE/B,KAAKwB,MAAM,wBAAwBvB,iBAAiBmE,MAAMnB,SAAS,IAAIV,EAAE,CAACsB,OAAOvD,SAAS+D,cAAcf,UAAUgB,8BAA8BhE,KAAKN,KAAKI,gBAAgBmE,eAAenE,cAAcK,OAAO,EAAE+D,aAAaC,WAAWC,uBAAuBpE,KAAKN,KAAKI,gBAAgBsE,eAAe/E,EAAEgF,EAAE,CAACxC,EAAE,2CAA2CxC,GAAM,IAACiF,EAAEjF"}