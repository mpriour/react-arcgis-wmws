{"version":3,"file":"Graphics3DScaleVisibility.1e789161.js","sources":["../../node_modules/@arcgis/core/symbols/support/defaults3D.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js","../../node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as o}from\"../../core/maybe.js\";import r from\"../FillSymbol3DLayer.js\";import e from\"../LineSymbol3D.js\";import m from\"../MeshSymbol3D.js\";import l from\"../PointSymbol3D.js\";import t from\"../PolygonSymbol3D.js\";import{defaultPointSymbol2D as i,defaultPolylineSymbol2D as s,defaultPolygonSymbol2D as n}from\"./defaults.js\";import{defaultColor as p,defaultOutlineColor as y}from\"./defaultsJSON.js\";const a=l.fromSimpleMarkerSymbol(i),f=e.fromSimpleLineSymbol(s),c=t.fromSimpleFillSymbol(n),u=new m({symbolLayers:[new r({material:{color:p},edges:{type:\"solid\",size:\"1px\",color:y}})]});function S(r){if(o(r))return null;switch(r.type){case\"mesh\":return u;case\"point\":case\"multipoint\":return a;case\"polyline\":return f;case\"polygon\":case\"extent\":return c}return null}export{S as getDefaultSymbol3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import{isSome as o,isNone as s}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{projectPoint as c}from\"../../../../geometry/projection.js\";import{getObjectId as p}from\"../../../../layers/graphics/dehydratedFeatures.js\";import n from\"../../../../layers/graphics/OptimizedFeature.js\";import h from\"../../../../layers/graphics/OptimizedGeometry.js\";import{optimizedFeatureQueryEngineAdapter as l}from\"../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\";let d=class extends e{constructor(t){super(t),this.events=new r,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.spatialReference=null,this.featureAdapter={getAttribute:(t,e)=>\"graphic\"in t?t.graphic.attributes[e]:l.getAttribute(t,e),getAttributes:t=>\"graphic\"in t?t.graphic.attributes:l.getAttributes(t),getObjectId:t=>\"graphic\"in t?p(t.graphic,this.objectIdField):l.getObjectId(t),getGeometry:t=>\"graphic\"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):l.getGeometry(t),getCentroid:(t,e)=>{if(\"graphic\"in t){let r=null;o(t.centroid)?r=t.centroid:\"point\"===t.graphic.geometry.type&&c(t.graphic.geometry,u,this.spatialReference)&&(r=u);const i=new Array(2+(e.hasZ?1:0)+(e.hasM?1:0));return s(r)?(i[0]=0,i[1]=0,i[2]=0,i[3]=0):(i[0]=r.x,i[1]=r.y,e.hasZ&&(i[2]=r.hasZ?r.z:0),e.hasM&&(i[e.hasZ?3:2]=r.hasM?r.m:0)),new h([],i)}return l.getCentroid(t,e)},cloneWithGeometry:(t,e)=>\"graphic\"in t?new n(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):l.cloneWithGeometry(t,e)}}forEach(t){this.forAllGraphics((e=>{t(e)}))}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,e,r){const s=this.getSpatialIndex();for(const i of t){const t=this.featureAdapter.getObjectId(i);o(s.getBounds(t,r))&&e(r)}}};t([i({constructOnly:!0})],d.prototype,\"getSpatialIndex\",void 0),t([i({constructOnly:!0})],d.prototype,\"forAllGraphics\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([i({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([i({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),d=t([a(\"esri.views.3d.layers.graphics.Graphics3DFeatureStore\")],d);const u={type:\"point\",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};var g=d;export{d as Graphics3DFeatureStore,g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.schedule=e,this.sharedResources=null,this.streamDataRequester=null,this.elevationProvider=null,this.renderer=null,this.stage=null,this.clippingExtent=null,this.renderCoordsHelper=null,this.overlaySR=null,this.layer=null,this.layerView=null,this.localOriginFactory=null,this.featureExpressionInfoContext=null,this.screenSizePerspectiveEnabled=!0,this.slicePlaneEnabled=!1,this.physicalBasedRenderingEnabled=!1,this.isAsync=!1}}class l{}export{e as Graphics3DSymbolCreationContext,l as Graphics3DSymbolLayerCreationContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../../../core/asyncUtils.js\";import{isAborted as t,createAbortError as a}from\"../../../../core/promiseUtils.js\";import{make as o}from\"./Graphics3DCalloutSymbolLayerFactory.js\";import l from\"./Graphics3DSymbol.js\";class e extends l{constructor(r,t,a){super(r,t,a),this.calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this.calloutSymbolLayer=o(this.symbol,t))}async doLoad(o){const l=this.calloutSymbolLayer?r(this.calloutSymbolLayer.load()):null;try{await super.doLoad(o)}catch(i){var e;throw null==(e=this.calloutSymbolLayer)||e.abortLoad(),i}var s;if(t(o))throw null==(s=this.calloutSymbolLayer)||s.abortLoad(),a();l&&await l}destroy(){super.destroy(),this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()}createGraphics3DGraphic(r,t){const a=super.createGraphics3DGraphic(r,t);if(this.calloutSymbolLayer){const t=this.createCalloutGraphic(r);t&&a.addAuxiliaryGraphic(t)}return a}globalPropertyChanged(r,t){return!!super.globalPropertyChanged(r,t)&&(!this.calloutSymbolLayer||this.calloutSymbolLayer.globalPropertyChanged(r,t,(r=>this._getCalloutGraphicLayer(r))))}updateGeometry(r,t){const a=super.updateGeometry(r,t);if(a&&this.calloutSymbolLayer){const a=this._getCalloutGraphicLayer(r);if(a)return this.calloutSymbolLayer.updateGeometry(a,t)}return a}createCalloutGraphic(r){const t=r.renderingInfo,a={renderer:t.renderer,symbol:t.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:\"world\",elevationOffset:0,materialCollection:null};return r.renderingInfo=a,this.calloutSymbolLayer.createGraphics3DGraphic(r)}_getCalloutGraphicLayer(r){for(const t of r._auxiliaryGraphics)if(t.graphics3DSymbolLayer===this.calloutSymbolLayer)return t}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{remove as t}from\"../../../../core/arrayUtils.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{getObjectId as e}from\"../../../../layers/graphics/dehydratedFeatures.js\";class s{constructor(t){this.graphicsCore=t,this.idToState=new Map,this.states=new Set;const i=t.owner.layer&&t.owner.layer.objectIdField;i?(this.getGraphicId=t=>e(t,i),this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicByObjectId(t)):(this.getGraphicId=t=>t.uid,this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicById(t))}destroy(){this.idToState.clear(),this.states.forEach(((t,i)=>this.remove(i)))}add(t){const e={remove:()=>this.remove(t)};if(this.states.has(t))return e;const s=this.getGraphicId(t.graphic),a=this.getGraphics3DGraphicById(s);this.states.has(t)||this.states.add(t);return this.ensureStateList(s).push(t),t.displaying=!!i(a)&&a.isVisible(),t.isDraped=!!i(a)&&a.isDraped,t.tracking=!0,i(a)&&t.emit(\"changed\",{}),e}remove(i){if(this.states.has(i)){if(this.idToState.size){const e=this.getGraphicId(i.graphic),s=this.idToState.get(e);s&&(t(s,i),0===s.length&&this.idToState.delete(e))}this.states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this.forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit(\"changed\",{})}))}removeGraphic(t){this.forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this.forEachState(t,(t=>{t.emit(\"changed\",{})}))}updateGraphicVisibility(t){this.forEachState(t,(i=>{i.displaying=t.isVisible()}))}allGraphicsDeleted(){this.states.forEach((t=>{t.displaying=!1}))}ensureStateList(t){const i=this.idToState.get(t);if(i)return i;const e=new Array;return this.idToState.set(t,e),e}forEachState(t,i){if(0===this.states.size||0===this.idToState.size)return;const e=this.getGraphicId(t.graphic),s=this.idToState.get(e);null!=s&&s.forEach(i)}}export{s as GraphicStateTracking};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import s from\"../../../../core/has.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{PooledRBush as n}from\"../../../../core/libs/rbush/PooledRBush.js\";import{fromRect as o}from\"../../../../geometry/support/aaBoundingBox.js\";import{getObjectId as a}from\"../../../../layers/graphics/dehydratedFeatures.js\";let d=class extends e{constructor(t){super(t),this._index=new n(9,s(\"csp-restrictions\")?t=>({minX:t.extent[0],minY:t.extent[1],maxX:t.extent[2],maxY:t.extent[3]}):[\".extent[0]\",\".extent[1]\",\".extent[2]\",\".extent[3]\"]),this._missing=new Set,this._boundsByFeature=new Map,this.spatialReference=null,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.updating=!1}setup(t){this._addMany(t)}destroy(){this._missing.clear(),this._index.destroy(),this._index=null,this._boundsByFeature.clear(),this._boundsByFeature=null}update(){this._missing.size>0&&(this._addMany(Array.from(this._missing.values())),this.updating=!1,this._missing.clear())}get updatingRemaining(){return this._missing.size}queryGraphicUIDsInExtent(t,e,s){e.equals(this.spatialReference)&&(u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>s(t.graphic.uid))))}add(t){this._missing.add(t),this.updating=!0}remove(t){if(this._missing.delete(t))return void(this.updating=this._missing.size>0);this._index.remove(t);const e=a(t.graphic,this._get(\"objectIdField\"));null!=e&&this._boundsByFeature.delete(e)}_addMany(t){if(0===t.length)return;const e=this._get(\"objectIdField\");for(const s of t){s.computeExtent(this.spatialReference);const t=a(s.graphic,e);null!=t&&this._boundsByFeature.set(t,s.extent)}this._index.load(t)}clear(){this._index.clear(),this._missing.clear(),this._boundsByFeature.clear(),this.updating=!1}forEachInBounds(t,e){u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>{e(t)}))}getBounds(t,e){this.update();const s=this._boundsByFeature.get(t);return s?o(e,s):null}};t([i({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([i({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([i()],d.prototype,\"updating\",void 0),t([i({readOnly:!0})],d.prototype,\"updatingRemaining\",null),d=t([r(\"esri.views.3d.layers.graphics.SpatialIndex2D\")],d);const u={minX:0,minY:0,maxX:0,maxY:0};export{d as SpatialIndex2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import o from\"../../../../core/Evented.js\";import r from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{unwrapOr as i}from\"../../../../core/maybe.js\";import{getMetersPerVerticalUnitForSR as n}from\"../../../../core/unitUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{g as c}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec3f64.js\";import{empty as m,toRect as p,expandWithVec3 as h}from\"../../../../geometry/support/aaBoundingBox.js\";import{empty as u}from\"../../../../geometry/support/aaBoundingRect.js\";import{getMetersPerUnit as f}from\"../../../../symbols/support/unitConversionUtils.js\";import{Intersector as v}from\"../../webgl-engine/lib/Intersector.js\";const y=s.getLogger(\"esri.views.3d.layers.support.StageLayerElevationProvider\"),g=1;let j=class extends(o.EventedMixin(t)){constructor(e){super(e),this.elevationOffset=0,this._layerHandes=new r}initialize(){this.renderCoordsHelper=this.view.renderCoordsHelper,this.intersectLayers=[this.stageLayer],this.intersector=new v(this.view.state.viewingMode),this.intersector.options.store=0;const e=this.computeLayerExtent(this.stageLayer);this.zmin=e[2],this.zmax=e[5];const t=this.stageLayer.events;this._layerHandes.add([t.on(\"layerObjectAdded\",(e=>this.objectChanged(e.object))),t.on(\"layerObjectRemoved\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryAdded\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryRemoved\",(e=>this.objectChanged(e.object))),t.on(\"vertexAttrsUpdated\",(e=>this.objectChanged(e.object))),t.on(\"objectTransformation\",(e=>this.objectChanged(e)))])}dispose(){this._layerHandes.destroy()}elevationInfoChanged(){const e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&\"on-the-ground\"!==e.mode){const t=n(this.layer.spatialReference),o=f(e.unit);this.elevationOffset=i(e.offset,0)*o/t}else this.elevationOffset=0}getElevation(e,t,o,r){if(C[0]=e,C[1]=t,C[2]=o,!this.renderCoordsHelper.toRenderCoords(C,r,C))return y.error(\"could not project point for elevation alignment\"),null;const s=this.elevationOffset,i=this.zmin+s,n=this.zmax+s;this.renderCoordsHelper.setAltitude(B,n,C),this.renderCoordsHelper.setAltitude(R,i,C);const a=e=>e.metadata&&e.metadata.isElevationSource;return this.intersector.reset(B,R),this.intersector.intersect(this.intersectLayers,null,null,g,null,a),this.intersector.results.min.getIntersectionPoint(C)?this.renderCoordsHelper.getAltitude(C):null}objectChanged(e){var t;if(null==(t=e.metadata)||!t.isElevationSource||!this.spatialReference)return;m(b),e.metadata.lastValidElevationBB.isEmpty()||this.expandExtent(e.metadata.lastValidElevationBB.min,e.metadata.lastValidElevationBB.max,b);const o=e.boundingVolumeWorldSpace.min,r=e.boundingVolumeWorldSpace.max;this.expandExtent(o,r,b),p(b,x),this.zmin=Math.min(this.zmin,b[2]),this.zmax=Math.max(this.zmax,b[5]),E.extent=x,E.spatialReference=this.spatialReference,this.emit(\"elevation-change\",E),c(e.metadata.lastValidElevationBB.min,o),c(e.metadata.lastValidElevationBB.max,r)}computeLayerExtent(e){return m(b),e.objects.forAll((e=>this.expandExtent(e.boundingVolumeWorldSpace.min,e.boundingVolumeWorldSpace.max,b))),b}expandExtent(e,t,o){for(let r=0;r<8;++r)C[0]=1&r?e[0]:t[0],C[1]=2&r?e[1]:t[1],C[2]=4&r?e[2]:t[2],this.renderCoordsHelper.fromRenderCoords(C,C,this.spatialReference),h(o,C);return o}};e([a({constructOnly:!0})],j.prototype,\"layer\",void 0),e([a({constructOnly:!0})],j.prototype,\"stageLayer\",void 0),e([a({constructOnly:!0})],j.prototype,\"view\",void 0),e([a({readOnly:!0,aliasOf:\"view.spatialReference\"})],j.prototype,\"spatialReference\",void 0),j=e([l(\"esri.views.3d.layers.support.StageLayerElevationProvider\")],j);const b=m(),x=u(),E={spatialReference:null,extent:x,context:\"scene\"},C=d(),B=d(),R=d();export{j as StageLayerElevationProvider};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import\"../../../../renderers/ClassBreaksRenderer.js\";import\"../../../../renderers/DictionaryRenderer.js\";import\"../../../../renderers/DotDensityRenderer.js\";import\"../../../../renderers/HeatmapRenderer.js\";import\"../../../../renderers/Renderer.js\";import\"../../../../renderers/SimpleRenderer.js\";import t from\"../../../../renderers/UniqueValueRenderer.js\";import\"../../../../renderers/support/jsonUtils.js\";import\"../../../../symbols.js\";import i from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import r from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import a from\"../../../../core/Logger.js\";import{someMap as n,findInMap as o}from\"../../../../core/MapUtils.js\";import{isFinite as l}from\"../../../../core/mathUtils.js\";import{isSome as h,unwrapOr as d,isNone as p,destroyMaybe as c,removeMaybe as y,get as m,unwrap as g}from\"../../../../core/maybe.js\";import u from\"../../../../core/PooledArray.js\";import{createAbortController as b,throwIfAborted as f,eachAlways as v,createDeferred as C,isAbortError as S}from\"../../../../core/promiseUtils.js\";import{schedule as w}from\"../../../../core/scheduling.js\";import{when as G,whenFalse as x,init as P,whenOnce as _,on as R}from\"../../../../core/watchUtils.js\";import{property as D}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as I}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as E,isEmpty as U}from\"../../../../core/accessorSupport/diffUtils.js\";import{s as O,b as j,a as L}from\"../../../../chunks/vec3.js\";import{c as V}from\"../../../../chunks/vec3f64.js\";import{projectVectorToVector as A,projectXYZToVector as F,canProjectWithoutEngine as k,projectBuffer as T}from\"../../../../geometry/projection.js\";import{create as M,center as W,fromRect as z,equals as B}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as q}from\"../../../../geometry/support/aaBoundingRect.js\";import N from\"../../../../layers/Layer.js\";import{getObjectId as H,computeAABB as $,hasGeometry as Z}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as Q}from\"../../../../layers/graphics/hydratedFeatures.js\";import{isSupportedRenderer3D as J,validateTo3D as K}from\"../../../../renderers/support/rendererConversion.js\";import{loadArcade as X}from\"../../../../support/arcadeOnDemand.js\";import{getDefaultSymbol3D as Y}from\"../../../../symbols/support/defaults3D.js\";import{to3D as ee}from\"../../../../symbols/support/symbolConversion.js\";import{ViewElevationProvider as te}from\"./ElevationQuery.js\";import{extractExpressionInfo as ie,createContext as re}from\"./featureExpressionInfoUtils.js\";import se from\"./Graphics3DFeatureStore.js\";import ae from\"./Graphics3DGraphicCreationContext.js\";import{Graphics3DSymbolCreationContext as ne}from\"./Graphics3DSymbolCreationContext.js\";import{make as oe}from\"./Graphics3DSymbolFactory.js\";import le from\"./Graphics3DWebStyleSymbol.js\";import{GraphicStateTracking as he}from\"./GraphicStateTracking.js\";import{computeCentroid as de}from\"./graphicUtils.js\";import{SpatialIndex2D as pe}from\"./SpatialIndex2D.js\";import{averageSymbolComplexities as ce,defaultSymbolComplexity as ye}from\"./symbolComplexity.js\";import{StageLayerElevationProvider as me}from\"../support/StageLayerElevationProvider.js\";import{toBoundingRect as ge}from\"../../support/extentUtils.js\";import{PropertiesPool as ue}from\"../../support/PropertiesPool.js\";import{GridLocalOriginFactory as be}from\"../../webgl-engine/lib/GridLocalOriginFactory.js\";import{WebGLLayer as fe}from\"../../webgl-engine/lib/WebGLLayer.js\";import{ImmediateTask as ve,noBudget as Ce,TaskPriority as Se}from\"../../../support/Scheduler.js\";import we from\"../../../../geometry/Extent.js\";import Ge from\"../../../../geometry/Point.js\";import xe from\"../../../../symbols/LabelSymbol3D.js\";import Pe from\"../../../../symbols/TextSymbol.js\";import _e from\"../../../../symbols/WebStyleSymbol.js\";var Re;const De=V(),Ie=M(),Ee=a.getLogger(\"esri.views.3d.layers.graphics.Graphics3DCore\");let Ue=Re=class extends i{constructor(e){super(e),this.propertiesPool=new ue({computedExtent:we},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this.graphicStateTracking=null,this.symbolCreationContext=new ne(((e,t)=>this._frameTask.schedule(e,t))),this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this.graphicsDrapedUids=new Set,this.graphicsBySymbol=new Map,this.symbolConversionCache=new Map,this.symbols=new Map,this.graphicsWithoutSymbol=new Map,this.graphicsWaitingForSymbol=new Set,this._handles=new s,this._frameTask=ve,this.suspendSymbolCleanup=!1,this._spatialReference=null,this.arcadeOnDemand=null,this.rendererChangeAbortController=null,this.elevationInfoChangeAbortController=null,this.setupAbortController=null,this.elevationAlignment=null,this.scaleVisibility=null,this.filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this.featureStore=null,this.deconflictor=null,this.labeler=null,this.objectStates=null,this.viewElevationProvider=null,this.stageLayerElevationProvider=null,this.sharedSymbolResourcesOwnerHandle=null,this.whenGraphics3DGraphicRequests={},this.pendingUpdates=new Map,this.numberOfGraphics=0,this.numberOfGraphicsProvidingElevation=0,this.pendingAdds=0,this.pendingRemoves=0,this.pendingUpdatesPool=new u({allocator:e=>e||new Oe,deallocator:e=>(e.clear(),e)}),this.symbolWarningLogged=!1,this.geometryWarningLogged=!1,this.objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new u,this.preferredUpdatePolicy=1,this.forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=void 0,this._startCreateGraphics=!1}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new pe({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,spatialReference:this._spatialReference,hasZ:this.hasZ,hasM:this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get effectiveUpdatePolicy(){return h(this.currentRenderer)&&\"dictionary\"===this.currentRenderer.type?0:d(this.forcedUpdatePolicy,this.preferredUpdatePolicy)}get updating(){var e,t;return!!(this.graphicsWaitingForSymbol.size>0||this.running||null!=(e=this.elevationAlignment)&&e.updating||h(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(t=this.filterVisibility)&&t.updating||this.rendererChangeAbortController||this.elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating)}get running(){var e;return this.pendingUpdates.size>0||!(null==(e=this._spatialIndex)||!e.updating)}get suspendedOrOutsideOfView(){var e;return this.owner.suspended||(null==(e=this.owner.suspendInfo)?void 0:e.outsideOfView)}get updatingRemaining(){var e,t;return this.updating?this.pendingUpdates.size+.1*((null==(e=this._spatialIndex)?void 0:e.updatingRemaining)||0)+.1*((null==(t=this.elevationAlignment)?void 0:t.updatingRemaining)||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,t=e?e.graphics3D.minTotalNumberOfFeatures:0,i=e?e.graphics3D.maxTotalNumberOfFeatures:0,r=e?e.graphics3D.maxTotalNumberOfPrimitives:0,s=this.averageSymbolComplexity,a=Math.max(1,h(s)?s.primitivesPerFeature:1),n=h(s)&&s.drawCallsPerFeature>0?i/s.drawCallsPerFeature*.3:i,o=Math.ceil(r/a),l=Math.max(t,Math.min(i,o,n)),d=this._get(\"displayFeatureLimit\");return d&&d.minimumTotalNumberOfFeatures===t&&d.maximumTotalNumberOfFeatures===i&&d.maximumTotalNumberOfPrimitives===r&&d.averageSymbolComplexity===s&&d.maximumNumberOfFeatures===l?d:{minimumTotalNumberOfFeatures:t,maximumTotalNumberOfFeatures:i,maximumTotalNumberOfPrimitives:r,averageSymbolComplexity:s,maximumNumberOfFeatures:l}}get averageSymbolComplexity(){const e=ce(this.symbolComplexities),t=this._get(\"averageSymbolComplexity\");return 0===e.numComplexities||h(t)&&(e.estimated&&(t.primitivesPerFeature>=e.primitivesPerFeature||t.primitivesPerCoordinate>=e.primitivesPerCoordinate||t.drawCallsPerFeature>=e.drawCallsPerFeature)||t.primitivesPerFeature===e.primitivesPerFeature&&t.primitivesPerCoordinate===e.primitivesPerCoordinate&&t.drawCallsPerFeature===e.drawCallsPerFeature)?t:e}get spatialReference(){return this._spatialReference}get usedMemory(){const e=h(this.averageSymbolComplexity)&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this.numberOfGraphics:0;return this._usedMemory+e}get usedMemoryPerGraphic(){if(this._usedMemory&&this.numberOfGraphics)return Math.abs(this.pendingAdds-this.pendingRemoves)/this.numberOfGraphics>30?0:this._usedMemory/this.numberOfGraphics;if(h(this.averageSymbolComplexity)){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return Math.max(0,(this.pendingAdds-this.pendingRemoves)*this.usedMemoryPerGraphic)}get symbolComplexities(){return this.currentRenderer?this.getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this.getSymbolComplexitiesUsed()}getConvertedSymbol(e){if(\"web-style\"===e.type)return e.clone();const t=this.symbolConversionCache.get(e.id);if(void 0!==t)return t;const i=ee(e,!0,!1,this.hasLabelingContext(e)),r=i.symbol||null;return r||i.error&&Ee.error(i.error.message),this.symbolConversionCache.set(e.id,r),r}getSymbolComplexitiesUsedOrRenderer(e){if(p(e))return[];const t=e.getSymbols(),i=\"backgroundFillSymbol\"in e&&e.backgroundFillSymbol;if(!(i||t&&t.length))return[];const r=[],s=this.getSymbolComplexityUsedOrRenderer(i);h(s)&&r.push(s);for(const a of t){const e=this.getSymbolComplexityUsedOrRenderer(a);h(e)&&r.push(e)}return r}getSymbolComplexityUsedOrRenderer(e){if(p(e))return null;const t=this.symbols.get(e.id);if(h(t))return t.complexity;const i=this.getConvertedSymbol(e);return i?ye(i):null}getSymbolComplexitiesUsed(){const e=[];return this.symbols.forEach((t=>{h(t)&&e.push(t.complexity)})),e}initialize(){this._spatialReference=this.owner.view.spatialReference,this._set(\"featureStore\",new se({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,hasZ:this.hasZ,hasM:this.hasM,spatialReference:this._spatialReference,getSpatialIndex:()=>this.spatialIndex,forAllGraphics:e=>this.graphics3DGraphics.forEach(e)}))}async setup(e){this.setupAbortController=b();const t=this.setupAbortController.signal;this._set(\"elevationAlignment\",e.elevationAlignment),this._set(\"scaleVisibility\",e.scaleVisibility),this._set(\"filterVisibility\",e.filterVisibility),this._set(\"deconflictor\",e.deconflictor),this._set(\"labeler\",e.labeler),this._set(\"objectStates\",e.objectStates);const i=this.owner.view;this.viewElevationProvider=new te(this._spatialReference,i),this.initializeStage(i,this.layer.uid),this.symbolCreationContext.sharedResources=i.sharedSymbolResources,this.sharedSymbolResourcesOwnerHandle=i.sharedSymbolResources.addGraphicsOwner(this.owner),h(this.currentRenderer)&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=i.sharedSymbolResources.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=i.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.layerView=this.owner,this.symbolCreationContext.localOriginFactory=new be(i.renderSpatialReference),this.symbolCreationContext.elevationProvider=i.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=ie(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await re(r,this._spatialReference,Ee),f(t),this.symbolCreationContext.screenSizePerspectiveEnabled=i.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings.physicallyBasedRenderingEnabled;const s=\"layer\"in this.owner?[\"layer.screenSizePerspectiveEnabled,view.screenSizePerspectiveEnabled\"]:\"view.screenSizePerspectiveEnabled\";this._handles.add([this.watch(\"suspendedOrOutsideOfView\",(()=>this._frameTask.reschedule((()=>this.updateLayerVisibility())))),this.owner.watch(s,(()=>{const e=i.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled;var t;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,null==(t=this.labeler)||t.reset(),this.recreateAllGraphics())})),this.owner.watch(\"slicePlaneEnabled\",(e=>this.slicePlaneEnabledChange(!!e))),this.owner.view.watch(\"pixelRatio\",(()=>this.pixelRatioChange())),this.owner.view.watch(\"qualitySettings.physicallyBasedRenderingEnabled\",(e=>this.physicalBasedRenderingChange(e))),G(i.basemapTerrain,\"tilingScheme\",(e=>{e.spatialReference.equals(this.symbolCreationContext.overlaySR)||(this.symbolCreationContext.overlaySR=i.basemapTerrain.spatialReference),this._handles.has(\"loaded-graphics\")?this.recreateAllGraphics():this._handles.add([R(this.owner,\"loadedGraphics\",\"change\",(e=>this.graphicsCollectionChanged(e)),(()=>this.recreateAllGraphics())),R(this.owner,\"loadedGraphics\",\"after-changes\",(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()),(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()))],\"loaded-graphics\")})),x(this,\"asyncUpdates\",(()=>this.runTask(Ce)),!0),P(this,\"effectiveUpdatePolicy\",(e=>{h(this.stageLayer)&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=0===this.effectiveUpdatePolicy,1===e&&this.runTask(Ce)}),!0)]),this._frameTask=i.resourceController.scheduler.registerTask(Se.GRAPHICS_CORE,this),this.owner.layer&&\"featureReduction\"in this.owner.layer&&this._handles.add(this.owner.watch(\"layer.featureReduction\",(()=>this.deconflictor.featureReductionChange()))),this.notifyChange(\"averageSymbolComplexity\");try{await this.rendererChange(this.layer.renderer)}catch{}f(t),this.setupAbortController=null}abortSetup(){this.setupAbortController&&(this.setupAbortController.abort(),this.setupAbortController=null)}destroy(){this.abortSetup(),this.abortRendererChange(),this.abortElevationInfoChange(),this.owner.view.deconflictor.removeGraphicsOwner(this),this.owner.view.labeler.removeGraphicsOwner(this),this._updatingPendingLoadedGraphicsChange&&(this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=null),this.clear(),h(this.graphicStateTracking)&&(this.graphicStateTracking.destroy(),this.graphicStateTracking=null),this.stage&&(this.stage.remove(this.stageLayer),this.stageLayer=null,this.stage=null),this._handles=c(this._handles),this._frameTask.remove(),this._frameTask=ve,this._spatialReference=null,this._set(\"owner\",null);for(const e in this.whenGraphics3DGraphicRequests)this.whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\",\"Layer has been destroyed\"));this.whenGraphics3DGraphicRequests=null,this.sharedSymbolResourcesOwnerHandle=y(this.sharedSymbolResourcesOwnerHandle),this.propertiesPool=c(this.propertiesPool),this.pendingUpdatesPool=null,this.symbolConversionCache.clear(),this.objectIdInvisibleSet.clear(),this._spatialIndex=c(this._spatialIndex),this.featureStore&&(this.featureStore.destroy(),this._set(\"featureStore\",null))}clear(){var e;this.objectStates&&this.objectStates.allGraphicsDeleted(),h(this.graphicStateTracking)&&this.graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),null==(e=this._spatialIndex)||e.clear(),this.graphics3DGraphics.clear(),this.numberOfGraphics=0,this._usedMemory=0,this.updateLayerVisibility(),this.symbols.forEach((e=>{h(e)&&e.destroy()})),this.symbols.clear(),this.graphicsBySymbol.clear(),this.graphicsWithoutSymbol.clear(),this.graphicsWaitingForSymbol.clear(),this.pendingUpdates.clear(),this.pendingUpdatesPool.clear(),this.pendingAdds=0,this.pendingRemoves=0,this.notifyChange(\"updating\"),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this.featureStore.events.emit(\"changed\")}initializeStage(e,t){this.stage=e._stage,this.stageLayer=new fe({isPickable:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},t),this.stage.add(this.stageLayer);const i=this.stageLayer.events;i.on(\"objectTransformation\",(e=>this.notifyGraphicGeometryChanged(e.metadata.graphicUid))),i.on(\"visibilityChanged\",(e=>this.notifyGraphicVisibilityChanged(e.metadata.graphicUid))),i.on(\"objectGeometryAdded\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),i.on(\"objectGeometryRemoved\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),i.on(\"vertexAttrsUpdated\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)))}notifyGraphicGeometryChanged(e){if(p(this.graphicStateTracking))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(p(this.graphicStateTracking))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicVisibility(t)}updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this.numberOfGraphics>e*je,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,i?(this.stageLayer.isPickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.isPickable=!1,this.hideAllGraphics()),this.updateStageLayerVisibility())}updateStageLayerVisibility(){this.stageLayer.isVisible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return this.graphics3DGraphics.get(e)}getGraphics3DGraphicByObjectId(e){var t;return null!=(t=this.owner.layer)&&t.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer&&this.owner.layer.objectIdField){return H(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer&&this.owner.layer.objectIdField;if(!e)return null;const t=new Map;return this.graphics3DGraphics.forEach((i=>{if(!i)return;const r=i.graphic,s=this._getGraphicObjectID(r,e);h(s)&&t.set(s,i)})),t}get labelsEnabled(){return!(!this.labeler||!this.labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const t=this.deconflictor&&this.deconflictor.labelingInfoChange(e),i=this.labeler&&this.labeler.labelingInfoChange(e);await v([t,i])}updateVisibilityInfo(){this.deconflictor&&this.deconflictor.labelingInfoChange(),this.labeler&&this.labeler.visibilityInfoChange()}get symbolUpdateType(){if(this.pendingUpdates.size>0)return\"unknown\";let e=0,t=0;return n(this.symbols,((i,r)=>{if(h(i)){const s=i.getFastUpdateStatus();if(s.loading>0)return!0;this.graphicsBySymbol.has(r)&&(t+=s.fast,e+=s.slow)}return!1}))?\"unknown\":t>=0&&0===e?\"fast\":e>=0&&0===t?\"slow\":\"mixed\"}runTask(e){this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange(\"running\"),this.running||this.notifyChange(\"updating\"),this.notifyChange(\"updatingRemaining\")}setObjectIdVisibility(e,t){t?this.objectIdInvisibleSet.delete(e):this.objectIdInvisibleSet.add(e);const i=this._findGraphics3DGraphicByObjectId(e);h(i)&&this._updateUserVisibility(i)}_findGraphics3DGraphicByObjectId(e){return o(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(p(e))return!1;const t=e.graphic,i=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&(p(i)||!this.objectIdInvisibleSet.has(i));return e.setVisibilityFlag(0,r,0)}whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this.whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const r=C();return this.whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async boundsForGraphics3DGraphic(e,t){const i=this._spatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,t,s)=>T(e,r,t,e,i,t,s),n=(e,t,r)=>T(e,s,t,e,i,t,r),o=this.viewElevationProvider?{service:this.viewElevationProvider,useViewElevation:h(t)&&t.useViewElevation,minDemResolution:h(t)&&t.minDemResolution,minDemResolutionForPoints:this.owner.view.resolution}:null,l=await e.getProjectedBoundingBox(a,n,o,m(t,\"signal\"));if(!l)return null;const p=l.boundingBox;if(l.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){W(p,De);const t=d(e.getElevation(De[0],De[1],0,i,\"ground\"),0);p[2]=Math.min(p[2],t),p[5]=Math.max(p[5],t)}}return{boundingBox:p,screenSpaceObjects:l.screenSpaceObjects}}whenGraphicBounds(e,t){return _(this.owner,\"loadedGraphics\").then((()=>{const t=this.owner.layer&&this.owner.layer.objectIdField,i=this.owner.loadedGraphics.find((i=>i===e||t&&i.attributes&&e.attributes&&i.attributes[t]===e.attributes[t]));if(i)return this.whenGraphics3DGraphic(i);throw new r(\"internal:graphic-not-part-of-view\",\"Graphic is not part of this view\")})).then((e=>this.boundsForGraphics3DGraphic(e,t)))}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const r=i.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;O(Le,0,0,0);let s=0;if(r.render.num>0){if(!A(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,Ve,t))return null;j(Le,Le,Ve),s++}if(r.draped.num>0){const[e,i]=r.draped.origin,a=d(this.viewElevationProvider.getElevation(e,i,\"ground\"),0);if(O(Ve,e,i,a),!A(Ve,this.viewElevationProvider.spatialReference,Ve,t))return null;j(Le,Le,Ve),s++}return s>1&&L(Le,Le,1/s),new Ge({x:Le[0],y:Le[1],z:Le[2],spatialReference:t})}getSymbolLayerSize(e,t){const i=this.symbols.get(e.id);if(p(i))throw new r(\"internal:symbol-not-part-of-view\",\"Symbol is not part of this view\");const s=e.symbolLayers.indexOf(t);if(-1===s)throw new r(\"internal:missing-symbol-layer\",\"Symbol layer is not in symbol\");const a=i.getSymbolLayerSize(s);if(null==a)throw new r(\"internal:missing-size\",\"Symbol layer has no valid size\");return a}graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t),r=this.graphicsWithoutSymbol.get(t);if(i||r)switch(e.property){case\"visible\":this.graphicUpdateVisibleHandler(i);break;case\"geometry\":this.graphicUpdateGeometryHandler(i,e);break;case\"symbol\":this.graphicUpdateSymbolHandler(i,e)}}graphicUpdateGeometryHandler(e,t){const i=t.graphic.geometry;if(p(i))return void this.recreateGraphic(t.graphic);if(p(e)){const e=t.graphic.symbol&&t.graphic.symbol.id;if(e){const t=this.symbols.get(e);if(h(t)&&0===t.loadStatus)return}return void this.recreateGraphic(t.graphic)}const r=e.graphics3DSymbol;!p(t.newValue)&&r.updateGeometry(e,t.newValue)||this.recreateGraphic(e.graphic),this.expandComputedExtent(i)}graphicUpdateSymbolHandler(e,t){const i=t.graphic,r=h(e)?e.graphics3DSymbol:h(t.oldValue)?this.symbols.get(t.oldValue.id):null;if(p(r)||p(t.newValue))return void this.recreateGraphic(i);const s=r.symbol,a=this.getConvertedSymbol(t.newValue);if(a.type!==s.type||\"web-style\"===a.type||\"web-style\"===s.type)return void this.recreateGraphic(i);const n=this.graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this.recreateGraphic(i);const o=E(s,a);if(p(o))return void this.updateSymbolMapping(s.id,a);const l={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(l),!U(l.diff))return void this.recreateGraphic(i);const d=this._getRenderingInfo(i);if(p(d))return void this.recreateGraphic(i);const c=r.extentPadding;for(const h of l.symbolStatePatches)h();if(c!==r.extentPadding&&this.recomputeExtentPadding(),h(e))for(const h of l.graphics3DGraphicPatches)h(e,d);this.updateSymbolMapping(s.id,a)}graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}recreateGraphics(e){this.suspendSymbolCleanup=!0,this.remove(e),this.add(e),this.suspendSymbolCleanup=!1,1===this.effectiveUpdatePolicy&&this._cleanupSymbols()}recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){this.graphicsWaitingForSymbol.add(e.uid),1===this.graphicsWaitingForSymbol.size&&this.notifyChange(\"updating\")}_endGraphicUpdate(e){e&&(this.graphicsWaitingForSymbol.delete(e.uid),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\")))}recomputeExtentPadding(){let e=0;this.symbols.forEach((t=>{h(t)&&(e=Math.max(e,t.extentPadding))})),this._set(\"extentPadding\",e)}expandComputedExtent(e){const t=Ie,i=e.spatialReference;$(e,t);const r=this._spatialReference,s=Re.tmpVec;if(i.equals(r)||F(t[0],t[1],0,i,s,r)&&(t[0]=s[0],t[1]=s[1],F(t[3],t[4],0,i,s,r),t[3]=s[0],t[4]=s[1]),!(l(t[0])&&l(t[3])&&l(t[1])&&l(t[4])))return;const a=this.computedExtent;let n=null;const o=l(t[2])&&l(t[5]),h=o&&(!a||null==a.zmin||t[2]<a.zmin),d=o&&(!a||null==a.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||h||d)&&(n=this.propertiesPool.get(\"computedExtent\"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=r)}else n=this.propertiesPool.get(\"computedExtent\"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=r;n&&(h&&(n.zmin=t[2]),d&&(n.zmax=t[5]),this._set(\"computedExtent\",n))}abortElevationInfoChange(){this.elevationInfoChangeAbortController&&(this.elevationInfoChangeAbortController.abort(),this.elevationInfoChangeAbortController=null)}async elevationInfoChange(){this.abortElevationInfoChange();const e=b();this.elevationInfoChangeAbortController=e;const t=ie(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await re(t,this._spatialReference,Ee),f(e),this.elevationInfoChangeAbortController=null,this.labeler&&this.labeler.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"elevationInfo\",t)?t.forEach((e=>{const t=e.graphic,i=e.labelGraphics;for(const r of i){r.graphics3DSymbolLayer.updateGraphicElevationContext(t,r)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),this.elevationAlignment&&this.elevationAlignment.elevationInfoChange()}updateStageLayerElevationProvider(){this.stageLayerElevationProvider?(this.layer.elevationInfo&&\"relative-to-scene\"===this.layer.elevationInfo.mode||0===this.numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null):(!this.layer.elevationInfo||this.layer.elevationInfo&&\"relative-to-scene\"!==this.layer.elevationInfo.mode)&&this.numberOfGraphicsProvidingElevation>0&&(this.stageLayerElevationProvider=new me({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register(\"scene\",this.stageLayerElevationProvider))}clearSymbolsAndGraphics(){var e,t,i,r,s;this.clear(),null==(e=this.filterVisibility)||e.clear(),null==(t=this.labeler)||t.reset(),null==(i=this.deconflictor)||i.clear(),null==(r=this.elevationAlignment)||r.clear(),null==(s=this.stageLayer)||s.invalidateSpatialQueryAccelerator(),this.stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null)}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._startCreateGraphics&&(this.clearSymbolsAndGraphics(),this._set(\"computedExtent\",null),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.owner.loadedGraphics&&this.owner.loadedGraphics.length&&this.owner.view.basemapTerrain.tilingScheme&&this.add(this.owner.loadedGraphics.toArray()))}_recreateSymbol(e){const t=this.graphicsBySymbol.get(e),i=[];t&&(t.forEach(((e,t)=>{var r;const s=e.usedMemory;this._conditionalRemove(e,t),null==(r=this._spatialIndex)||r.remove(e),i.push(e.graphic),e.destroy(),this.removeGraphics3DGraphic(t,s),this.updateLayerVisibility(),this.featureStore.events.emit(\"changed\")})),this.graphicsBySymbol.set(e,new Map));const r=this.symbols.get(e);h(r)&&r.destroy(),this.symbols.delete(e),this.add(i)}_conditionalRemove(e,t){e.isDraped&&this.graphicsDrapedUids.delete(t),this.objectStates&&this.objectStates.removeGraphic(e),this.labeler&&this.labeler.removeGraphic(e),this.deconflictor&&this.deconflictor.removeGraphic(e),h(this.graphicStateTracking)&&this.graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain&&this.owner.view.basemapTerrain.tilingScheme?(0===this._updatePolicyForGraphics(e)?this._addDelayed(e):this._addImmediate(e),this.notifyChange(\"updating\")):Ee.error(\"#add()\",\"Cannot add graphics before terrain surface has been initialized\"))}_updatePolicyForGraphics(e){if(1===this.effectiveUpdatePolicy&&(\"mesh\"===this.layer.geometryType||null==this.layer.geometryType))for(const t of e)if(h(t.geometry)&&\"mesh\"===t.geometry.type&&!t.geometry.loaded)return 0;return this.effectiveUpdatePolicy}_addImmediate(e){this.geometryWarningLogged=!1,this.symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,Ee),1);this._cleanupSymbols(),this.labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this.pendingUpdates.get(e);i?i.add?0!==i.state&&i.abortController.abort():this.pendingAdds++:(i=this.pendingUpdatesPool.pushNew(),this.pendingAdds++,this.pendingUpdates.set(e,i)),i.add=t}this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}remove(e){0===this.effectiveUpdatePolicy?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange(\"updating\")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this.pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this.pendingUpdates.delete(e),1===i.state&&i.abortController.abort(),this.pendingAdds--);else{const i=this.pendingUpdatesPool.pushNew();i.remove=t,this.pendingUpdates.set(e,i),this.pendingRemoves++}}0===this.pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}_finishPendingUpdates(){this.pendingUpdatesPool.clear(),this._cleanupSymbols(),(this.pendingAdds||this.pendingRemoves)&&Ee.warn(\"pendingAdds/Removes in inconsistent state!\"),this.pendingAdds=0,this.pendingRemoves=0}_applyPendingUpdates(e){var t;if(this.geometryWarningLogged=!1,this.symbolWarningLogged=!1,0===this.pendingUpdates.size&&null!=(t=this._spatialIndex)&&t.updating)this._spatialIndex.update();else{for(const[t,i]of this.pendingUpdates){if(e.done)break;i.add&&0===i.state&&this._processPendingUpdateNew(i);let r=this.effectiveUpdatePolicy;if(!i.remove||i.add&&2!==i.state||(this.pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,r=1),i.add)switch(i.state){case 2:this._addGraphic(i.add,i.renderingInfo,r),i.add=null,this.pendingAdds--,e.madeProgress();break;case 3:i.add=null,this.pendingAdds--}null==i.remove&&null==i.add&&this.pendingUpdates.delete(t)}0===this.pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange(\"running\"))}}_processPendingUpdateNew(e){if(!e.add)return void(e.state=2);const t=e.add.geometry;h(t)&&\"mesh\"===t.type&&!t.loaded?this._processPendingUpdateNewMesh(e,t):this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewMesh(e,t){e.state=1,e.abortController=b();const i=e.abortController.signal;t.load({signal:i}).then((()=>{e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}),(t=>this._processPendingUpdateNewError(e,t)))}_processPendingUpdateNewError(e,t){e.abortController=null,S(t)?e.state=0:e.state=3}_processPendingUpdateNewRenderingInfo(e){if(p(this.layer.renderer)||\"dictionary\"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,Ee),void(e.state=2);e.state=1,e.abortController=b(),this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal}).then((t=>{p(t)||p(t.symbol)?(Ee&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,Ee.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=2}),(t=>{e.abortController=null,S(t)?e.state=0:e.state=3}))}_addGraphic(e,t,i){if(this.graphicsWithoutSymbol.set(e.uid,e),p(t)||p(t.symbol)||!Z(e))return;const r=t.symbol,s=this.getOrCreateGraphics3DSymbol(r,t.renderer);if(p(s))return;this.expandComputedExtent(e.geometry),this._beginGraphicUpdate(e);const a=new ae(e,t,this.layer);let n=!1;const o=e=>{e===s.symbol.id&&(n=!0)};this._whenSymbolRemoved.push(o);const l=()=>{if(!this.destroyed){if(this._whenSymbolRemoved.removeUnordered(o),!(n||s.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==s.symbol.id)){if(this.graphicsWaitingForSymbol.has(e.uid)){const e=this._createGraphics3DGraphic(s,a);this._spatialIndex&&h(e)&&this._spatialIndex.add(e)}this._endGraphicUpdate(e)}--s.referenced,this.featureStore.events.emit(\"changed\"),this.labeler&&this.owner.view.labeler.setDirty()}},d=t=>{this.destroyed||(this._whenSymbolRemoved.removeUnordered(o),n||(S(t)?this.add([e]):s.destroyed||this._endGraphicUpdate(e)))};0===i?s.load((()=>this._frameTask.schedule(l)),(e=>this._frameTask.schedule((()=>d(e))))):s.load(l,d)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){var r;i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,s=i.isElevationSource;this._conditionalRemove(i,t),null==(r=this._spatialIndex)||r.remove(i);const a=i.graphics3DSymbol.symbol.id;this.graphicsBySymbol.get(a).delete(t),this.graphicsWithoutSymbol.delete(t),this.removeGraphics3DGraphic(t,e,s),i.destroy(),this.featureStore.events.emit(\"changed\")}else this.graphicsWithoutSymbol.delete(t),this.graphicsWaitingForSymbol.delete(t),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\"))}hasLabelingContext(e){if(e instanceof xe||e instanceof Pe){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}hasValidSymbolCreationContext(e){return!(e instanceof xe&&!this.hasLabelingContext(e))||(Ee.error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"),!1)}_getRenderingInfo(e,t){const i=e.geometry;if(p(i))return t&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!k(i.spatialReference,this._spatialReference))return t&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&h(e.symbol))return t&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?Q(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||h(this.currentRenderer)))s=this.owner.getRenderingInfo(r,this.currentRenderer,g(this.arcadeOnDemand));else{s={symbol:r.symbol||Y(r.geometry)}}return p(s)||p(s.symbol)?(t&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,t){const i=e.geometry;if(p(i))return Ee&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,Ee.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&h(e.symbol))return Ee&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,Ee.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?Q(e,this.layer):e;return this.owner.getRenderingInfoAsync(r,g(this.currentRenderer),g(this.arcadeOnDemand),t)}createGraphics3DSymbol(e,t){if(!this.hasValidSymbolCreationContext(e))return null;const i=this.getConvertedSymbol(e);if(!i)return null;let r;if(h(t)&&\"backgroundFillSymbol\"in t&&t.backgroundFillSymbol){const e=ee(t.backgroundFillSymbol,!1,!0);e.symbol&&\"web-style\"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const s=oe(i,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set(\"extentPadding\",e),this.notifyChange(\"averageSymbolComplexity\")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,t){let i=this.symbols.get(e.id);return void 0===i&&(i=e instanceof _e?new le(e,(e=>this._frameTask.schedule(e)),(e=>this.createGraphics3DSymbol(e,t))):this.createGraphics3DSymbol(e,t),this.symbols.set(e.id,i)),h(i)&&++i.referenced,i}trackGraphicState(e){return p(this.graphicStateTracking)&&(this.graphicStateTracking=new he(this)),this.graphicStateTracking.add(e)}addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this.numberOfGraphics++,e.isElevationSource&&(this.numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this.numberOfGraphics--,i&&(this.numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}_createGraphics3DGraphic(e,t){var i,r,s,a;const n=t.graphic;if(this.graphicsWithoutSymbol.delete(n.uid),!this.symbols.has(e.symbol.id))return this.add([n]),null;if(this.graphics3DGraphics.has(n.uid))return null;const o=e.createGraphics3DGraphic(t);if(p(o))return null;this.addGraphics3DGraphic(o);const l=e.symbol.id;this.graphicsBySymbol.has(l)||this.graphicsBySymbol.set(l,new Map),this.graphicsBySymbol.get(l).set(n.uid,o);o.isDraped&&this.graphicsDrapedUids.add(n.uid),o.centroid=null,h(n.geometry)&&\"point\"!==n.geometry.type&&(o.centroid=de(n.geometry,this._spatialReference)),this._updateUserVisibility(o),h(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(o),null==(i=this.filterVisibility)||i.updateVisibility(o),null==(r=this.deconflictor)||r.addGraphic(o),null==(s=this.labeler)||s.addGraphic(o),null==(a=this.objectStates)||a.addGraphic(o),this.deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,o),o.initialize(this.stage,this.stageLayer,this.owner),h(this.graphicStateTracking)&&this.graphicStateTracking.addGraphic(o);const d=this.whenGraphics3DGraphicRequests[n.uid];return d&&(delete this.whenGraphics3DGraphicRequests[n.uid],d.resolve(o)),o}abortRendererChange(){this.rendererChangeAbortController&&(this.rendererChangeAbortController.abort(),this.rendererChangeAbortController=null)}async rendererChange(e){if(this.abortRendererChange(),e!==this.currentRenderer)if(this.validateRenderer(e),p(e)&&this.currentRendererChange(null,!1),J(e))if(h(e)&&e.arcadeRequired){const t=b();this.rendererChangeAbortController=t;const{arcadeUtils:i}=await this.ensureArcade();f(t),i.hasGeometryOperations(e)&&(await i.enableGeometryOperations(),f(t)),0===this.effectiveUpdatePolicy?await this._frameTask.schedule((()=>this.currentRendererChange(e,!0)),t.signal):this.currentRendererChange(e,!0),this.rendererChangeAbortController=null}else if(0===this.effectiveUpdatePolicy){const t=b();this.rendererChangeAbortController=t,await this._frameTask.schedule((()=>this.currentRendererChange(e,!1)),t.signal),this.rendererChangeAbortController=null}else this.currentRendererChange(e,!1);else this.currentRendererChange(e,!1)}async ensureArcade(){return p(this.arcadeOnDemand)?(this.arcadeOnDemand=await X(),this.arcadeOnDemand):this.arcadeOnDemand}currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=g(this.arcadeOnDemand);const i=this.symbolCreationContext.renderer;if(e===i)return;if(this.symbolConversionCache.clear(),p(e))return this.symbolCreationContext.renderer=null,void this.recreateAllGraphics();const r=E(i,e);this.updateUnchangedSymbolMappings(r,e,i),this.symbolCreationContext.renderer=e,p(r)||(\"complete\"===r.type?this.recreateAllGraphics():\"partial\"===r.type&&(this.applyRendererDiff(r,e,i)?this.volatileGraphicsUpdated():this.recreateAllGraphics()),this.notifyChange(\"averageSymbolComplexity\"))}diffHasSymbolChange(e){for(const t in e.diff)switch(t){case\"visualVariables\":case\"defaultSymbol\":case\"uniqueValueInfos\":break;case\"authoringInfo\":case\"fieldDelimiter\":delete e.diff[t];break;default:return!0}return!1}applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const r=[];for(const s of t){const t=this.graphicsBySymbol.get(s.id);t&&t.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof N?this.layer:null,h=g(this.arcadeOnDemand);if(s===i.defaultSymbol&&i.getSymbol(Q(o,l),{arcade:h})===i.defaultSymbol)return;const d=a.usedMemory;e.length||i.defaultSymbol?r.push(o):this.graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),t.delete(n),this.removeGraphics3DGraphic(n,d),this.updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this.graphicsWithoutSymbol.forEach((e=>r.push(e))),this.graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}applyUniqueValueRendererDiff(e,t,i){const r=e.diff.defaultSymbol,s=e.diff.uniqueValueInfos;if(r||s){const a=s?s.added.map((e=>e.symbol)):[],n=s?s.removed.map((e=>e.symbol)):[];if(s)for(let e=0;e<s.changed.length;e++)a.push(s.changed[e].newValue.symbol),n.push(s.changed[e].oldValue.symbol);return r?(i.defaultSymbol&&n.push(i.defaultSymbol),t.defaultSymbol&&a.push(t.defaultSymbol)):i.defaultSymbol&&a.length&&n.push(t.defaultSymbol),this.applySymbolSetDiff(a,n,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}calculateUnchangedSymbolMapping(e,i,r){const s=e=>h(e)?e.id:null;if(i instanceof t&&r instanceof t&&(p(e)||\"partial\"===e.type)){const t=e&&e.diff,a=t&&t.defaultSymbol,n=t&&t.uniqueValueInfos;let o;return o=n?n.unchanged.map((e=>({oldId:s(e.oldValue.symbol),newId:s(e.newValue.symbol)}))):r.uniqueValueInfos.map(((e,t)=>({oldId:s(e.symbol),newId:s(i.uniqueValueInfos[t].symbol)}))),!a&&r.defaultSymbol&&o.push({oldId:s(r.defaultSymbol),newId:s(i.defaultSymbol)}),o}return[]}updateSymbolMapping(e,t){const i=t?\"string\"==typeof t?t:t.id:null,r=\"string\"==typeof t?null:t;if(!e||e===i)return;const s=this.graphicsBySymbol.get(e);this.graphicsBySymbol.delete(e),void 0!==s&&this.graphicsBySymbol.set(i,s);const a=this.symbols.get(e);void 0!==a&&(this.symbols.delete(e),this.symbols.set(i,a),h(a)&&(h(r)?a.symbol=r:a.symbol.id=i))}updateUnchangedSymbolMappings(e,t,i){const r=this.calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:s,newId:a}of r)this.updateSymbolMapping(s,a)}applyRendererDiff(e,i,r){if(this.diffHasSymbolChange(e))return!1;if(i instanceof t&&r instanceof t&&this.applyUniqueValueRendererDiff(e,i,r)&&0===Object.keys(e.diff).length)return!0;for(const[t]of this.graphicsBySymbol){const r=this.symbols.get(t);if(h(r)&&!r.applyRendererDiff(e,i))return!1}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"opacity\",t))),this.updateStageLayerVisibility()}slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.isSliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"slicePlaneEnabled\",t))),this.deconflictor&&this.deconflictor.slicePlaneEnabledChange(),this.labeler&&this.labeler.slicePlaneEnabledChange())}physicalBasedRenderingChange(e){e!==this.symbolCreationContext.physicalBasedRenderingEnabled&&(this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"physicalBasedRenderingEnabled\",t)||this._recreateSymbol(i)})))}pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"pixelRatio\",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=w((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,r=q();return ge(e,r,t)?this.symbolCreationContext.clippingExtent=z(M(),r):this.symbolCreationContext.clippingExtent=null,!B(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}forEachGraphics3DSymbol(e){for(const[t,i]of this.symbols){if(p(i))return;e(i,this.graphicsBySymbol.get(t)||Ae,t)}}updateAllGraphicsVisibility(){this.filterVisibility&&(this.filterVisibility.dirty=!0),this.modifyGraphics3DGraphicVisibilities((e=>{const t=this._updateUserVisibility(e),i=h(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(e);return t||i}))}hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(0,!1,0)))}validateRenderer(e){const t=K(e);if(t){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:\"\"}, id:${this.layer.id}' is not supported in a SceneView`;Ee.warn(e,t.message)}}volatileGraphicsUpdated(){this.labeler&&this.labeler.reset(),this.stageLayer.shaderTransformationChanged(),this.notifyChange(\"updating\")}_cleanupSymbols(){if(this.graphicsWaitingForSymbol.size>0||this.suspendSymbolCleanup)return;let e=!1;this.symbols.forEach(((t,i)=>{if(p(t)||t.referenced>0)return;const r=this.graphicsBySymbol.get(i);r&&0!==r.size||(this.graphicsBySymbol.delete(i),this.symbols.delete(i),t&&t.destroy(),e=!0)})),e&&(this.recomputeExtentPadding(),this.notifyChange(\"averageSymbolComplexity\"))}snapshotInternals(){return{graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this.symbols.keys()].sort(),graphicsBySymbol:[...this.graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this.graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this.graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this.graphicsDrapedUids].sort(),pendingUpdates:this.pendingUpdates}}get test(){return{symbols:this.symbols,filterVisibility:this.filterVisibility,numPending:this.pendingUpdates.size,forceUpdatePolicy:e=>{this.forcedUpdatePolicy=e}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this.graphicsWithoutSymbol.size,pending:this.pendingUpdates.size}}};Ue.tmpVec=V(),e([D({readOnly:!0})],Ue.prototype,\"computedExtent\",void 0),e([D()],Ue.prototype,\"currentRenderer\",void 0),e([D()],Ue.prototype,\"rendererHasGeometryOperations\",void 0),e([D()],Ue.prototype,\"_frameTask\",void 0),e([D()],Ue.prototype,\"rendererChangeAbortController\",void 0),e([D()],Ue.prototype,\"elevationInfoChangeAbortController\",void 0),e([D()],Ue.prototype,\"setupAbortController\",void 0),e([D({readOnly:!0})],Ue.prototype,\"elevationAlignment\",void 0),e([D({readOnly:!0})],Ue.prototype,\"scaleVisibility\",void 0),e([D({readOnly:!0})],Ue.prototype,\"filterVisibility\",void 0),e([D()],Ue.prototype,\"_spatialIndex\",void 0),e([D({readOnly:!0})],Ue.prototype,\"extentPadding\",void 0),e([D()],Ue.prototype,\"_updatingPendingLoadedGraphicsChange\",void 0),e([D({readOnly:!0})],Ue.prototype,\"featureStore\",void 0),e([D({readOnly:!0})],Ue.prototype,\"deconflictor\",void 0),e([D({readOnly:!0})],Ue.prototype,\"labeler\",void 0),e([D({readOnly:!0})],Ue.prototype,\"objectStates\",void 0),e([D()],Ue.prototype,\"preferredUpdatePolicy\",void 0),e([D()],Ue.prototype,\"forcedUpdatePolicy\",void 0),e([D({readOnly:!0})],Ue.prototype,\"effectiveUpdatePolicy\",null),e([D({constructOnly:!0})],Ue.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([D({constructOnly:!0})],Ue.prototype,\"owner\",void 0),e([D({constructOnly:!0})],Ue.prototype,\"layer\",void 0),e([D({constructOnly:!0})],Ue.prototype,\"graphicSymbolSupported\",void 0),e([D({constructOnly:!0})],Ue.prototype,\"getRenderingInfoWithoutRenderer\",void 0),e([D({readOnly:!0})],Ue.prototype,\"updating\",null),e([D({readOnly:!0})],Ue.prototype,\"running\",null),e([D({readOnly:!0})],Ue.prototype,\"suspendedOrOutsideOfView\",null),e([D({readOnly:!0,dependsOn:[]})],Ue.prototype,\"updatingRemaining\",null),e([D({readOnly:!0,dependsOn:[\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives\",\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures\",\"averageSymbolComplexity\"]})],Ue.prototype,\"displayFeatureLimit\",null),e([D({readOnly:!0,dependsOn:[]})],Ue.prototype,\"averageSymbolComplexity\",null),e([D({constructOnly:!0})],Ue.prototype,\"hasZ\",void 0),e([D({constructOnly:!0})],Ue.prototype,\"hasM\",void 0),Ue=Re=e([I(\"esri.views.3d.layers.graphics.Graphics3DCore\")],Ue);class Oe{constructor(){this.add=null,this.renderingInfo=null,this.state=0,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=0,this.abortController=null,this.remove=null}}const je=10,Le=V(),Ve=V(),Ae=new Map;export{Ue as Graphics3DCore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport o from\"./Graphics3DPointSymbol.js\";import r from\"./Graphics3DSymbol.js\";function t(t,i,e){let p;if(\"point-3d\"===t.type)p=o;else p=r;return new p(t,i,e)}export{t as make};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import t from\"../../../../core/Handles.js\";import{isSome as s,isNone as a}from\"../../../../core/maybe.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{scaleBoundsPredicate as n}from\"../../../support/layerViewUtils.js\";import{TaskPriority as c}from\"../../../support/Scheduler.js\";let h=class extends i{constructor(){super(...arguments),this._scaleRangeActive=!1,this.layerScaleRangeVisibilityQuery=!1,this.handles=new t,this.layerView=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.extent=null,this.graphicsCore=null,this.basemapTerrain=null,this.layerScaleEnabled=!0,this.suspended=!1,this.updating=!0}setup(e,i,t,s,a){this.layerView=e,this.layer=i,this.queryGraphicUIDsInExtent=t,this.graphicsCore=s,this.basemapTerrain=a,this.updateScaleRangeActive();const r=this.layerView.view.resourceController.scheduler;this.handles.add(r.registerTask(c.SCALE_VISIBILITY,this))}destroy(){this.handles.destroy(),this.handles=null,this.layerView=null,this.extent=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this._setDirty()}scaleRangeActive(){return this._scaleRangeActive}updateScaleRangeActive(){const e=this.layer;let i=this.layerScaleEnabled&&p(e.minScale,e.maxScale);e.labelingInfo&&!i&&(i=e.labelingInfo.some((e=>e&&p(e.minScale,e.maxScale))));const t=this._scaleRangeActive!==i;return this._scaleRangeActive=i,i&&!this.handles.has(o)&&this.basemapTerrain?(this.handles.add(this.basemapTerrain.on(\"scale-change\",(e=>this.scaleUpdateHandler(e))),o),this.layerScaleEnabled&&this.handles.add(this.basemapTerrain.on(\"tiles-visibility-changed\",(()=>this._setDirty())),o)):!i&&this.handles.has(o)&&this.handles.remove(o),t}get running(){return!(!this.layerView.view.basemapTerrain||!this.updating)}runTask(){const e=this.layerView.view.basemapTerrain;this.extent&&e&&e.ready&&this._scaleRangeActive&&this.layerScaleEnabled?this.layerScaleRangeVisibilityQuery||(this.layerScaleRangeVisibilityQuery=!0,e.queryVisibleScaleRange(this.extent,this.layer.minScale,this.layer.maxScale,(e=>this.finishUpdate(e)))):this.finishUpdate(!0)}finishUpdate(e){this.layerScaleRangeVisibilityQuery=!1,this._set(\"suspended\",!e),this._set(\"updating\",!1)}visibleAtLayerScale(e){return!this.layerScaleEnabled||n(e,this.layer.minScale||0,this.layer.maxScale||0)}visibleAtLabelScale(e,i){return n(e,i.minScale||0,i.maxScale||0)}graphicScale(e){let i;if(s(e.centroid)?i=e.centroid:s(e.graphic.geometry)&&\"point\"===e.graphic.geometry.type&&(i=e.graphic.geometry),i){return this.layerView.view.basemapTerrain?this.layerView.view.basemapTerrain.getScale(i):1}return null}graphicVisible(e){if(!this.layerScaleEnabled)return!0;const i=this.graphicScale(e);return this.visibleAtLayerScale(i)}updateVisibility(e){if(this._scaleRangeActive){const i=this.graphicVisible(e);return e.setVisibilityFlag(1,i,0)}return!1}updateGraphicLabelScaleVisibility(e){if(!this._scaleRangeActive)return!1;if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const i=this.graphicScale(e),t=this.updateLabelScaleVisibility(e,i);return t&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty()),t}updateLabelScaleVisibility(e,i){if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const t=e.labelGraphics[0]._labelClass;if(t&&null!=t.minScale&&null!=t.maxScale){const s=this.visibleAtLabelScale(i,t);if(e.setVisibilityFlag(1,s,1))return!0}return!1}scaleUpdateHandler(e){if(this._setDirty(),this.layerView.suspended)return;const i=e.extent,t=e.scale,r=this.visibleAtLayerScale(t);let l=!1;this.queryGraphicUIDsInExtent(i,e.spatialReference,(e=>{const n=this.graphicsCore.getGraphics3DGraphicById(e);if(a(n))return;const c=n.centroid;s(c)&&(i[0]>c.x||i[1]>c.y||i[2]<c.x||i[3]<c.y)||(n.setVisibilityFlag(1,r,0)&&(l=!0),this.updateLabelScaleVisibility(n,t)&&(l=!0))})),l&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty())}layerMinMaxScaleChangeHandler(){this.updateScaleRangeActive()&&!this._scaleRangeActive?this.graphicsCore.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(1))):this._scaleRangeActive&&this.graphicsCore.updateAllGraphicsVisibility(),this._setDirty()}};function p(e,i){return e>0||i>0}e([r({constructOnly:!0})],h.prototype,\"layerScaleEnabled\",void 0),e([r({readOnly:!0})],h.prototype,\"suspended\",void 0),e([r({readOnly:!0})],h.prototype,\"updating\",void 0),h=e([l(\"esri.views.3d.layers.graphics.Graphics3DScaleVisibility\")],h);const o=\"terrain-events\";var y=h;export{y as default};\n"],"names":["a","l","fromSimpleMarkerSymbol","i","f","e","fromSimpleLineSymbol","s","c","t","fromSimpleFillSymbol","n","u","m","symbolLayers","r","material","color","p","edges","type","size","y","r2","o","d","constructor","t2","this","events","hasZ","hasM","objectIdField","spatialReference","featureAdapter","getAttribute","t3","e2","graphic","attributes","getAttributes","getObjectId","getGeometry","getAsOptimizedGeometry","getCentroid","centroid","geometry","i2","Array","x","z","h","cloneWithGeometry","forEach","forAllGraphics","forEachInBounds","getSpatialIndex","forEachBounds","s2","getBounds","constructOnly","prototype","g","schedule","sharedResources","streamDataRequester","elevationProvider","renderer","stage","clippingExtent","renderCoordsHelper","overlaySR","layer","layerView","localOriginFactory","featureExpressionInfoContext","screenSizePerspectiveEnabled","slicePlaneEnabled","physicalBasedRenderingEnabled","isAsync","a2","calloutSymbolLayer","symbol","hasVisibleCallout","o2","l2","load","super","doLoad","abortLoad","destroy","createGraphics3DGraphic","createCalloutGraphic","addAuxiliaryGraphic","globalPropertyChanged","_getCalloutGraphicLayer","r3","updateGeometry","a3","renderingInfo","translation","centerOffset","screenOffset","centerOffsetUnits","elevationOffset","materialCollection","_auxiliaryGraphics","graphics3DSymbolLayer","graphicsCore","idToState","Map","states","Set","owner","getGraphicId","getGraphics3DGraphicById","getGraphics3DGraphicByObjectId","uid","clear","remove","add","has","ensureStateList","push","displaying","isVisible","isDraped","tracking","emit","get","length","delete","addGraphic","forEachState","removeGraphic","updateGraphicGeometry","updateGraphicVisibility","allGraphicsDeleted","set","_index","minX","extent","minY","maxX","maxY","_missing","_boundsByFeature","updating","setup","_addMany","update","from","values","queryGraphicUIDsInExtent","equals","search","_get","computeExtent","readOnly","getLogger","j","EventedMixin","_layerHandes","initialize","view","intersectLayers","stageLayer","intersector","v","state","viewingMode","options","store","computeLayerExtent","zmin","zmax","on","objectChanged","e3","object","dispose","elevationInfoChanged","elevationInfo","mode","unit","offset","getElevation","C","toRenderCoords","error","n2","setAltitude","B","R","reset","intersect","metadata","isElevationSource","results","min","getIntersectionPoint","getAltitude","b","lastValidElevationBB","isEmpty","expandExtent","max","boundingVolumeWorldSpace","Math","E","objects","forAll","fromRenderCoords","aliasOf","context","Re","De","V","Ie","M","Ee","Ue","propertiesPool","ue","computedExtent","we","currentRenderer","rendererHasGeometryOperations","graphicStateTracking","symbolCreationContext","ne","_frameTask","graphics3DGraphics","graphicsDrapedUids","graphicsBySymbol","symbolConversionCache","symbols","graphicsWithoutSymbol","graphicsWaitingForSymbol","_handles","ve","suspendSymbolCleanup","_spatialReference","arcadeOnDemand","rendererChangeAbortController","elevationInfoChangeAbortController","setupAbortController","elevationAlignment","scaleVisibility","filterVisibility","_spatialIndex","extentPadding","_updatingPendingLoadedGraphicsChange","featureStore","deconflictor","labeler","objectStates","viewElevationProvider","stageLayerElevationProvider","sharedSymbolResourcesOwnerHandle","whenGraphics3DGraphicRequests","pendingUpdates","numberOfGraphics","numberOfGraphicsProvidingElevation","pendingAdds","pendingRemoves","pendingUpdatesPool","allocator","Oe","deallocator","symbolWarningLogged","geometryWarningLogged","objectIdInvisibleSet","_whenSymbolRemoved","preferredUpdatePolicy","forcedUpdatePolicy","elevationFeatureExpressionEnabled","graphicSymbolSupported","getRenderingInfoWithoutRenderer","_usedMemory","_visible","_startCreateGraphics","pe","running","suspended","suspendInfo","outsideOfView","updatingRemaining","qualitySettings","graphics3D","minTotalNumberOfFeatures","maxTotalNumberOfFeatures","maxTotalNumberOfPrimitives","averageSymbolComplexity","primitivesPerFeature","drawCallsPerFeature","ceil","d2","minimumTotalNumberOfFeatures","maximumTotalNumberOfFeatures","maximumTotalNumberOfPrimitives","maximumNumberOfFeatures","ce","symbolComplexities","numComplexities","estimated","primitivesPerCoordinate","labelsEnabled","memory","bytesPerFeatureLabel","abs","bytesPerFeature","usedMemoryPerGraphic","getSymbolComplexitiesUsedOrRenderer","getSymbolComplexitiesUsed","getConvertedSymbol","clone","id","ee","hasLabelingContext","message","getSymbols","backgroundFillSymbol","getSymbolComplexityUsedOrRenderer","complexity","ye","_set","se","spatialIndex","signal","te","initializeStage","sharedSymbolResources","addGraphicsOwner","be","renderSpatialReference","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","ie","re","physicallyBasedRenderingEnabled","watch","reschedule","updateLayerVisibility","recreateAllGraphics","slicePlaneEnabledChange","pixelRatioChange","physicalBasedRenderingChange","G","basemapTerrain","graphicsCollectionChanged","e4","_signalUpdatingDuringAsyncLoadedGraphicsChange","runTask","Ce","P","updatePolicy","effectiveUpdatePolicy","resourceController","scheduler","registerTask","Se","GRAPHICS_CORE","featureReductionChange","notifyChange","rendererChange","abortSetup","abort","abortRendererChange","abortElevationInfoChange","removeGraphicsOwner","reject","_stage","fe","isPickable","suspendedOrOutsideOfView","graphicUid","displayFeatureLimit","je","updateAllGraphicsVisibility","hideAllGraphics","updateStageLayerVisibility","opacity","_findGraphics3DGraphicByObjectId","_getGraphicObjectID","H","layerLabelsEnabled","labelingInfoChange","updateVisibilityInfo","visibilityInfoChange","getFastUpdateStatus","loading","fast","slow","processQueue","_applyPendingUpdates","setObjectIdVisibility","_updateUserVisibility","visible","setVisibilityFlag","whenGraphics3DGraphic","Promise","resolve","promise","service","useViewElevation","minDemResolution","minDemResolutionForPoints","resolution","getProjectedBoundingBox","s3","T","p2","boundingBox","requiresDrapedElevation","screenSpaceObjects","whenGraphicBounds","_","then","loadedGraphics","find","i3","boundsForGraphics3DGraphic","computeAttachmentOrigin","render","num","draped","Le","A","origin","Ve","O","L","Ge","getSymbolLayerSize","indexOf","added","removed","graphicUpdateHandler","property","graphicUpdateVisibleHandler","graphicUpdateGeometryHandler","graphicUpdateSymbolHandler","recreateGraphic","loadStatus","graphics3DSymbol","newValue","expandComputedExtent","oldValue","updateSymbolMapping","diff","graphics3DGraphicPatches","symbolStatePatches","prepareSymbolPatch","U","_getRenderingInfo","c2","h2","recomputeExtentPadding","setDirty","recreateGraphics","_cleanupSymbols","_beginGraphicUpdate","_endGraphicUpdate","tmpVec","F","xmin","ymin","xmax","ymax","elevationInfoChange","forEachGraphics3DSymbol","t4","labelGraphics","updateGraphicElevationContext","_recreateSymbol","updateStageLayerElevationProvider","unregister","me","register","clearSymbolsAndGraphics","invalidateSpatialQueryAccelerator","startCreateGraphics","tilingScheme","toArray","usedMemory","_conditionalRemove","removeGraphics3DGraphic","_updatePolicyForGraphics","_addDelayed","_addImmediate","geometryType","loaded","_addGraphic","abortController","pushNew","_removeDelayed","_removeImmediate","_removeGraphic","_finishPendingUpdates","warn","done","_processPendingUpdateNew","madeProgress","_processPendingUpdateNewMesh","_processPendingUpdateNewRenderingInfo","_processPendingUpdateNewError","S","_getRenderingInfoAsync","Z","getOrCreateGraphics3DSymbol","ae","destroyed","removeUnordered","_createGraphics3DGraphic","referenced","onRemoveGraphic","xe","Pe","labelingInfo","some","hasValidSymbolCreationContext","k","Q","getRenderingInfo","Y","getRenderingInfoAsync","createGraphics3DSymbol","oe","_e","le","trackGraphicState","he","addGraphics3DGraphic","de","updateVisibility","setInitialIconVisibilityFlag","validateRenderer","currentRendererChange","J","arcadeRequired","arcadeUtils","ensureArcade","hasGeometryOperations","enableGeometryOperations","X","arcade","updateUnchangedSymbolMappings","applyRendererDiff","volatileGraphicsUpdated","diffHasSymbolChange","applySymbolSetDiff","N","defaultSymbol","getSymbol","applyUniqueValueRendererDiff","uniqueValueInfos","map","changed","calculateUnchangedSymbolMapping","unchanged","oldId","newId","Object","keys","opacityChange","isSliceable","w","setClippingExtent","q","ge","modifyGraphics3DGraphicVisibilities","Ae","dirty","K","title","shaderTransformationChanged","snapshotInternals","graphics","sort","symbolId","numPending","forceUpdatePolicy","missing","pending","D","dependsOn","I","arguments","_scaleRangeActive","layerScaleRangeVisibilityQuery","handles","layerScaleEnabled","updateScaleRangeActive","SCALE_VISIBILITY","_setDirty","setExtent","scaleRangeActive","minScale","maxScale","scaleUpdateHandler","ready","queryVisibleScaleRange","finishUpdate","visibleAtLayerScale","visibleAtLabelScale","graphicScale","getScale","graphicVisible","updateGraphicLabelScaleVisibility","updateLabelScaleVisibility","_labelClass","scale","layerMinMaxScaleChangeHandler","clearVisibilityFlag"],"mappings":"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"}