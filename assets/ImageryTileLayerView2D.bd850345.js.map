{"version":3,"file":"ImageryTileLayerView2D.bd850345.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/RasterTile.js","../../node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/imagery/BaseImageryTileSubView2D.js","../../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryTileView2D.js","../../node_modules/@arcgis/core/views/2d/engine/RasterVFDisplayObject.js","../../node_modules/@arcgis/core/views/2d/engine/RasterVFTile.js","../../node_modules/@arcgis/core/views/2d/engine/RasterVFTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/imagery/VectorFieldTileView2D.js","../../node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{RasterBitmap as s}from\"./RasterBitmap.js\";import{TiledDisplayObject as e}from\"./webgl/TiledDisplayObject.js\";class i extends e{constructor(t,e,i,r,a,n=null){super(t,e,i,r,a),this.bitmap=new s(n,null,null),this.bitmap.coordScale=[r,a],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}_createTransforms(){return{dvs:t(),tileMat3:t()}}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{i as RasterTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../viewpointUtils.js\";import{brushes as r}from\"./brushes.js\";import{RasterTile as i}from\"./RasterTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import o from\"./webgl/TileContainer.js\";class n extends o{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[r,t]=this._tileInfoView.tileInfo.size;return new i(e,s[0],s[3],r,t)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (tile)\",brushes:[r.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}_getTileBounds(r){const i=this._tileInfoView.getTileBounds(e(),r);if(this.isCustomTilingScheme&&r.world){const{tileInfo:e}=this._tileInfoView,t=s(e.spatialReference);if(t){const{resolution:s}=e.lodAt(r.level),o=t/s%e.size[0],n=o?(e.size[0]-o)*s:0;i[0]-=n*r.world,i[2]-=n*r.world}}return i}}export{n as RasterTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{isSome as o}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../layers/support/PixelBlock.js\";let l=class extends r{constructor(){super(...arguments),this._emptyTilePixelBlock=null,this.container=null,this.layer=null,this.tileSize=null,this.useWebGLForProcessing=!0}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}createEmptyTilePixelBlock(e=null){const r=null==e||e.join(\",\")===this.tileSize.join(\",\");if(r&&o(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;e=e||this.tileSize;const[t,i]=e,l=new s({width:t,height:i,pixels:[new Uint8Array(t*i)],mask:new Uint8Array(t*i),pixelType:\"u8\"});return r&&(this._emptyTilePixelBlock=l),l}};e([t()],l.prototype,\"container\",void 0),e([t()],l.prototype,\"layer\",void 0),e([t()],l.prototype,\"tileSize\",void 0),e([t()],l.prototype,\"type\",void 0),e([t()],l.prototype,\"useWebGLForProcessing\",void 0),l=e([i(\"esri.views.2d.layers.imagery.BaseImageryTileSubView2D\")],l);export{l as BaseImageryTileSubView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{RasterTileContainer as s}from\"../../engine/RasterTileContainer.js\";import{BaseImageryTileSubView2D as i}from\"./BaseImageryTileSubView2D.js\";let a=class extends i{constructor(){super(...arguments),this.container=null,this.layer=null,this.tileSize=null,this.type=\"raster\",this.useWebGLForProcessing=!0}canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}async updateTileSource(e,t){const{bandIds:o}=this.layer,s=this._getLayerInterpolation(),i=this.canUseWebGLForProcessing(),{source:a,symbolizerParams:n,globalSymbolizerParams:l,suspended:c,coords:p,resolution:u}=t,{bitmap:d}=e;if([d.x,d.y]=p,d.resolution=u,a&&r(a)&&r(a.pixelBlock)){const e={extent:a.extent,pixelBlock:a.pixelBlock};if(d.rawPixelData=e,i)d.source=a.pixelBlock,d.isRendereredSource=!1;else{const r=await this.layer.applyRenderer(e,\"stretch\"===(null==l?void 0:l.type)?l:null);d.source=r,d.isRendereredSource=!0}d.symbolizerParameters=i?n:null,i?d.transformGrid||(d.transformGrid=a.transformGrid):d.transformGrid=null}else{const e=this.createEmptyTilePixelBlock();d.source=e,d.symbolizerParameters=i?n:null,d.transformGrid=null}d.bandIds=o,d.width=this.tileSize[0],d.height=this.tileSize[1],d.interpolation=s,d.suspended=c,d.invalidateTexture()}async updateTileSymbolizerParameters(e,t){const{local:o,global:s}=t,{bandIds:i}=this.layer,a=this._getLayerInterpolation(),n=this.canUseWebGLForProcessing(),{bitmap:l}=e,{rawPixelData:c}=l;!n&&r(c)?(l.source=await this.layer.applyRenderer(c,\"stretch\"===(null==s?void 0:s.type)?s:null),l.isRendereredSource=!0):(l.isRendereredSource&&r(c)&&(l.source=c.pixelBlock),l.isRendereredSource=!1),l.symbolizerParameters=n?s||o:null,l.bandIds=i,l.interpolation=a,l.suspended=!1}install(e,r){this.container=new s(r.tileInfoView),this.container.isCustomTilingScheme=r.isCustomTilingScheme,e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this.container.remove()}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:r,colormap:t,pixelType:o}=this.layer.rasterInfo;return 1===e&&(null!=r||null!=t||\"u8\"===o||\"s8\"===o)}_getLayerInterpolation(){const e=this.layer.renderer.type;if(\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e)return\"nearest\";const{interpolation:r}=this.layer,{renderer:t}=this.layer;return\"raster-stretch\"===t.type&&null!=t.colorRamp?\"bilinear\"===r||\"cubic\"===r?\"bilinear\":\"nearest\":r}};e([t()],a.prototype,\"container\",void 0),e([t()],a.prototype,\"layer\",void 0),e([t()],a.prototype,\"tileSize\",void 0),e([t()],a.prototype,\"type\",void 0),e([t()],a.prototype,\"useWebGLForProcessing\",void 0),a=e([o(\"esri.views.2d.layers.imagery.ImageryTileView2D\")],a);var n=a;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import{c as t}from\"../../../chunks/mat3f32.js\";import{createVFMesh as a,createVFMeshScalar as s}from\"../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import r from\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/renderState.js\";import\"../../webgl/Texture.js\";import i from\"../../webgl/VertexArrayObject.js\";import{DisplayObject as o}from\"./DisplayObject.js\";import{createProgramDescriptor as l}from\"./webgl/Utils.js\";class c extends o{constructor(e=null){super(),this._source=null,this._symbolizerParameters=null,this._vaoInvalidated=!0,this.coordScale=[1,1],this.height=null,this.stencilRef=0,this.rawPixelData=null,this.width=null,this.source=e}destroy(){var t,a;e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null)}get symbolizerParameters(){return this._symbolizerParameters}set symbolizerParameters(e){JSON.stringify(this._symbolizerParameters)!==JSON.stringify(e)&&(this._symbolizerParameters=e,this.invalidateVAO())}get source(){return this._source}set source(e){this._source=e,this.invalidateVAO()}invalidateVAO(){var t,a;!this._vaoInvalidated&&e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null,this._vaoInvalidated=!0,this.requestRender())}updateVectorFieldVAO(t){if(this._vaoInvalidated){if(this._vaoInvalidated=!1,e(this.source)&&!e(this.vaoData)){const{style:e}=this.symbolizerParameters;switch(e){case\"beaufort_ft\":case\"beaufort_km\":case\"beaufort_kn\":case\"beaufort_m\":case\"beaufort_mi\":case\"classified_arrow\":case\"ocean_current_kn\":case\"ocean_current_m\":case\"single_arrow\":{const e=a(this.source,this.symbolizerParameters),s=this._createVectorFieldVAO(t.context,e);this.vaoData={magdir:s}}break;case\"simple_scalar\":{const e=s(this.source,this.symbolizerParameters),a=this._createVectorFieldVAO(t.context,e);this.vaoData={scalar:a}}break;case\"wind_speed\":{const e=a(this.source,this.symbolizerParameters),r=this._createVectorFieldVAO(t.context,e),i=s(this.source,this.symbolizerParameters),o=this._createVectorFieldVAO(t.context,i);this.vaoData={magdir:r,scalar:o}}}}this.ready(),this.requestRender()}}_createTransforms(){return{dvs:t()}}onAttach(){this.invalidateVAO()}onDetach(){this.invalidateVAO()}_createVectorFieldVAO(e,t){const{vertexData:a,indexData:s}=t,o=r.createVertex(e,35044,new Float32Array(a)),c=r.createIndex(e,35044,new Uint32Array(s)),n=l(\"vector-field\",{geometry:[{location:0,name:\"a_pos\",count:2,type:5126,normalized:!1},{location:1,name:\"a_offset\",count:2,type:5126,normalized:!1},{location:2,name:\"a_vv\",count:2,type:5126,normalized:!1}]});return{vao:new i(e,n.attributes,n.bufferLayouts,{geometry:o},c),elementCount:s.length}}}export{c as RasterVFDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../chunks/mat3.js\";import{c as e}from\"../../../chunks/mat3f32.js\";import{RasterVFDisplayObject as a}from\"./RasterVFDisplayObject.js\";import{TiledDisplayObject as i}from\"./webgl/TiledDisplayObject.js\";class r extends i{constructor(t,s,e,i,r,o=null){super(t,s,e,i,r),this.tileData=new a(o),this.tileData.coordScale=[i,r],this.tileData.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(t){this.tileData.stencilRef=t}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e,a){super.setTransform(e,a);const i=a/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[o,l]=this.tileData.offset,h=[this.x+o*a,this.y-l*a],[n,f]=e.toScreenNoRotation([0,0],h),{symbolTileSize:m}=this.tileData.symbolizerParameters,c=Math.round((this.width-this.tileData.offset[0])/m)*m,D=Math.round((this.height-this.tileData.offset[1])/m)*m,d=c/this.rangeX*i,u=D/this.rangeY*i;t(r,d,0,0,0,u,0,n,f,1),s(this.transforms.dvs,e.displayViewMat3,r),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}export{r as RasterVFTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{RasterVFTile as s}from\"./RasterVFTile.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import t from\"./webgl/TileContainer.js\";import i from\"./webgl/brushes/raster/BrushVectorField.js\";class o extends t{constructor(){super(...arguments),this.isCustomTilingScheme=!1,this.symbolTypes=[\"triangle\"]}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),[i,o]=this._tileInfoView.tileInfo.size;return new s(r,t[0],t[3],i,o)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (vf tile)\",brushes:[i],target:()=>this.children.map((e=>e.tileData)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===r.MAP&&this.symbolTypes.forEach((s=>{e.renderPass=s,super.doRender(e)}))}}export{o as RasterVFTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{sampleVectorField as s}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{RasterVFTileContainer as o}from\"../../engine/RasterVFTileContainer.js\";import{BaseImageryTileSubView2D as l}from\"./BaseImageryTileSubView2D.js\";let a=class extends l{constructor(){super(...arguments),this._handle=null,this.container=null,this.layer=null,this.tileSize=null,this.type=\"rasterVF\",this.useWebGLForProcessing=!0}canUseWebGLForProcessing(){return!1}async fetchTile(e,t){const i=await this.layer.fetchTile(e.level,e.row,e.col,t);return\"vector-magdir\"===this.layer.rasterInfo.dataType&&null!=i&&i.pixelBlock&&(i.pixelBlock=await this.layer.convertVectorFieldData(i.pixelBlock,t)),i}updateTileSource(e,i){const r=i.symbolizerParams,{tileData:s}=e;s.key=e.key,s.width=this.tileSize[0],s.height=this.tileSize[1];const{symbolTileSize:o}=r,{source:l}=i;if(s.offset=this._getTileSymbolOffset(s.key,o),t(l)&&t(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};s.rawPixelData=e,s.source=this._sampleVectorFieldData(l.pixelBlock,r,s.offset),s.symbolizerParameters=r}else{const e=[Math.round((this.tileSize[0]-s.offset[0])/o),Math.round((this.tileSize[1]-s.offset[1])/o)],t=this.createEmptyTilePixelBlock(e);s.source=t,s.symbolizerParameters=r}return s.invalidateVAO(),Promise.resolve(null)}updateTileSymbolizerParameters(e,i){var r;const s=i.local,{symbolTileSize:o}=s,{tileData:l}=e;l.offset=this._getTileSymbolOffset(l.key,o);const a=l.symbolizerParameters.symbolTileSize;return l.symbolizerParameters=s,t(null==(r=l.rawPixelData)?void 0:r.pixelBlock)&&a!==o&&(l.source=this._sampleVectorFieldData(l.rawPixelData.pixelBlock,l.symbolizerParameters,l.offset)),Promise.resolve(null)}install(e,t){this.container=new o(t.tileInfoView),this.container.isCustomTilingScheme=t.isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=this.layer.watch(\"renderer\",(e=>this._updateSymbolType(e))),e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this._handle.remove(),this._handle=null,this.container.remove()}_getTileSymbolOffset(e,t){const i=e.col*this.tileSize[0]%t,r=e.row*this.tileSize[1]%t;return[i>t/2?t-i:-i,r>t/2?t-r:-r]}_sampleVectorFieldData(e,t,i){const{symbolTileSize:r}=t;return s(e,\"vector-uv\",r,i)}_updateSymbolType(e){\"vector-field\"===e.type&&(this.container.symbolTypes=\"wind-barb\"===e.style?[\"scalar\",\"triangle\"]:\"simple-scalar\"===e.style?[\"scalar\"]:[\"triangle\"])}};e([i()],a.prototype,\"container\",void 0),e([i()],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"tileSize\",void 0),e([i()],a.prototype,\"type\",void 0),e([i()],a.prototype,\"useWebGLForProcessing\",void 0),a=e([r(\"esri.views.2d.layers.imagery.VectorFieldTileView2D\")],a);var c=a;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import i from\"../../../core/Logger.js\";import{isNone as s,unwrap as r}from\"../../../core/maybe.js\";import{debounce as o,isAbortError as a,createAbortController as l,eachAlways as h}from\"../../../core/promiseUtils.js\";import{createScreenPoint as n}from\"../../../core/screenUtils.js\";import{watch as c,init as u}from\"../../../core/watchUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../layers/support/TileInfo.js\";import{update as y,unregister as g,register as f,getRasterId as _}from\"../../../layers/support/rasterDatasets/RawBlockCache.js\";import{extractBands as b}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{computeProjectedScales as w}from\"../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{LayerView2DMixin as v}from\"./LayerView2D.js\";import I from\"./imagery/ImageryTileView2D.js\";import C from\"./imagery/VectorFieldTileView2D.js\";import P from\"../tiling/TileInfoView.js\";import S from\"../tiling/TileQueue.js\";import R from\"../tiling/TileStrategy.js\";import{ImageryTileLayerView as U}from\"../../layers/ImageryTileLayerView.js\";import T from\"../../layers/LayerView.js\";import{RefreshableLayerView as z}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import k from\"../../webgl/capabilities.js\";import F from\"../../../geometry/Extent.js\";import x from\"../../../geometry/Point.js\";const L=i.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),V=[0,0];let q=class extends(U(z(v(T)))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this._isCustomTilingScheme=!1,this.subview=null,this._redrawOrRefetch=o(((e,t)=>e?this.doRefresh():this._redrawImage(t)))}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useWebGLForProcessing(){var e;return null==(e=this._get(\"useWebGLForProcessing\"))||e}set useWebGLForProcessing(e){this.subview&&(this.subview.useWebGLForProcessing=e),this._set(\"useWebGLForProcessing\",e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){var t;this._tileStrategy.destroy(),null==(t=this.subview)||t.container.removeAllChildren();const i=this._getCacheSize(e);this._tileStrategy=new R({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:i,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate()}}hitTest(e,i){if(this.suspended)return Promise.resolve(null);const s=this.view.toMap(n(e,i));return Promise.resolve(new t({attributes:{},geometry:s}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var o;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:F.fromJSON(t);y(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(o=this._previousLOD)?void 0:o.level)!==r.level&&(this._previousLOD=r,null==this._symbolizerParams||this.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),k().supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new P(this.tileInfo,this.fullExtent);const e=this._computeFetchConcurrency();this._fetchQueue=new S({tileInfoView:this._tileInfoView,concurrency:e,process:(e,t)=>this.fetchTile(e,t)});const t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new R({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._updatesubview(),this.handles.add([c(this.layer,[\"bandIds\",\"renderer\",\"interpolation\",\"multidimensionalDefinition\"],((e,t,i)=>{const s=\"multidimensionalDefinition\"===i,r=\"interpolation\"===i&&(\"majority\"===e||\"majority\"===t)&&this._canUseMajorityInterpolationOnDataSource(),o=\"renderer\"===i&&\"vector-field\"===t.type!=(\"vector-field\"===t.type);o&&this._updatesubview();const l=s||r||o;this._redrawOrRefetch(l).catch((e=>{a(e)||L.error(e)}))})),u(this,[\"layer.blendMode\"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0),u(this,[\"layer.effect\"],(e=>{this.subview&&(this.subview.container.effect=e)}),!0)],\"attach\"),this._updateBlockCacheRegistry()}detach(){var e;this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),null==(e=this.subview)||e.uninstall(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,g(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=l(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}async doRefresh(){if(this.suspended)return;await this.layer.updateRenderer(),this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset();const e=[];this._tileStrategy.tiles.forEach((t=>e.push(this._enqueueTileFetch(t)))),await h(e),this.notifyChange(\"updating\")}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this.subview.container.createTile(e);return this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){var t;this._fetchQueue.abort(e.key.id),null==(t=this.subview)||t.container.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()}fetchTile(e,t){const i=!s(t)&&t.signal,o=this.subview.canUseWebGLForProcessing(),a={allowPartialFill:!0,tileInfo:this.tileInfo,signal:r(i),registryId:this._blockCacheRegistryId,requestRawData:o,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:o?\"nearest\":this.layer.interpolation};return this.subview.fetchTile(e,a)}_updatesubview(){const e=this._isVectorField()?\"rasterVF\":\"raster\";if(this.subview){if(this.subview.type===e)return;this.subview.uninstall()}const{layer:t}=this,i=new(\"rasterVF\"===e?C:I)({layer:t,tileSize:this.tileInfo.size,useWebGLForProcessing:this.useWebGLForProcessing});i.install(this.container,{tileInfoView:this._tileInfoView,isCustomTilingScheme:this._isCustomTilingScheme}),i.container.blendMode=t.blendMode,i.container.effect=t.effect,this.subview=i}_isVectorField(){return\"vector-field\"===this.layer.renderer.type}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.view.spatialReference,t=new x({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=w(this.layer.rasterInfo,e),o=m.create({spatialReference:e,size:512,scales:i});(0===o.origin.x||o.origin.x>t.x)&&(o.origin=t),this._isCustomTilingScheme=r,this._set(\"tileInfo\",o),this._srcResolutions=null!=s?s:[]}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.rasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:s}=this.layer;let r=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){r=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(i){a(i)&&L.error(i)}this._globalUpdateRequested=!1}!this.subview.canUseWebGLForProcessing()&&!this._isVectorField()||this.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const o=this._tileInfoView.getTileCoords(V,e.key),l=this._tileInfoView.getTileResolution(e.key);await this.subview.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:r,bandIds:s,coords:o,resolution:l}),e.once(\"attach\",(()=>this.requestUpdate())),this.subview.container.addChild(e)}catch(i){a(i)||L.error(i)}this.requestUpdate()}}async _redrawImage(e){if(0===this.subview.container.children.length)return;await this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.subview.container.children.map((async e=>this.subview.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams})));await h(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:b(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this.subview.canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,multidimensionalDefinition:s,raster:r}=this.layer,o=null!=i&&i.multidimensionalInfo?r.getSliceIndex(s):null,a=_(t,o);if(a!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&g(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=f(a,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.view.scale),t=this._srcResolutions[e.level];y(a,this._blockCacheRegistryId,this.view.extent,this.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=a}}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}};e([d()],q.prototype,\"subview\",void 0),e([d()],q.prototype,\"useWebGLForProcessing\",null),e([d()],q.prototype,\"useProgressiveUpdate\",null),q=e([p(\"esri.views.2d.layers.ImageryTileLayerView2D\")],q);var G=q;export{G as default};\n"],"names":["e","constructor","t2","e2","i2","r2","a2","n2","this","bitmap","s","coordScale","once","ready","destroy","stage","stencilRef","setTransform","s2","transforms","dvs","_createTransforms","t","tileMat3","onAttach","onDetach","o","arguments","isCustomTilingScheme","createTile","_getTileBounds","_tileInfoView","tileInfo","size","i","destroyTile","prepareRenderPasses","registerRenderPass","name","brushes","r","raster","target","children","map","e3","drawPhase","MAP","super","doRender","visible","getTileBounds","world","spatialReference","resolution","lodAt","level","o2","l","_emptyTilePixelBlock","container","layer","tileSize","useWebGLForProcessing","fetchTile","row","col","createEmptyTilePixelBlock","join","l2","width","height","pixels","Uint8Array","mask","pixelType","prototype","a","type","canUseWebGLForProcessing","symbolizer","canRenderInWebGL","interpolation","_canUseMajorityInterpolationOnDataSource","bandIds","_getLayerInterpolation","source","symbolizerParams","globalSymbolizerParams","suspended","c2","coords","p2","u2","d","x","y","pixelBlock","extent","rawPixelData","isRendereredSource","applyRenderer","symbolizerParameters","transformGrid","invalidateTexture","local","global","install","tileInfoView","addChild","uninstall","removeAllChildren","remove","bandCount","attributeTable","colormap","rasterInfo","renderer","colorRamp","n","_source","_symbolizerParameters","_vaoInvalidated","vaoData","magdir","vao","dispose","scalar","stringify","JSON","invalidateVAO","requestRender","updateVectorFieldVAO","style","_createVectorFieldVAO","context","vertexData","indexData","createVertex","Float32Array","createIndex","Uint32Array","geometry","location","count","normalized","attributes","bufferLayouts","elementCount","length","tileData","pixelRatio","offset","h2","f2","toScreenNoRotation","symbolTileSize","m","Math","round","D","rangeX","rangeY","displayViewMat3","symbolTypes","forEach","renderPass","_handle","dataType","convertVectorFieldData","updateTileSource","key","_getTileSymbolOffset","_sampleVectorFieldData","Promise","resolve","updateTileSymbolizerParameters","_updateSymbolType","watch","c","L","getLogger","V","q","U","z","v","T","_tileStrategy","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_srcResolutions","_previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_globalUpdateRequested","_isCustomTilingScheme","subview","_redrawOrRefetch","doRefresh","_redrawImage","initialize","updateFullExtent","addResolvingPromise","_get","_set","useProgressiveUpdate","_getCacheSize","R","cachePolicy","acquireTile","releaseTile","cacheSize","requestUpdate","hitTest","view","toMap","update","pause","state","resume","scale","getClosestInfoForScale","s3","toJSON","F","fromJSON","ioConfig","sampling","hasTilingEffects","_updateSymbolizerParams","updateCacheSize","notifyChange","attach","increaseRasterJobHandlerUsage","k","supportsTextureFloat","_initializeTileInfo","P","fullExtent","_computeFetchConcurrency","S","concurrency","process","t3","_updatesubview","handles","add","catch","e4","error","u","blendMode","effect","_updateBlockCacheRegistry","detach","decreaseRasterJobHandlerUsage","clear","g","moveStart","viewChange","moveEnd","abort","signal","then","createFetchPopupFeaturesQueryGeometry","j","updateRenderer","reset","tiles","push","_enqueueTileFetch","h","isUpdating","id","removeChild","allowPartialFill","registryId","requestRawData","srcResolution","datumTransformation","_isVectorField","C","I","xmin","ymax","scales","srcResolutions","w","create","origin","blockBoundary","storageInfo","maxCol","minCol","maxRow","minRow","has","moving","getTileCoords","getTileResolution","_updateGlobalSymbolizerParams","async","fetchPixels","generateWebGLParameters","b","isGCS","isGeographic","factor","outMin","outMax","url","multidimensionalDefinition","multidimensionalInfo","getSliceIndex","_","f","p","G"],"mappings":"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"}