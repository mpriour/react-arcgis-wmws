(self.webpackChunkreact_arcgis_wmws=self.webpackChunkreact_arcgis_wmws||[]).push([[6007],{53409:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(56140),_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__=(__webpack_require__(95830),__webpack_require__(59472)),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(36544),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(68055),__webpack_require__(79881)),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(56274),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9870),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30590),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(87566),_core_Error_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(32656),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(73032)),_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(52937),_PopupTemplate_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(58484),_request_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(36654),_core_Promise_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(75044),_core_Loadable_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(809),_symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(79710),_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(18152),_renderers_support_types_js__WEBPACK_IMPORTED_MODULE_26__=(__webpack_require__(34341),__webpack_require__(38474),__webpack_require__(42952),__webpack_require__(43925),__webpack_require__(3642),__webpack_require__(81882),__webpack_require__(4037),__webpack_require__(89772)),_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_36__=(__webpack_require__(142),__webpack_require__(61121)),_support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(83236),_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(43551),_tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(31518),_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8809),_BuildingSublayer_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(77600),_support_capabilities_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(81421),_support_I3SIndexInfo_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(63770),_support_I3SLayerDefinitions_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(54209);const P=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.Z.getLogger("esri.layers.buildingSublayers.BuildingComponentSublayer"),E=(0,_support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_28__.v)();let Q=class extends(_core_Loadable_js__WEBPACK_IMPORTED_MODULE_16__.Z.LoadableMixin((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_15__.v)(_BuildingSublayer_js__WEBPACK_IMPORTED_MODULE_32__.Z))){constructor(e){super(e),this.type="building-component",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.fields=null,this.associatedLayer=null,this.outFields=null,this.listMode="show",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType="3d-object"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl.path}/sublayers/${this.id}`,query:this.layer.parsedUrl.query}:null}get fieldsIndex(){return new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_36__.Z(this.fields)}readAssociatedLayer(e,t){const o=this.layer.associatedFeatureServiceItem,s=t.associatedLayerID;return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(o)&&"number"==typeof s?new _FeatureLayer_js__WEBPACK_IMPORTED_MODULE_31__.default({portalItem:o,layerId:s}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if("oid"===e.type)return e.name;return null}get displayField(){return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(this.associatedLayer)?this.associatedLayer.displayField:null}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const t=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t).then((()=>{this.indexInfo=(0,_support_I3SIndexInfo_js__WEBPACK_IMPORTED_MODULE_34__.T)(this.parsedUrl.path,this.rootNode,this.nodePages,P,t)}))),Promise.resolve(this)}createPopupTemplate(e){return(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_29__.eZ)(this,e)}async _fetchService(e){const r=(await(0,_request_js__WEBPACK_IMPORTED_MODULE_14__.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:e})).data;this.read(r,{origin:"service",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){const r=this.getField(e);return r&&r.domain?r.domain:null}get geometryType(){return"3d-object"===this.layerType?"mesh":"point"}get profile(){return"3d-object"===this.layerType?"mesh-pyramids":"points"}get capabilities(){const e=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:_support_capabilities_js__WEBPACK_IMPORTED_MODULE_33__.C,{query:t,data:{supportsZ:o,supportsM:s,isVersioned:i}}=e;return{query:t,data:{supportsZ:o,supportsM:s,isVersioned:i}}}createQuery(){const e=new _tasks_support_Query_js__WEBPACK_IMPORTED_MODULE_30__.Z;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e}queryExtent(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryExtent(e||this.createQuery(),r)))}queryFeatureCount(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatureCount(e||this.createQuery(),r)))}queryFeatures(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatures(e||this.createQuery(),r))).then((e=>{if(e&&e.features)for(const r of e.features)r.layer=this.layer,r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryObjectIds(e||this.createQuery(),r)))}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(this.associatedLayer)}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.pC)(e)&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_37__.Wi)(this.associatedLayer))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__.Z("buildingscenelayer:query-not-available","BuildingSceneLayer component layer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__.Z("buildingscenelayer:query-not-available","BuildingSceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],Q.prototype,"parsedUrl",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:_support_I3SLayerDefinitions_js__WEBPACK_IMPORTED_MODULE_35__.U4,readOnly:!0})],Q.prototype,"nodePages",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[_support_I3SLayerDefinitions_js__WEBPACK_IMPORTED_MODULE_35__.QI],readOnly:!0})],Q.prototype,"materialDefinitions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[_support_I3SLayerDefinitions_js__WEBPACK_IMPORTED_MODULE_35__.Yh],readOnly:!0})],Q.prototype,"textureSetDefinitions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[_support_I3SLayerDefinitions_js__WEBPACK_IMPORTED_MODULE_35__.H3],readOnly:!0})],Q.prototype,"geometryDefinitions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],Q.prototype,"serviceUpdateTimeStamp",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],Q.prototype,"store",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],Q.prototype,"rootNode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],Q.prototype,"attributeStorageInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)(E.fields)],Q.prototype,"fields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],Q.prototype,"fieldsIndex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_31__.default})],Q.prototype,"associatedLayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_5__.r)("service","associatedLayer",["associatedLayerID"])],Q.prototype,"readAssociatedLayer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)(E.outFields)],Q.prototype,"outFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String,readOnly:!0})],Q.prototype,"objectIdField",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:String,json:{read:!1}})],Q.prototype,"displayField",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__.Z,aliasOf:"layer.fullExtent"})],Q.prototype,"fullExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.Z,aliasOf:"layer.spatialReference"})],Q.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,aliasOf:"layer.version"})],Q.prototype,"version",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:_symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_17__.Z,aliasOf:"layer.elevationInfo"})],Q.prototype,"elevationInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:Number,aliasOf:"layer.minScale"})],Q.prototype,"minScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:Number,aliasOf:"layer.maxScale"})],Q.prototype,"maxScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:["hide","show"],json:{write:!0}})],Q.prototype,"listMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({types:_renderers_support_types_js__WEBPACK_IMPORTED_MODULE_26__.o,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],Q.prototype,"renderer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],Q.prototype,"definitionExpression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)(_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_18__.C_)],Q.prototype,"popupEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:_PopupTemplate_js__WEBPACK_IMPORTED_MODULE_13__.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Q.prototype,"popupTemplate",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],Q.prototype,"normalReferenceFrame",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,json:{read:!1}})],Q.prototype,"defaultPopupTemplate",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({json:{write:!1}}),(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)(new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_39__.Xn({"3DObject":"3d-object",Point:"point"}))],Q.prototype,"layerType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],Q.prototype,"geometryType",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],Q.prototype,"profile",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,json:{read:!1}})],Q.prototype,"capabilities",null),Q=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_38__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.j)("esri.layers.buildingSublayers.BuildingComponentSublayer")],Q);const __WEBPACK_DEFAULT_EXPORT__=Q},81382:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var p,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(56140),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(95830),__webpack_require__(36544),__webpack_require__(68055),__webpack_require__(79881)),_core_Warning_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15307),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87566),_core_Collection_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(28293)),_core_loadAll_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1721),_BuildingSublayer_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77600),_BuildingComponentSublayer_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(53409);const a={type:_core_Collection_js__WEBPACK_IMPORTED_MODULE_9__.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:l}}},read:!1}};function l(r,e,s){if(r&&Array.isArray(r))return new _core_Collection_js__WEBPACK_IMPORTED_MODULE_9__.Z(r.map((r=>{const e=function y(r){return"group"===r.layerType?c:_BuildingComponentSublayer_js__WEBPACK_IMPORTED_MODULE_12__.Z}(r);if(e){const o=new e;return o.read(r,s),o}s&&s.messages&&r&&s.messages.push(new _core_Warning_js__WEBPACK_IMPORTED_MODULE_4__.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(r.type||"unknown")+"' are not supported",{definition:r,context:s}))})))}let c=p=class extends _BuildingSublayer_js__WEBPACK_IMPORTED_MODULE_11__.Z{constructor(r){super(r),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,_core_loadAll_js__WEBPACK_IMPORTED_MODULE_10__.wF)(this,(r=>p.forEachSublayer(this.sublayers,(e=>{"building-group"!==e.type&&r(e)}))))}};var r;(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_13__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],c.prototype,"listMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_13__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)(a)],c.prototype,"sublayers",void 0),c=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_13__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],c),(r=c||(c={})).sublayersProperty=a,r.readSublayers=l,r.forEachSublayer=function e(r,o){r.forEach((r=>{o(r),"building-group"===r.type&&e(r.sublayers,o)}))};const __WEBPACK_DEFAULT_EXPORT__=c},77600:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(56140),_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(95830),__webpack_require__(36544),__webpack_require__(68055)),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(79881),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30590),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87566),_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(35326)),_core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43072),_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18152);let l=class extends((0,_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_9__.I)(_core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_10__.w)){constructor(r){super(r),this.title="",this.id=-1,this.modelName=null,this.isEmpty=null,this.visible=!0,this.opacity=1}readTitle(r,o){return"string"==typeof o.alias?o.alias:"string"==typeof o.name?o.name:""}readIdOnlyOnce(r){return-1!==this.id?this.id:"number"==typeof r?r:void 0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String,json:{origins:{"web-scene":{write:!0},"portal-item":{write:!0}}}})],l.prototype,"title",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_4__.r)("service","title",["alias","name"])],l.prototype,"readTitle",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],l.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__.z8,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],l.prototype,"id",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_4__.r)("service","id")],l.prototype,"readIdOnlyOnce",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)((0,_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_11__.Lx)(String))],l.prototype,"modelName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)((0,_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_11__.Lx)(Boolean))],l.prototype,"isEmpty",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Boolean,json:{name:"visibility",write:!0}})],l.prototype,"visible",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number,json:{write:!0}})],l.prototype,"opacity",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layers.buildingSublayers.BuildingSublayer")],l);const __WEBPACK_DEFAULT_EXPORT__=l},63770:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>n});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(59472),_core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32656),_request_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(36654);async function n(n,t,s,a,i){let d=null;if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.pC)(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:"page",rootPage:(await(0,_request_js__WEBPACK_IMPORTED_MODULE_1__.default)(t,{query:{f:"json"},responseType:"json",signal:i})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(c){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.pC)(a)&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",t,c),d=c}}if(!t)return null;const l=`${n}/nodes/`,p=l+(t&&t.split("/").pop());try{return{type:"node",rootNode:(await(0,_request_js__WEBPACK_IMPORTED_MODULE_1__.default)(p,{query:{f:"json"},responseType:"json",signal:i})).data,urlPrefix:l}}catch(c){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.Z("sceneservice:root-node-missing","Root node missing.",{pageError:d,nodeError:c,url:p})}}},54209:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H3:()=>m,QI:()=>l,U4:()=>s,Yh:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(56140),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(95830),__webpack_require__(36544),__webpack_require__(68055),__webpack_require__(79881)),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9870),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87566),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(58385));let s=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],s.prototype,"nodesPerPage",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],s.prototype,"rootIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String})],s.prototype,"lodSelectionMetricType",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SNodePageDefinition")],s);let i=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.factor=1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],i.prototype,"id",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],i.prototype,"factor",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SMaterialTexture")],i);let a=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[Number]})],a.prototype,"baseColorFactor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:i})],a.prototype,"baseColorTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:i})],a.prototype,"metallicRoughnessTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],a.prototype,"metallicFactor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],a.prototype,"roughnessFactor",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],a);let l=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({opaque:"opaque",mask:"mask",blend:"blend"})],l.prototype,"alphaMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],l.prototype,"alphaCutoff",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Boolean})],l.prototype,"doubleSided",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({none:"none",back:"back",front:"front"})],l.prototype,"cullFace",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:i})],l.prototype,"normalTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:i})],l.prototype,"occlusionTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:i})],l.prototype,"emissiveTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[Number]})],l.prototype,"emissiveFactor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:a})],l.prototype,"pbrMetallicRoughness",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SMaterialDefinition")],l);let n=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",basis:"basis"})],n.prototype,"format",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3STextureFormat")],n);let u=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.atlas=!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[n]})],u.prototype,"formats",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Boolean})],u.prototype,"atlas",void 0),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3STextureSetDefinition")],u);let y=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],y.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],y.prototype,"component",void 0),y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SGeometryAttribute")],y);let c=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({draco:"draco"})],c.prototype,"encoding",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:[String]})],c.prototype,"attributes",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SGeometryCompressedAttributes")],c);let d=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{constructor(){super(...arguments),this.offset=0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:Number})],d.prototype,"offset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"position",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"normal",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"uv0",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"color",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"uvRegion",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"featureId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:y})],d.prototype,"faceRange",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({type:c})],d.prototype,"compressedAttributes",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SGeometryBuffer")],d);let m=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_9__.wq{};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_4__.J)({triangle:"triangle"})],m.prototype,"topology",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],m.prototype,"geometryBuffers",void 0),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_10__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.j)("esri.layer.support.I3SGeometryDefinition")],m)},81421:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>s});const s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},76007:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>BuildingSceneLayerView3D});var tslib_es6=__webpack_require__(56140),maybe=(__webpack_require__(95830),__webpack_require__(59472)),Logger=__webpack_require__(36544),handleUtils=(__webpack_require__(68055),__webpack_require__(5632)),property=__webpack_require__(79881),subclass=__webpack_require__(87566),promiseUtils=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(39105)),Accessor=__webpack_require__(82677),Collection=__webpack_require__(28293),Graphic=__webpack_require__(15988),watchUtils=__webpack_require__(80621),LayerView3D=(__webpack_require__(81382),__webpack_require__(9355)),layerViewUpdatingProperties=__webpack_require__(2609),LayerView=(__webpack_require__(84300),__webpack_require__(48164));class s extends LayerView.Z{constructor(){super(...arguments),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error("Not implemented")}}(0,tslib_es6._)([(0,property.Cb)()],s.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.Cb)()],s.prototype,"sublayerViews",void 0);const BuildingSceneLayerView=s;var I3SUtil=__webpack_require__(83057),Evented=__webpack_require__(35470),Identifiable=__webpack_require__(35326),core_Promise=__webpack_require__(75044),HandleOwner=__webpack_require__(77204);const l=(l,n)=>{let u=class extends((0,core_Promise.v)((0,HandleOwner.p)((0,Identifiable.I)(Evented.Z.EventedMixin(l))))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!0===this.get("sublayer.visible")}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.get("sublayer.opacity"))*e(this.get("parent.fullOpacity"))}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.visible||!1}isUpdating(){return!1}};return(0,tslib_es6._)([(0,property.Cb)()],u.prototype,"sublayer",void 0),(0,tslib_es6._)([(0,property.Cb)()],u.prototype,"parent",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],u.prototype,"suspended",null),(0,tslib_es6._)([(0,property.Cb)({type:Boolean,readOnly:!0})],u.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],u.prototype,"view",void 0),(0,tslib_es6._)([(0,property.Cb)()],u.prototype,"visible",null),(0,tslib_es6._)([(0,property.Cb)()],u.prototype,"fullOpacity",null),u=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.layers.BuildingSublayerView3D")],u),u};var vec4f64=__webpack_require__(38256),edgeUtils=__webpack_require__(39721);function BuildingFilterUtil_l(e){switch(e.filterMode.type){case"solid":return{mode:0};case"wire-frame":return{mode:1,edgeMaterial:(0,edgeUtils.C8)(e.filterMode.edges,{})};case"x-ray":return{mode:2}}}function c(r,o){if((0,maybe.Wi)(o))return r.color[3]=0,r.edgeMaterial=null,void(r.pickable=!1);switch(o.mode){case 0:return;case 1:return r.color[3]=0,r.edgeMaterial=o.edgeMaterial,void(r.pickable=!1);case 2:return r.color[0]=1,r.color[1]=1,r.color[2]=1,r.color[3]*=.15,r.colorMixMode=3,r.castShadows=!1,r.pickable=!1,void(r.edgeMaterial=function i(r){return(0,maybe.Wi)(r)?null:(BuildingFilterUtil_s.lastMaterial!==r&&(BuildingFilterUtil_s.cachedMaterial=function n(e){const o=(0,vec4f64.d)(e.color);return o[3]*=.075,{...e,color:o}}(r),BuildingFilterUtil_s.lastMaterial=r),BuildingFilterUtil_s.cachedMaterial)}(r.edgeMaterial))}}const BuildingFilterUtil_s={cachedMaterial:null,lastMaterial:null};var core_Error=__webpack_require__(32656),fieldUtils=__webpack_require__(4665),Scheduler=__webpack_require__(35430),WhereClause=__webpack_require__(71063),Query=__webpack_require__(31518);__webpack_require__(53409);class o extends Accessor.Z{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error("Not implemented")}queryFeatures(r,e){throw new Error("Not implemented")}queryObjectIds(r,e){throw new Error("Not implemented")}queryFeatureCount(r,e){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(r,e){throw new Error("Not implemented")}highlight(r){throw new Error("Not implemented")}}(0,tslib_es6._)([(0,property.Cb)()],o.prototype,"sublayer",void 0),(0,tslib_es6._)([(0,property.Cb)()],o.prototype,"availableFields",null),(0,tslib_es6._)([(0,property.Cb)()],o.prototype,"filter",null);const BuildingComponentSublayerView=o;var FeatureFilter=__webpack_require__(44119),popupUtils=__webpack_require__(21707),I3SGeometryUtil=__webpack_require__(43209),I3SMeshView3D=__webpack_require__(45872),I3SMeshViewFilter=__webpack_require__(12739),I3SQueryEngine=__webpack_require__(36122),I3SQueryFeatureAdapter=__webpack_require__(36799),I3SQueryFeatureStore=__webpack_require__(45094),DefinitionExpressionSceneLayerView=__webpack_require__(97614);const q=Logger.Z.getLogger("esri.views.3d.layers.BuildingComponentSublayerView3D");let R=class extends((0,DefinitionExpressionSceneLayerView.l)((0,I3SMeshView3D.N)(l(BuildingComponentSublayerView)))){constructor(){super(...arguments),this.layerView=null,this._elevationContext="scene",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.lodFactor=1,this.progressiveLoadFactor=1,this._queryEngine=null}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}initialize(){this.updatingHandles.add(this,"sublayer.renderer,definitionExpressionFields,filterExpressionFields",(()=>this._updateRequiredFields())),this.updatingHandles.add(this.sublayer,"renderer",(e=>this._rendererChange(e)),2);for(const e of["parsedDefinitionExpression","filter","viewFilter.parsedWhereClause","viewFilter.parsedGeometry","viewFilter.sortedObjectIds"])this.updatingHandles.add(this,e,(()=>this._filterChange()));this.updatingHandles.add(this,"parsedFilterExpressions",(()=>this._updateSymbologyOverride()),2),this.addResolvingPromise(this._updateRequiredFields())}get parsedFilterExpressions(){return"Overview"===this.sublayer.modelName?[]:this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=WhereClause.WhereClause.create(e,this.sublayer.fieldsIndex)}catch(l){return q.error("Failed to parse filterExpression: "+l),null}if(!t.isStandardized)return q.error("filterExpression is using non standard function"),null;const i=[],s=t.fieldNames;return(0,I3SUtil.e8)(s,this.sublayer.fields,{missingFields:i}),i.length>0?(q.error(`filterExpression references unknown fields: ${i.join(", ")}`),null):[t,r]})).filter((e=>null!=e))}get filter(){return(0,maybe.pC)(this.viewFilter)?this.viewFilter.filter:null}set filter(e){!(0,maybe.Wi)(e)&&I3SMeshViewFilter.z.checkSupport(e)?(0,maybe.pC)(this.viewFilter)?this.viewFilter.filter=e:this.viewFilter=new I3SMeshViewFilter.z({filter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),applyFilters:()=>this._applyFilters(!0),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError)}):this.viewFilter=null}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return c(t,l)}catch(i){this.logError(i)}return c(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return(0,fieldUtils.Q0)(this.sublayer.fields,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),[]))}get availableFields(){const e=this.sublayer,r=e.fields;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...(0,fieldUtils.Lk)(r,i),...t]}return(0,fieldUtils.Q0)(r,t)}_createLayerGraphic(e){const r=new Graphic.Z(null,null,e);return r.layer=this.sublayer.layer,r.sourceLayer=this.sublayer,r}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeatures(e,t){const i=this._validateFetchPopupFeatures(t);if(i)return Promise.reject(i);if(!(0,maybe.pC)(t)||!t.clientGraphics||0===t.clientGraphics.length)return[];const s=[],l=[],o=(0,maybe.pC)(this.sublayer.associatedLayer)?await this.sublayer.associatedLayer.load():this.sublayer,n=(0,fieldUtils.Lk)(this.sublayer.fields,await(0,popupUtils.e)(o,(0,popupUtils.V)(this.sublayer,t))),d=new Set;for(const r of t.clientGraphics)(0,fieldUtils.Gm)(n,r,d)?l.push(r):s.push(r);return 0===l.length?Promise.resolve(s):((0,maybe.pC)(this.sublayer.associatedLayer)&&await this.sublayer.associatedLayer.load().catch((()=>q.warn("Failed to load associated feature layer. Displaying popup attributes from cached attributes."))),this.whenGraphicAttributes(l,Array.from(d)).catch((()=>l)).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=(0,fieldUtils.Q0)(this.sublayer.fields,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fields):[],...this.definitionExpressionFields||[],...this.filterExpressionFields||[]]);this._set("requiredFields",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:t}=r;return t?(0,popupUtils.V)(r,e)?void 0:new core_Error.Z("buildingscenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{sublayer:r}):new core_Error.Z("buildingscenelayerview3d:fetchPopupFeatures","Popups are disabled",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),(0,maybe.pC)(this.viewFilter)&&this.viewFilter.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:["*"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return(0,maybe.pC)(this.filter)?this.filter.createQuery(e):new Query.Z(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),null==r?void 0:r.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),null==r?void 0:r.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),null==r?void 0:r.signal).then((e=>{if(null==e||!e.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),null==r?void 0:r.signal)}_ensureQueryEngine(){return(0,maybe.Wi)(this._queryEngine)&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=(0,I3SGeometryUtil.gz)(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new I3SQueryEngine.Z({layerView:this,task:Scheduler.iQ.FEATURE_QUERY_ENGINE,spatialIndex:new I3SQueryFeatureStore.Z({featureAdapter:new I3SQueryFeatureAdapter.u({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,2),getFeatureExtent:e,sourceSpatialReference:(0,I3SUtil.tp)(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery((0,maybe.Wi)(e)?this.createQuery():Query.Z.from(e))}};(0,tslib_es6._)([(0,property.Cb)({aliasOf:"sublayer"})],R.prototype,"i3slayer",void 0),(0,tslib_es6._)([(0,property.Cb)()],R.prototype,"layerView",void 0),(0,tslib_es6._)([(0,property.Cb)()],R.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.3dObject.lodFactor"})],R.prototype,"lodFactor",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],R.prototype,"parsedFilterExpressions",null),(0,tslib_es6._)([(0,property.Cb)({type:FeatureFilter.Z})],R.prototype,"filter",null),(0,tslib_es6._)([(0,property.Cb)()],R.prototype,"viewFilter",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[String],readOnly:!0})],R.prototype,"filterExpressionFields",null),(0,tslib_es6._)([(0,property.Cb)({type:[String],readOnly:!0})],R.prototype,"requiredFields",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[String],readOnly:!0})],R.prototype,"availableFields",null),R=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.layers.BuildingComponentSublayerView3D")],R);const BuildingComponentSublayerView3D=R,V=Logger.Z.getLogger("esri.views.3d.layers.BuildingSceneLayerView3D"),j=l(Accessor.Z);let C=class extends((0,LayerView3D.A)(BuildingSceneLayerView)){constructor(){super(...arguments),this.sublayerViews=new Collection.Z,this._abortController=(0,promiseUtils.yi)(),this._loadingComponents=0}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,i=null!=r?r.filterBlocks.find((e=>"solid"===e.filterMode.type)):null;return i?i.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r&&r.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression,BuildingFilterUtil_l(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){(0,I3SUtil.Jf)(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this.initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController.abort(),this._abortController=null}initializeSubLayerViews(e,r){const i=this,s=this.view;e.forEach((e=>{if(!e.isEmpty)if("building-group"===e.type){const i=new j({sublayer:e,view:s,parent:r});this.initializeSubLayerViews(e.sublayers,i)}else"mesh"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const t=new BuildingComponentSublayerView3D({sublayer:e,layerView:i,view:s,parent:r});this.sublayerViews.push(t),this.handles.add([(0,watchUtils.S1)(t,"updating",(()=>this.notifyChange("updating")),!0),(0,watchUtils.S1)(t,"updatingProgress",(()=>this.notifyChange("updatingProgressValue")),!0)])})).catch((r=>{(0,promiseUtils.D_)(r)||V.error(`Error while creating view for sublayer ${e.id}\nLayer: ${this.layer.url}\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange("updating"),this.notifyChange("updatingProgressValue")})))}))}getGraphicFromIntersectorMetadata(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorMetadata(e);return null}async fetchPopupFeatures(e,s){if(!(0,maybe.pC)(s)||!s.clientGraphics||0===s.clientGraphics.length)return;const t=this._findComponent(s.clientGraphics[0].sourceLayer);return(0,maybe.Wi)(t)?void 0:t.fetchPopupFeatures(e,s)}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return(0,maybe.Wi)(r)?Promise.reject():r.whenGraphicBounds(e)}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e){e instanceof Graphic.Z?e=[e]:e instanceof Collection.Z&&(e=e.toArray());const r=[];if(Array.isArray(e)&&e.length>0&&e[0]instanceof Graphic.Z){const i=e,s=new Map;for(const e of i){let r=s.get(e.sourceLayer);null==r&&(r=[],s.set(e.sourceLayer,r)),r.push(e)}this.sublayerViews.forEach((e=>{const i=s.get(e.sublayer);i&&r.push(e.highlight(i))}))}return(0,handleUtils.AL)(r)}getUsedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.getUsedMemory()),0)}getUnloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.getUnloadedMemory()),0)}ignoresMemoryFactor(){return!1}};(0,tslib_es6._)([(0,property.Cb)()],C.prototype,"sublayerViews",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],C.prototype,"filterExpression",null),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],C.prototype,"filterExpressions",null),(0,tslib_es6._)([(0,property.Cb)(layerViewUpdatingProperties.q)],C.prototype,"updatingProgress",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0,dependsOn:[]})],C.prototype,"updatingProgressValue",null),C=(0,tslib_es6._)([(0,subclass.j)("esri.views.3d.layers.BuildingSceneLayerView3D")],C);const BuildingSceneLayerView3D=C}}]);
//# sourceMappingURL=6007.01427dc7.iframe.bundle.js.map