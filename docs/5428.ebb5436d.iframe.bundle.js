(self.webpackChunkreact_arcgis_wmws=self.webpackChunkreact_arcgis_wmws||[]).push([[5428],{55649:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31514),_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(69822),_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87772),_WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23956);const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__.Z{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__.Z],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__.jx.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_0__.jx.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__.jx.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__.Z],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__.jx.DEBUG,target:()=>this.children,has:"esri-tiles-debug"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}const __WEBPACK_DEFAULT_EXPORT__=i},23956:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>WGLContainer});__webpack_require__(95830);var maybe=__webpack_require__(59472),enums=__webpack_require__(31514),Container=__webpack_require__(17149),brushes=__webpack_require__(32825),Logger=__webpack_require__(36544),Error=__webpack_require__(32656),VertexArrayObject=__webpack_require__(74038),DisplayObject=__webpack_require__(56291),OptimizedGeometry=__webpack_require__(73127),featureConversionUtils=__webpack_require__(31036),vec2f64=__webpack_require__(55735),earcut=__webpack_require__(27202),vec2=__webpack_require__(14286),BufferObject=__webpack_require__(69595),number=__webpack_require__(53986);const m=Logger.Z.getLogger("esri.views.2d.engine.webgl.Mesh2D"),y=(e,t,r,o)=>{let n=0;for(let s=1;s<r;s++){const r=e[2*(t+s-1)],o=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-r)*(e[2*(t+s)+1]+o)}return o?n>0:n<0},x=({coords:e,lengths:t},r)=>{const o=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const c=s,a=[];for(;n<t.length-1&&y(e,s+t[n],t[n+1],r);n+=1,s+=t[n])a.push(s+t[n]-c);const f=e.slice(2*c,2*(s+t[n])),h=(0,earcut.O)(f,a,2);for(const e of h)o.push(e+c)}return o};class g{constructor(e,t,r,o=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=o}static fromRect({x:e,y:t,width:r,height:o}){const n=e,s=t,c=n+r,i=s+o;return g.fromScreenExtent({xmin:n,ymin:s,xmax:c,ymax:i})}static fromPath(e){const t=(0,featureConversionUtils.ks)(new OptimizedGeometry.Z,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),c=new Uint32Array(r.length/2);for(let o=0;o<c.length;o++)c[o]=(0,number.UJ)(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:c},s,4)}static fromGeometry(e,t){const o=t.geometry.type;switch(o){case"polygon":return g.fromPolygon(e,t.geometry);case"extent":return g.fromMapExtent(e,t.geometry);default:return m.error(new Error.Z("mapview-bad-type",`Unable to create a mesh from type ${o}`,t)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=(0,featureConversionUtils.Uy)(new OptimizedGeometry.Z,t,!1,!1),n=r.coords,i=new Uint32Array(x(r,!1)),f=new Uint32Array(n.length/2),m=(0,vec2f64.a)(),u=(0,vec2f64.a)();for(let o=0;o<f.length;o++)(0,vec2.s)(m,n[2*o],n[2*o+1]),e.toScreen(u,m),f[o]=(0,number.UJ)(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:f},i,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:o}){const n={geometry:new Uint32Array([(0,number.UJ)(e,r),(0,number.UJ)(t,r),(0,number.UJ)(e,o),(0,number.UJ)(e,o),(0,number.UJ)(t,r),(0,number.UJ)(t,o)])},s=new Uint32Array([0,1,2,3,4,5]);return new g(n,s,4)}static fromMapExtent(e,t){const[r,o]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([(0,number.UJ)(r,o),(0,number.UJ)(n,o),(0,number.UJ)(r,s),(0,number.UJ)(r,s),(0,number.UJ)(n,o),(0,number.UJ)(n,s)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){(0,maybe.pC)(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const t in this._cache.vertexBuffers)(0,maybe.pC)(this._cache.vertexBuffers[t])&&this._cache.vertexBuffers[t].dispose()}get elementType(){return(e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new Error.Z("Cannot get DataType of array")}})(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=BufferObject.Z.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,o)=>({...r,[o]:BufferObject.Z.createVertex(e,t,this.vertices[o])})),{})),this._cache.vertexBuffers}}const Mesh2D=g,a=Logger.Z.getLogger("esri.views.2d.engine.webgl.ClippingInfo"),c=t=>parseFloat(t)/100;class n extends DisplayObject.s{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch("version",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new n(t,e)}_destroyGL(){(0,maybe.pC)(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),(0,maybe.pC)(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,r,s,h){const[o,a]=r.size;if("geometry"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===a||(this._lastWidth=o,this._lastHeight=a,this._destroyGL()),(0,maybe.Wi)(this._cache.vao)){const e=this._createMesh(r,this._clip),o=e.getIndexBuffer(t),a=e.getVertexBuffers(t);this._cache.mesh=e,this._cache.vao=new VertexArrayObject.Z(t,s,h,a,o)}return this._cache.vao}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i="string"==typeof e.left?c(e.left)*r:e.left,h="string"==typeof e.right?c(e.right)*r:e.right,o="string"==typeof e.top?c(e.top)*s:e.top,a="string"==typeof e.bottom?c(e.bottom)*s:e.bottom,n=i,p=o;return{x:n,y:p,width:Math.max(r-h-n,0),height:Math.max(s-a-p,0)}}_createMesh(t,e){switch(e.type){case"rect":return Mesh2D.fromRect(this._createScreenRect(t,e));case"path":return Mesh2D.fromPath(e);case"geometry":return Mesh2D.fromGeometry(t,e);default:return a.error(new Error.Z("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),Mesh2D.fromRect({x:0,y:0,width:1,height:1})}}}const ClippingInfo=n;class o extends Container.W{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}doRender(e){const r=this.createRenderParams(e),{painter:t,globalOpacity:i,profiler:n,drawPhase:o}=r,a=o===enums.jx.LABEL?1:i*this.computedOpacity;n.recordContainerStart(this.name),t.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),t.compositeLayer(r,a),n.recordContainerEnd()}renderChildren(r){(0,maybe.Wi)(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO}}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[brushes.U.clip],target:()=>this._clippingInfos,drawPhase:enums.jx.MAP|enums.jx.LABEL|enums.jx.LABEL_ALPHA|enums.jx.DEBUG|enums.jx.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if((0,maybe.pC)(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;(0,maybe.pC)(e)&&e.length&&(this._clippingInfos=e.items.map((e=>ClippingInfo.fromClipArea(this.stage,e)))),this.requestRender()}}const WGLContainer=o},81558:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>LayerView2D_l});var tslib_es6=__webpack_require__(56140),property=(__webpack_require__(95830),__webpack_require__(36544),__webpack_require__(68055),__webpack_require__(79881)),subclass=__webpack_require__(87566),Collection=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(28293)),collectionUtils=__webpack_require__(32105),watchUtils=__webpack_require__(80621),JSONSupport=__webpack_require__(58385);let e=class extends JSONSupport.wq{};e=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipArea")],e);const ClipArea=e;var s;let i=s=class extends ClipArea{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"left",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"right",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"top",void 0),(0,tslib_es6._)([(0,property.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"bottom",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],i.prototype,"version",null),i=s=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.ClipRect")],i);const ClipRect=i;var y,Container=__webpack_require__(17149),Geometry=__webpack_require__(39718),Extent=__webpack_require__(52937),Polygon=__webpack_require__(53817),jsonUtils=__webpack_require__(56885);__webpack_require__(36348);const c={base:Geometry.Z,key:"type",typeMap:{extent:Extent.Z,polygon:Polygon.Z}};let n=y=class extends ClipArea{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};(0,tslib_es6._)([(0,property.Cb)({types:c,json:{read:jsonUtils.im,write:!0}})],n.prototype,"geometry",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],n.prototype,"version",null),n=y=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Geometry")],n);const support_Geometry=n;let Path_e=class extends ClipArea{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property.Cb)({type:[[[Number]]],json:{write:!0}})],Path_e.prototype,"path",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],Path_e.prototype,"version",null),Path_e=(0,tslib_es6._)([(0,subclass.j)("esri.views.layers.support.Path")],Path_e);const Path=Path_e,LayerView2D_c=Collection.Z.ofType({key:"type",base:ClipArea,typeMap:{rect:ClipRect,path:Path,geometry:support_Geometry}}),LayerView2D_l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new LayerView2D_c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new Container.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,watchUtils.S1)(this,"suspended",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),(0,watchUtils.S1)(this,["layer.opacity","container"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),(0,watchUtils.S1)(this,["layer.blendMode"],(t=>{this.container&&(this.container.blendMode=t)}),!0),(0,watchUtils.S1)(this,["layer.effect"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on("change",(()=>{this.container.clips=this.clips,this.notifyChange("clips")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,tslib_es6._)([(0,property.Cb)({type:LayerView2D_c,set(t){const e=(0,collectionUtils.Z)(t,this._get("clips"),LayerView2D_c);this._set("clips",e)}})],a.prototype,"clips",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"moving",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"attached",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"container",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.Cb)({readOnly:!0})],a.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"updating",null),(0,tslib_es6._)([(0,property.Cb)()],a.prototype,"view",void 0),a=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.LayerView2D")],a),a}},25428:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>VectorTileLayerView2D});var tslib_es6=__webpack_require__(56140),maybe=(__webpack_require__(95830),__webpack_require__(59472)),Logger=__webpack_require__(36544),property=(__webpack_require__(68055),__webpack_require__(79881)),subclass=__webpack_require__(87566),Error=__webpack_require__(32656),promiseUtils=(__webpack_require__(10923),__webpack_require__(57002),__webpack_require__(86035),__webpack_require__(39105)),Graphic=__webpack_require__(15988),Handles=__webpack_require__(59691),aaBoundingRect=__webpack_require__(50897),diffUtils=__webpack_require__(23229),StyleRepository=__webpack_require__(6017),TileQueue=__webpack_require__(13596),VectorTile=__webpack_require__(57498),LayerView=__webpack_require__(48164),LayerView2D=__webpack_require__(81558),TileHandler=__webpack_require__(78540),LRUCache=__webpack_require__(40365),TileKey=__webpack_require__(5201),TileCoverage=__webpack_require__(73978);const n=(e,i)=>e+1/(1<<2*i);class a{constructor(e,i){this._tiles=new Map,this._tileCache=new LRUCache.Z(40,(e=>e.dispose())),this._viewSize=[0,0],this._visibleTiles=new Map,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this._container=i}destroy(){for(const[e,i]of this._tiles)i.dispose();this._tiles=null,this._tileCache.clear(),this._tileCache=null}update(e){this._updateCacheSize(e);const i=this.tileInfoView,t=i.getTileCoverage(e.state,0,"smallest"),{spans:r,lodInfo:o}=t,{level:n}=o,a=new Set,h=new Set;for(const{row:l,colFrom:d,colTo:_}of r)for(let e=d;e<=_;e++){const i=TileKey.Z.getId(n,l,o.normalizeCol(e),o.getWorldForColumn(e)),t=this._getOrAcquireTile(i);a.add(i),t.processed()?this._addToContainer(t):h.add(new TileKey.Z(i))}for(const[s,l]of this._tiles)l.isCoverage=a.has(s);for(const s of h)this._findPlaceholdersForMissingTiles(s,a);let c=!1;for(const[s,l]of this._tiles)l.neededForCoverage=a.has(s),l.neededForCoverage||l.isHoldingForFade&&i.intersects(t,l.key)&&a.add(s),l.isFading&&(c=!0);for(const[s,l]of this._tiles)a.has(s)||this._releaseTile(s);return TileCoverage.Z.pool.release(t),!c}clear(){this._tiles.clear(),this._tileCache.clear(),this._visibleTiles.clear()}clearCache(){this._tileCache.clear()}_findPlaceholdersForMissingTiles(e,i){const t=[];for(const[l,r]of this._tiles)this._addPlaceholderChild(t,r,e,i);const s=t.reduce(n,0);Math.abs(1-s)<1e-6||this._addPlaceholderParent(e.id,i)}_addPlaceholderChild(e,i,t,s){i.key.level<=t.level||!i.hasData()||function c(e,i){const t=i.level-e.level;return e.row===i.row>>t&&e.col===i.col>>t&&e.world===i.world}(t,i.key)&&(this._addToContainer(i),s.add(i.id),e.push(i.key.level-t.level))}_addPlaceholderParent(e,i){let t=e;for(;;){if(t=h(t),!t||i.has(t))return;const e=this._getTile(t);if(e&&e.hasData())return this._addToContainer(e),void i.add(e.id)}}_getOrAcquireTile(e){let i=this._tiles.get(e);return i||(i=this._tileCache.pop(e),i||(i=this.acquireTile(new TileKey.Z(e))),this._tiles.set(e,i),i)}_getTile(e){let i=this._tiles.get(e);return i||(i=this._tileCache.pop(e),i&&this._tiles.set(e,i),i)}_releaseTile(e){const i=this._tiles.get(e);this.releaseTile(i),this._removeFromContainer(i),this._tiles.delete(e),i.hasData()?this._tileCache.put(e,i,1):i.dispose()}_addToContainer(t){let s;const l=[],r=this._container;if(r.contains(t))return;const o=this._visibleTiles;for(const[i,n]of o)this._canConnectDirectly(t,n)&&l.push(n),(0,maybe.Wi)(s)&&this._canConnectDirectly(n,t)&&(s=n);if((0,maybe.pC)(s)){for(const e of l)s.childrenTiles.delete(e),t.childrenTiles.add(e),e.parentTile=t;s.childrenTiles.add(t),t.parentTile=s}else for(const e of l)t.childrenTiles.add(e),e.parentTile=t;o.set(t.id,t),r.addChild(t)}_removeFromContainer(e){if(this._visibleTiles.delete(e.id),this._container.removeChild(e),(0,maybe.pC)(e.parentTile)){e.parentTile.childrenTiles.delete(e);for(const t of e.childrenTiles)(0,maybe.pC)(e.parentTile)&&e.parentTile.childrenTiles.add(t)}for(const i of e.childrenTiles)i.parentTile=e.parentTile;e.parentTile=null,e.childrenTiles.clear()}_canConnectDirectly(e,i){const t=e.key;let{level:s,row:l,col:r,world:o}=i.key;const n=this._visibleTiles;for(;s>0;){if(s--,l>>=1,r>>=1,t.level===s&&t.row===l&&t.col===r&&t.world===o)return!0;if(n.has(`${s}/${l}/${r}/${o}`))return!1}return!1}_updateCacheSize(e){const i=e.state.size;if(i[0]===this._viewSize[0]&&i[1]===this._viewSize[1])return;const t=Math.ceil(i[0]/512)+1,s=Math.ceil(i[1]/512)+1;this._viewSize[0]=i[0],this._viewSize[1]=i[1],this._tileCache.maxSize=5*t*s}}function h(e){const[i,t,s,l]=e.split("/"),r=parseInt(i,10);return 0===r?null:`${r-1}/${parseInt(t,10)>>1}/${parseInt(s,10)>>1}/${parseInt(l,10)}`}var TiledDisplayObject=__webpack_require__(9793),enums=__webpack_require__(31514),TileContainer=__webpack_require__(55649),debugging=__webpack_require__(48018),Evented=__webpack_require__(35470),config=__webpack_require__(41658),core=__webpack_require__(16086),util=__webpack_require__(17441),jobs=__webpack_require__(84959),SymbolDeclutterer=__webpack_require__(12559),SymbolRepository=__webpack_require__(49922);class SymbolFader_n extends Evented.Z{constructor(t,e){super(),this.styleRepository=t,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._completed=!1,this._symbolRepository=new SymbolRepository.L(4096,e,(()=>new core.J)),this._symbolDeclutterer=new SymbolDeclutterer.g(e,this._symbolRepository,((t,e,i)=>new jobs.f(t,e,i,this.styleRepository,this._zoom,this._viewState.rotation)),((t,e)=>{t.allSymbolsFadingOut=!0,t.lastOpacityUpdate=e,(0,util.C$)(t,e,!0),t.decluttered=!0,t.requestRender()}),((t,e)=>this.styleRepository.getStyleLayerByUID(t.styleLayerUID).z-this.styleRepository.getStyleLayerByUID(e.styleLayerUID).z),(t=>{const e=this.styleRepository.getStyleLayerByUID(t).getLayoutProperty("visibility");return!e||1!==e.getValue()}))}addTile(t){t.decluttered=!1,this._tileToHandle.set(t,t.on("symbols-changed",(()=>{this._symbolRepository.add(t),this.restartDeclutter()}))),this._symbolRepository.add(t),this.restartDeclutter()}removeTile(t){const e=this._tileToHandle.get(t);e&&(this._symbolRepository.removeTile(t),this.restartDeclutter(),e.remove(),this._tileToHandle.delete(t))}update(t,e){return this._zoom=t,this._viewState={scale:e.scale,rotation:e.rotation,center:[e.center[0],e.center[1]],size:[e.size[0],e.size[1]]},this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((t=>t.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(t){this._symbolRepository.deleteStyleLayers(t)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(config.Ts),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){(0,maybe.pC)(this._stableNotificationHandle)&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this.emit("fade-complete")}),1.5*config.nN)}_notifyUnstable(){(0,maybe.pC)(this._stableNotificationHandle)&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this.emit("fade-start")}}const u=1e-6;function p(e,t){if(e){const s=e.getLayoutProperty("visibility");if(!s||1!==s.getValue()&&(void 0===e.minzoom||e.minzoom<t+u)&&(void 0===e.maxzoom||e.maxzoom>=t-u))return!0}return!1}class m extends TileContainer.Z{constructor(e){super(e),this._backgroundTiles=[],this._pointToCallbacks=new Map,this._fading=!1}destroy(){this.removeAllChildren(),this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null),(0,maybe.pC)(this._symbolFader)&&(this._symbolFader.clear(),this._symbolFader=null),this._styleRepository=null,this._backgroundTiles=[],this._pointToCallbacks.clear()}setStyleResources(e,r,i){if(this._spriteMosaic=e,this._glyphMosaic=r,this._styleRepository=i,(0,maybe.Wi)(this._symbolFader)){const e=new SymbolFader_n(this._styleRepository,this.children);e.on("fade-start",(()=>{this.emit("fade-start"),this._fading=!0,this.requestRender()})),e.on("fade-complete",(()=>{this.emit("fade-complete"),this._fading=!1,this.requestRender()})),this._symbolFader=e}(0,maybe.Wg)(this._symbolFader).styleRepository=i}deleteStyleLayers(t){(0,maybe.pC)(this._symbolFader)&&this._symbolFader.deleteStyleLayers(t)}async hitTest(e,t){const s=[e,t],i=(0,promiseUtils.hh)();return this._pointToCallbacks.set(s,i),this.requestRender(),i.promise}enterTileInvalidation(){for(const e of this.children)e.invalidating=!0}createRenderParams(e){return{...super.createRenderParams(e),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}}doRender(e){!this.visible||e.drawPhase!==enums.jx.MAP&&e.drawPhase!==enums.jx.DEBUG||void 0===this._spriteMosaic||super.doRender(e)}addChild(t){return super.addChild(t),(0,maybe.pC)(this._symbolFader)?this._symbolFader.addTile(t):t.decluttered=!0,this.requestRender(),t}removeChild(t){return(0,maybe.pC)(this._symbolFader)&&this._symbolFader.removeTile(t),this.requestRender(),super.removeChild(t)}renderChildren(e){if(e.drawPhase!==enums.jx.DEBUG){if(this._doRender(e),this._pointToCallbacks.size>0){const{context:t}=e,s=t.getBoundFramebufferObject();e.drawPhase=enums.jx.HITTEST;const r=e.painter.effects.hittest;r.bind(e),this._doRender(e),r.draw(e,this._pointToCallbacks),t.bindFramebuffer(s)}}else super.renderChildren(e)}removeAllChildren(){for(let t=0;t<this.children.length;t++){const s=this.children[t];(0,maybe.pC)(this._symbolFader)&&this._symbolFader.removeTile(s),s.dispose()}super.removeAllChildren()}getStencilTarget(){return this.children.filter((e=>e.neededForCoverage&&e.hasData()))}restartDeclutter(){(0,maybe.pC)(this._symbolFader)&&this._symbolFader.restartDeclutter()}_doRender(t){const{context:s}=t,r=this._styleRepository;if(!r)return;const i=r.layers;let o=!0;t.drawPhase===enums.jx.HITTEST&&(o=!1),r.backgroundBucketIds.length>0&&(t.renderPass="background",this._renderBackgroundLayers(t,r.backgroundBucketIds)),super.renderChildren(t),t.drawPhase===enums.jx.MAP&&this._fade(t.displayLevel,t.state);const l=this.children.filter((e=>e.visible&&e.hasData()));if(l&&0!==l.length){for(const e of l)e.triangleCount=0;s.setStencilWriteMask(0),s.setColorMask(!0,!0,!0,!0),s.setStencilOp(7680,7680,7681),s.setStencilTestEnabled(!0),s.setBlendingEnabled(!1),s.setDepthTestEnabled(!0),s.setDepthWriteEnabled(!0),s.setDepthFunction(515),s.setClearDepth(1),s.clear(s.gl.DEPTH_BUFFER_BIT),t.renderPass="opaque";for(let e=i.length-1;e>=0;e--)this._renderStyleLayer(i[e],t,l);s.setDepthWriteEnabled(!1),s.setBlendingEnabled(o),s.setBlendFunctionSeparate(1,771,1,771),t.renderPass="translucent";for(let e=0;e<i.length;e++)this._renderStyleLayer(i[e],t,l);s.setDepthTestEnabled(!1),t.renderPass="symbol";for(let e=0;e<i.length;e++)this._renderStyleLayer(i[e],t,l);if(s.bindVAO(),s.setStencilTestEnabled(!0),s.setBlendingEnabled(!0),t.drawPhase===enums.jx.MAP){const t=window.COLLISION_DEBUG_CTX;if(t&&(0,maybe.pC)(this._symbolFader)&&(t.clearRect(0,0,t.canvas.width,t.canvas.height),!this._fading||window.COLLISION_XRAY))for(const e of this.children)if(e.symbols){const s=[];if(e.symbols.forEach((e=>{s.push(...e)})),window.COLLISION_SHOW_GRID){var n,d,y;const e=null==(n=this._symbolFader)||null==(d=n._symbolDeclutterer)||null==(y=d._collisionJob)?void 0:y._gridIndex;e&&(0,debugging.GF)(t,e)}(0,debugging.uF)(t,s)}}}}_fade(t,s){(0,maybe.pC)(this._symbolFader)&&(this._symbolFader.update(t,s)||this.requestRender())}_renderStyleLayer(e,t,s){const{painter:r,renderPass:i}=t;if(void 0===e)return;const o=e.getLayoutProperty("visibility");if(o&&1===o.getValue())return;let l;switch(e.type){case 0:return;case 1:if("opaque"!==i&&"translucent"!==t.renderPass)return;l="vtlFill";break;case 2:if("translucent"!==i)return;l="vtlLine";break;case 4:if("symbol"!==i)return;l="vtlCircle";break;case 3:if("symbol"!==i)return;l="vtlSymbol"}if(s=3===e.type?s.filter((e=>e.decluttered)):s.filter((e=>e.neededForCoverage)),"vtlSymbol"!==l){const r=t.displayLevel;if(0===s.length||void 0!==e.minzoom&&e.minzoom>=r+u||void 0!==e.maxzoom&&e.maxzoom<r-u)return}const n=e.uid;t.styleLayerUID=n,t.styleLayer=e;for(const a of s)if(a.layerData.has(n)){r.renderObjects(t,s,l);break}}_renderBackgroundLayers(t,s){const{context:r,displayLevel:d,painter:h,state:c}=t,y=this._styleRepository;let u=!1;for(const e of s)if(p(y.getLayerById(e),d)){u=!0;break}if(!u)return;const m=this._tileInfoView.getTileCoverage(t.state,0,"smallest"),{spans:f,lodInfo:_}=m,{level:b}=_,g=(0,aaBoundingRect.Ue)(),T=[];if(this._renderPasses){const s=this._renderPasses[0];(0,maybe.pC)(this._clippingInfos)&&(s.brushes[0].prepareState(t,this._clippingInfos[0]),s.brushes[0].drawMany(t,this._clippingInfos))}const v=this._backgroundTiles;let C,F=0;for(const{row:e,colFrom:l,colTo:a}of f)for(let t=l;t<=a;t++){if(F<v.length)C=v[F],C.key.set(b,e,_.normalizeCol(t),_.getWorldForColumn(t)),this._tileInfoView.getTileBounds(g,C.key,!1),C.bounds=g,C.coords[0]=g[0],C.coords[1]=g[3];else{const s=new TileKey.Z(b,e,_.normalizeCol(t),_.getWorldForColumn(t));C=new TiledDisplayObject.I(s,this._tileInfoView.getTileBounds((0,aaBoundingRect.Ue)(),s),[512,512],[4096,4096]),v.push(C)}C.setTransform(c,this._tileInfoView.getTileResolution(C.key)),T.push(C),F++}r.setStencilWriteMask(0),r.setColorMask(!0,!0,!0,!0),r.setStencilOp(7680,7680,7681),r.setStencilFunction(514,0,255);let w=!0;t.drawPhase===enums.jx.HITTEST&&(w=!1),r.setStencilTestEnabled(w);for(const e of s){const s=y.getLayerById(e);p(s,d)&&(t.styleLayerUID=s.uid,t.styleLayer=s,h.renderObjects(t,T,"vtlBackground"))}TileCoverage.Z.pool.release(m)}}var TileInfo=__webpack_require__(40920),TileInfoView=__webpack_require__(46666);class t extends TileInfoView.Z{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(e){const s=TileKey.Z.pool.acquire(e),t=0===s.level?null:TileKey.Z.getId(s.level-1,s.row>>1,s.col>>1,s.world);return TileKey.Z.pool.release(s),t}getTileCoverage(e,l,s){const t=super.getTileCoverage(e,l,s);if(!t)return t;const o=1<<t.lodInfo.level;return t.spans=t.spans.filter((e=>e.row>=0&&e.row<o)),t}scaleToLevel(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];{const l=this._fullCacheLodInfos;if(e>l[0].scale)return l[0].level;let s,t;for(let o=0;o<l.length-1;o++)if(t=l[o+1],e>t.scale)return s=l[o],s.level+(s.scale-e)/(s.scale-t.scale);return l[l.length-1].level}}_initializeFullCacheLODs(l){let s;if(0===l[0].level)s=l.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})));else{const l=this.tileInfo.size[0],t=this.tileInfo.spatialReference;s=TileInfo.Z.create({size:l,spatialReference:t}).lods.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})))}for(let e=0;e<s.length;e++)this._levelByScale[s[e].scale]=s[e].level;this._fullCacheLodInfos=s}}const TileInfoViewPOT=t,w=Logger.Z.getLogger("esri.views.2d.layers.VectorTileLayerView2D");let Q=class extends((0,LayerView2D.y)(LayerView.Z)){constructor(){super(...arguments),this._styleChanges=[],this._handles=new Handles.Z,this._fetchQueue=null,this._parseQueue=null,this._isTileHandlerReady=!1,this.fading=!1}initialize(){const e=this.layer.tileInfo;if(!(e&&e.spatialReference).equals(this.view.spatialReference))return void this.addResolvingPromise(Promise.reject(new Error.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer})));const{style:t,spriteUrl:i,glyphsUrl:s}=this.layer.currentStyleInfo;this._styleRepository=new StyleRepository.Z(t,{spriteUrl:i,glyphsUrl:s}),this._tileInfoView=new TileInfoViewPOT(this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new m(this._tileInfoView),this._tileHandler=new TileHandler.m(this.layer,this._styleRepository,window.devicePixelRatio||1),this.container.addChild(this._vectorTileContainer),this.handles.add([this._vectorTileContainer.on("fade-start",(()=>{this.fading=!0,this.notifyChange("updating"),this.requestUpdate()})),this._vectorTileContainer.on("fade-complete",(()=>{this.fading=!1,this.notifyChange("updating"),this.requestUpdate()}))])}destroy(){var e;this._stop(),this.container.removeAllChildren(),this._vectorTileContainer&&(this._vectorTileContainer.destroy(),this._vectorTileContainer=null),null==(e=this._tileHandler)||e.destroy(),this._tileHandler=null}async hitTest(e,t){if(this.suspended||!this._tileHandlerPromise)return null;await this._tileHandlerPromise;const i=await this._vectorTileContainer.hitTest(e,t);if(!i||0===i.length)return null;const s=i[0]-1,r=this._styleRepository,a=r.getStyleLayerByUID(s);if(!a)return null;const l=r.getStyleLayerIndex(a.id),n=new Graphic.Z({attributes:{layerId:l,layerName:a.id,layerUID:s}});return n.layer=this.layer,n.sourceLayer=this.layer,n}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){this._start(),this._handles.add([this.layer.on("paint-change",(e=>{if(e.isDataDriven)this._styleChanges.push({type:0,data:e}),this.notifyChange("updating"),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layerName);if(!i)return;const s=3===i.type;t.setPaintProperties(e.layerName,e.paint),s&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()}})),this.layer.on("layout-change",(e=>{const i=this._styleRepository,s=i.getLayerById(e.layer);if(!s)return;const r=(0,diffUtils.Hg)(s.layout,e.layout);if(!(0,maybe.Wi)(r)){if((0,diffUtils.uD)(r,"visibility")&&1===function H(e){if((0,maybe.Wi)(e))return 0;switch(e.type){case"partial":return Object.keys(e.diff).length;case"complete":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case"collection":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}(r))return i.setLayoutProperties(e.layer,e.layout),3===s.type&&this._vectorTileContainer.restartDeclutter(),void this._vectorTileContainer.requestRender();this._styleChanges.push({type:1,data:e}),this.notifyChange("updating"),this.requestUpdate()}})),this.layer.on("style-layer-visibility-change",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(t.setStyleLayerVisibility(e.layer,e.visibility),3===i.type&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())})),this.layer.on("style-layer-change",(e=>{this._styleChanges.push({type:2,data:e}),this.notifyChange("updating"),this.requestUpdate()})),this.layer.on("delete-style-layer",(e=>{this._styleChanges.push({type:3,data:e}),this.notifyChange("updating"),this.requestUpdate()})),this.layer.on("load-style",(()=>this._loadStyle()))])}detach(){this._stop(),this._handles.removeAll()}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}canResume(){let e=super.canResume();const t=this.layer;if(e&&t.currentStyleInfo){const i=this.view.scale,s=t.currentStyleInfo;if(s&&s.layerDefinition){const t=s.layerDefinition;t.minScale&&t.minScale<i&&(e=!1),t.maxScale&&t.maxScale>i&&(e=!1)}}return e}isUpdating(){const e=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||e.length>0&&e.filter((e=>e.invalidating)).length>0||this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._tileHandlerPromise.then((()=>{this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once("attach",(()=>this.requestUpdate())),e&&(t.setData(e.tileData),this.requestUpdate(),this.notifyChange("updating"))})).catch((e=>{this.notifyChange("updating"),(0,promiseUtils.D_)(e)||w.error(e)}))})),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new a({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new TileQueue.Z({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15}),this._parseQueue=new TileQueue.Z({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue&&(this._fetchQueue.destroy(),this._fetchQueue=null),this._parseQueue&&(this._parseQueue.destroy(),this._parseQueue=null),this._tileManager&&(this._tileManager.destroy(),this._tileManager=null),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){const i=await this._tileHandler.fetchTileData(e,t);return this.notifyChange("updating"),i}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){w.error("error applying vector-tiles style update",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const t=this._styleRepository,i=[];e.forEach((e=>{if(3!==e.type)return;const s=e.data,r=t.getLayerById(s.layerName);r&&i.push(r.uid)}));const s=[];let r;e.forEach((e=>{const i=e.type,a=e.data;switch(i){case 0:t.setPaintProperties(a.layerName,a.paint),r=a.layerName;break;case 1:t.setLayoutProperties(a.layerName,a.layout),r=a.layerName;break;case 3:return void t.deleteStyleLayer(a.layerName);case 2:t.setStyleLayer(a.layer,a.index),r=a.layer.id}const l=t.getLayerById(r);l&&s.push(l.uid)}));const a=this._vectorTileContainer.children;if(i.length>0){this._vectorTileContainer.deleteStyleLayers(i);for(const e of a)e.deleteLayerData(i)}if(this._fetchQueue.resume(),this._parseQueue.resume(),s.length>0){const e=[];for(const t of a){const i=this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e,styleLayerUIDs:s}))).then((e=>t.setData(e.tileData)));e.push(i)}await Promise.all(e)}this._styleChanges=[],this._isTileHandlerReady=!0,this.notifyChange("updating"),this.requestUpdate()}async _loadStyle(){const{style:e,spriteUrl:t,glyphsUrl:i}=this.layer.currentStyleInfo;this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this.notifyChange("updating"),this._styleRepository=new StyleRepository.Z(e,{spriteUrl:t,glyphsUrl:i}),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=(0,promiseUtils.yi)();const{signal:s}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,e),await this._tileHandlerPromise}catch(a){if(!(0,promiseUtils.D_)(a))throw a}if(s.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange("updating"),void this.requestUpdate();const r=await this._tileHandler.spriteMosaic;this._vectorTileContainer.setStyleResources(r,this._tileHandler.glyphMosaic,this._styleRepository),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange("updating"),this.requestUpdate()}_createVectorTile(e){const t=this._tileInfoView.getTileBounds((0,aaBoundingRect.Ue)(),e);return new VectorTile.i(e,this._styleRepository,t,[512,512])}};(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"_fetchQueue",void 0),(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"_parseQueue",void 0),(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"_isTileHandlerReady",void 0),(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"fading",void 0),(0,tslib_es6._)([(0,property.Cb)()],Q.prototype,"updating",void 0),Q=(0,tslib_es6._)([(0,subclass.j)("esri.views.2d.layers.VectorTileLayerView2D")],Q);const VectorTileLayerView2D=Q}}]);
//# sourceMappingURL=5428.ebb5436d.iframe.bundle.js.map