"use strict";(self.webpackChunkreact_arcgis_wmws=self.webpackChunkreact_arcgis_wmws||[]).push([[1128],{80657:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>r});var r=(0,__webpack_require__(58340).c)((function(o){var r;void 0!==(r=function(){function r(o,n,a,f,i){for(;f>a;){if(f-a>600){var c=f-a+1,e=n-a+1,h=Math.log(c),u=.5*Math.exp(2*h/3),s=.5*Math.sqrt(h*u*(c-u)/c)*(e-c/2<0?-1:1);r(o,n,Math.max(a,Math.floor(n-e*u/c+s)),Math.min(f,Math.floor(n+(c-e)*u/c+s)),i)}var M=o[n],m=a,v=f;for(t(o,a,n),i(o[f],M)>0&&t(o,a,f);m<v;){for(t(o,m,v),m++,v--;i(o[m],M)<0;)m++;for(;i(o[v],M)>0;)v--}0===i(o[a],M)?t(o,a,v):t(o,++v,f),v<=n&&(a=v+1),n<=v&&(f=v-1)}}function t(o,r,t){var n=o[r];o[r]=o[t],o[t]=n}function n(o,r){return o<r?-1:o>r?1:0}return function o(o,t,a,f,i){r(o,t,a||0,f||o.length-1,i||n)}}())&&(o.exports=r)}))},33480:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function n(n,t){return n?t?4:3:t?3:2}function t(t,I,o,u,l){if(!I||!I.lengths.length)return null;const N="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:i,coords:T}=I,h=n(o,u);let g=0;for(const n of i){const t=e(f,T,g,n,o,u,N);t&&c.push(t),g+=n*h}if(c.sort(((n,t)=>{let e=N*n[2]-N*t[2];return 0===e&&o&&(e=n[4]-t[4]),e})),c.length){let n=6*c[0][2];s[0]=c[0][0]/n,s[1]=c[0][1]/n,o&&(n=6*c[0][4],s[2]=0!==n?c[0][3]/n:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const n=I.lengths[0]?r(T,0,i[0],o,u):null;if(!n)return null;s[0]=n[0],s[1]=n[1],o&&n.length>2&&(s[2]=n[2])}return t}function e(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,b=I-1;n<b;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function r(t,e,r,N,s){const c=n(N,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,b=r-1;n<b;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],b=t[i+2],m=N?o(n,e,r,s,c,b):I(n,e,s,c);if(m)if(T+=m,N){const t=l(n,e,r,s,c,b);h+=m*t[0],g+=m*t[1],E+=m*t[2]}else{const t=u(n,e,s,c);h+=m*t[0],g+=m*t[1]}}return T>0?N?[h/T,g/T,E/T]:[h/T,g/T]:r>0?N?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function I(n,t,e,r){const I=e-n,o=r-t;return Math.sqrt(I*I+o*o)}function o(n,t,e,r,I,o){const u=r-n,l=I-t,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function u(n,t,e,r){return[n+.5*(e-n),t+.5*(r-t)]}function l(n,t,e,r,I,o){return[n+.5*(r-n),t+.5*(I-t),e+.5*(o-e)]}__webpack_require__.d(__webpack_exports__,{Y:()=>t})},85109:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(36663),_core_maybe_js__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(39994),__webpack_require__(61681)),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(13802),__webpack_require__(7283),__webpack_require__(81977)),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12571),_Graphic_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(3466),__webpack_require__(12173),__webpack_require__(51876),__webpack_require__(80085)),_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(24568),_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1983),_LayerView3D_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(19654),_support_layerViewUpdatingProperties_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(72035),_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(26216),_I3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(99380);let m=class extends((0,_I3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_14__.N)((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_11__.A)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_13__.Z))){constructor(){super(...arguments),this.lodFactor=1,this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=1,this._overlayTexOffset=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_10__.b)(-1,-1,-1,-1),this._overlayTexScale=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_10__.a)(),this._overlayTextures=[null,null],this._overlayHighlights=[null,null],this._overlayNormals=[null,null]}get progressiveLoadFactor(){return this.lodFactor>=1?.2:1}setDrapingTextures(e,o,t,s,i){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_15__.pC)(t)&&(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.SO)(o)>0?(this._overlayTextures[e]=t,this._overlayHighlights[e]=s,this._overlayNormals[e]=i,this._overlayTexOffset[2*e]=-o[0]/(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.bf)(o),this._overlayTexOffset[2*e+1]=-o[1]/(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.Cb)(o),this._overlayTexScale[2*e]=1/(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.bf)(o),this._overlayTexScale[2*e+1]=1/(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.Cb)(o)):(this._overlayTextures[e]=null,this._overlayHighlights[e]=null,this._overlayNormals[e]=null,this._overlayTexOffset[2*e]=-1,this._overlayTexOffset[2*e+1]=-1,this._overlayTexScale[2*e]=0,this._overlayTexScale[2*e+1]=0),this._forAllNodes((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_15__.pC)(e)&&this._collection.updateMaterial(e.objectHandle,(e=>this._updateMaterialOverlay(e)))))}_updateMaterialOverlay(e){e.overlayColorInner=this._overlayTextures[0],e.overlayColorOuter=this._overlayTextures[1],e.overlayHighlightInner=this._overlayHighlights[0],e.overlayHighlightOuter=this._overlayHighlights[1],e.overlayNormalInner=this._overlayNormals[0],e.overlayNormalOuter=this._overlayNormals[1],e.overlayTexOffset=this._overlayTexOffset,e.overlayTexScale=this._overlayTexScale}initialize(){this.updatingHandles.add(this.layer,"modifications",(()=>this._loadModifications()),2)}destroy(){}_createLayerGraphic(){const e=new _Graphic_js__WEBPACK_IMPORTED_MODULE_8__.Z;return e.layer=this.layer,e.sourceLayer=this.layer,e}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_15__.Wi)(this.layer.modifications))return void(this._modifications=[]);const e=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange(e,(()=>this._modifications=e.toArray()),2),"modifications")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],m.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({aliasOf:"layer"})],m.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],m.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)(_support_layerViewUpdatingProperties_js__WEBPACK_IMPORTED_MODULE_12__.q)],m.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,aliasOf:"_controller.updatingProgress"})],m.prototype,"updatingProgressValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],m.prototype,"lodFactor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],m.prototype,"progressiveLoadFactor",null),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_16__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.views.3d.layers.SceneLayerView3D")],m);const __WEBPACK_DEFAULT_EXPORT__=m}}]);