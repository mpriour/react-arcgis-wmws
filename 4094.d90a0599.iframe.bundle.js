"use strict";(self.webpackChunkreact_arcgis_wmws=self.webpackChunkreact_arcgis_wmws||[]).push([[4094],{59468:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function t(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function n(t,n){return"number"==typeof t?t:t&&t.stops&&t.stops.length?function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;"number"==typeof s&&(e+=s,n++)}return e/n}(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>"size"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o="visualVariables"in n?r(s,n.visualVariables):s;if("simple"===n.type)return t(o,n.symbol);if("unique-value"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if("class-breaks"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}__webpack_require__.d(__webpack_exports__,{k:()=>s})},94094:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(36663),_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__=(__webpack_require__(39994),__webpack_require__(61681)),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(13802),__webpack_require__(7283),__webpack_require__(81977)),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12571),_core_Error_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70375),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(3466),__webpack_require__(12173),__webpack_require__(51876),__webpack_require__(83614)),_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(55068),_LayerView3D_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(19654),_TiledLayerView3D_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(8712),_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(26216),_support_drapedUtils_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(99621),_layers_TileLayerView_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(77994);let c=class extends((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_10__.yc)((0,_TiledLayerView3D_js__WEBPACK_IMPORTED_MODULE_12__.r)((0,_layers_TileLayerView_js__WEBPACK_IMPORTED_MODULE_15__.D)((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_11__.A)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_13__.Z))))){get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,r=e[0].scale,t=e[e.length-1].scale;return this.levelRangeFromScaleRange(r,t)}return{minLevel:0,maxLevel:0}}initialize(){if("web-tile"===this.layer.type){const e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__.Wi)(e)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__.Wi)(t)||!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_9__.Up)(e,t)){const e="defaults"===this.layer.originOf("fullExtent")||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__.Wi)(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__.Z("layerview:incompatible-fullextent",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,r){return(0,_support_drapedUtils_js__WEBPACK_IMPORTED_MODULE_14__.K)(e,r,this.view)}async doRefresh(e){this.suspended||this.emit("data-changed")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],c.prototype,"imageFormatIsOpaque",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],c.prototype,"hasMixedImageFormats",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({aliasOf:"layer.fullExtent"})],c.prototype,"fullExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],c.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({aliasOf:"layer.tileInfo"})],c.prototype,"tileInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)({readOnly:!0})],c.prototype,"dataLevelRange",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_17__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.views.3d.layers.TileLayerView3D")],c);const __WEBPACK_DEFAULT_EXPORT__=c},77994:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>i});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(36663),_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(39994),__webpack_require__(61681)),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(13802),__webpack_require__(7283),__webpack_require__(81977)),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12571),_core_Error_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70375),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(3466),__webpack_require__(12173),__webpack_require__(51876),__webpack_require__(78668)),_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(59468);const i=i=>{let c=class extends i{async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__.Z("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o}));if("tile"!==o.type)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__.Z("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:o.type}));const i=this.get("view.scale"),c=o.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.as)(c.map((async o=>{const s=o.createQuery(),p=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.pC)(t)?t.event:null,i=(0,_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_11__.k)({renderer:o.renderer,event:p});return s.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),s.outFields=await o.popupTemplate.getRequiredFields(),(await o.queryFeatures(s)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.Cb)()],c.prototype,"layer",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_12__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.j)("esri.layers.mixins.TileLayerView")],c),c}},99621:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>a});var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61681),_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(91772),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(91957),__webpack_require__(17321));function a(t,i,a,o=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_0__.Z){let s;if("2d"===a.type)s=i*a.resolution;else if("3d"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.pC)(o)&&!o.equals(a.spatialReference)?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.c9)(o)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__.c9)(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_0__.Z}}]);